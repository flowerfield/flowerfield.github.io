<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> javaScript系列 [28]-Event · 花田半亩</title><meta name="description" content="javaScript系列 [28]-Event - 文顶顶"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.jpeg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://weibo.com/u/3800117445/atom.xml" title="花田半亩"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/鲸鱼.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">文顶顶的BLOG</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">标签</a></li><li class="nav-list-item"><a href="https://www.cnblogs.com/wendingding/" target="_blank" class="nav-list-link">博客园</a></li><li class="nav-list-item"><a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place" target="_blank" class="nav-list-link">微博</a></li><li class="nav-list-item"><a href="http://blog.sina.com.cn/u/1910914290" target="_blank" class="nav-list-link">花田半亩</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">javaScript系列 [28]-Event</h1><div class="post-info">May 1, 2019<span class="post-count"></span> ✧ 字数统计:3,616(字) &nbsp;&nbsp; ♨︎ 阅读时长:14(分钟)</div><div class="post-content"><div class="tip">本文介绍JavaScript事件相关的知识点，主要包括事件流、事件处理程序、事件对象(event)以及常见事件类型和事件委托等相关内容。</div>

<p><img src="https://github.com/flowerField/Source/blob/master/Blog/js_base45.png?raw=true"></p>
<p>在网页开发涉及的三种基础技术(<a href=""> HTML \ CSS \ JavaScript </a>)中，JavaScript主要负责处理页面的<code>行为</code>，而所谓行为大多指的是<code>交互行为</code>。<strong>JavaScript和HTML间的交互通过事件来实现</strong>，换句话来说事件其实就是页面文档或浏览器窗口中发生的特定交互，譬如页面中的按钮标签被点击我们称之为按钮的点击(<code>click</code>)事件，类似的还有页面加载事件、鼠标的移入移除等等。</p>
<p>通常,我们在开发中对事件的操作(处理)主要由两部分组成，即<code>事件注册</code>和<code>事件函数</code>。我们总是需要先通过特定的方式来给标签添加(注册)事件监听，当事件发生时事件函数将得以调用执行。本文以<strong>能够清晰明确的把事件的传递过程、事件注册的方式、事件对象以及常见的事件类型讲解清楚</strong>为目标。</p>
<p class="titleX"><strong>事件流</strong></p>

<p><img src="https://github.com/flowerField/Source/blob/master/Blog/js_base47.png?raw=true"></p>
<p><strong>事件流</strong> 描述的其实是事件内在的传递过程(顺序)。</p>
<p>我们的开发经验是，当我们给某些标签注册(绑定)了事件后，该事件被触发就会执行对应的事件处理函数。这似乎是一个顺理成章的经验，但事件到底是如何传递的呢 ？我们知道在网页中有很多的Node节点，而Node节点之间是复杂的树结构，事件在接收、传递和处理的时候，是按照<code>目标节点-&gt;上层节点-&gt;根节点</code>还是<code>根节点-&gt;下层节点-&gt;目标节点</code>的顺序传递的呢？ 不管它们是按照什么样的顺序来传递接收的，事件在传递的时候都会形成一个流式的传递结构，这就是所谓的事件流。</p>
<p>关于事件流的处理最早由<a href=""> IE4 </a>和 <a href=""> Netscape Communicator 4 </a>两个浏览器开发团队提出具体方案，有意思的是它们在处理这个相同问题的时候居然提出了两种完全相反的事件流方案。其中，<a href=""> IE </a>的事件流是<strong>事件冒泡流</strong>，而 <a href=""> Netscape Communicator 4 </a>的事件流是<strong>事件捕获流</strong>。如果再加上<code>DOM2级事件规定的事件流</code>，那么意味着我们将要学习<code>三种不同事件流</code>，感觉有些棘手但好在它们本身并不复杂。下面我们将从IE的冒泡事件流开始介绍。</p>
<p><img src="https://github.com/flowerField/Source/blob/master/Blog/js_base48.png?raw=true"></p>
<p><span style="border:1px solid #ccc;padding:2px 10px;color:#fff;background:#195">事件冒泡流</span></p>
<p><strong>事件冒泡<a href=""> event bubbling </a></strong> 指的是事件开始时由最具体的元素接收，然后逐级向上传递到文档。</p>
<p><span style="border:1px solid #ccc;padding:2px 10px;color:#fff;background:#195">事件捕获流</span></p>
<p><strong>事件捕获<a href=""> event capturing </a></strong> 指的是由页面文档先接收事件，然后逐级向下传递到最具体的元素。</p>
<p><img src="https://github.com/flowerField/Source/blob/master/Blog/js_base50.png?raw=true"></p>
<p><span style="border:1px solid #ccc;padding:2px 10px;color:#fff;background:#195">DOM事件流</span></p>
<p><strong>DOM2级事件</strong> 规定的事件流包括三个阶段：<a href="">事件捕获阶段</a>、<a href="">处于目标阶段</a> 和 <a href="">事件冒泡阶段</a>。事件捕获会首先发生，其为截获事件提供了机会，然后是实际的目标接收到事件，最后会对事件进行冒泡，可以在事件冒泡阶段对事件作出响应。</p>
<p><strong>事件流的浏览器支持情况</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(一)事件冒泡流</span><br><span class="line">所有现代浏览器都支持事件冒泡，在具体实现的时候存在差异。</span><br><span class="line">IE5-的事件冒泡会跳过html标签，而IE9+、Firefox、Chrome 和 Safari 则将事件一直冒泡到 window 对象。</span><br><span class="line"></span><br><span class="line">(二)事件捕获流</span><br><span class="line">IE9+、Firefox、Chrome、Safari 和 Opera等浏览器均支持事件捕获流，它们均从 window 对象开始捕获事件。</span><br><span class="line">因为老版本的浏览器不支持，因此很少有人使用事件捕获流(只在特殊需要的时候)。</span><br><span class="line"></span><br><span class="line">(三)DOM事件流</span><br><span class="line">IE9+、Firefox、Chrome、Safari 和 Opera等浏览器均支持DOM事件流，IE8-则不支持。</span><br></pre></td></tr></table></figure></p>
<p class="titleX"><strong>事件处理程序(函数)</strong></p>

<p>事件指的是用户或浏览器自身执行的某种动作，譬如点击、拖拽、滚动等都是事件，在JavaScript中每种事件都有自己对应的名字，我们需要先通过特定的形式来给标签注册(绑定)事件，等事件被触发后进行响应，这个用来响应某个具体事件的函数我们称之为<code>事件处理函数</code>。</p>
<p>在网页开发中，我们为标签事件指定事件处理函数的方式有多种，下面分别介绍。</p>
<p><span style="border:1px solid #ccc;padding:2px 10px;color:#666">① 在html标签中添加事件处理函数</span></p>
<p>我们可以直接在标签身上以<code>属性节点</code>的形式来添加事件处理函数，这个属性节点的值要求是能够执行的JavaScript代码，可以是弹出框、函数调用等等形式。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--弹出消息--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"alert('点击了按钮')"</span>&gt;</span>按钮1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--控制台输出--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">"showMsg()"</span>&gt;</span>按钮2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--弹出消息(事件的类型-click)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"alert(event.type)"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--弹出消息(输入框的值-文顶顶)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"alert(this.value)"</span> <span class="attr">value</span>=<span class="string">"文顶顶"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--弹出消息(输入框的值-文顶顶)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">onclick</span>=<span class="string">"alert(value)"</span> <span class="attr">value</span>=<span class="string">"文顶顶"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--弹出消息(引用了表单中user输入框元素并访问其值-文顶顶)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"文顶顶"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"点击输出用户名"</span> <span class="attr">onclick</span>=<span class="string">"alert(user.value)"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--鼠标的移入事件演示--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"width:200px;height:50px;background:red"</span> <span class="attr">onmouseenter</span>=<span class="string">"showLog()"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">showMsg</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">"我是按钮点击事件的响应函数"</span>);</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">showLog</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">"鼠标移入div标签"</span>);</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在以这种方式处理的事件函数中有权访问全局作用域中的任何代码，而且在执行的代码中可以直接(不用自己定义或者是从函数形参中读取)通过<code>event</code>变量来访问事件对象，在函数内部<code>this</code>的值则指向事件的目标元素。此外，还有一个比较特殊的地方是它内部扩展作用域的方式，简单说就是在事件函数内部可以像访问局部变量一样来访问document和该元素本身的成员。</p>
<p class="tip"><strong>注意</strong> 我们在开发中应该尽量避免使用直接以属性节点的方式来处理标签的事件，因为它内在的作用域扩展机制在不同的浏览器中可能会产生不同的结果，而且这种方式让JavaScript和HTML代码交织在一起，耦合太过紧密不便于维护且违背JavaScript和html代码分离的原则。</p>

<p><span style="border:1px solid #ccc;padding:2px 10px;color:#666">② 通过标签的事件属性添加事件处理函数</span></p>
<p>我们也可以先通过DOM操作获取页面中指定的标签，然后通过把事件处理函数赋值给标签事件属性的方式来绑定事件。这种事件处理方式，因为其简单和跨浏览器的优势从第四代浏览器开始一直沿用至今。DOM中所有的元素(<a href=""> window \ document \ body \ div 等</a>)都拥有自己的事件处理属性，这些属性通常均为<code>on + 事件类型</code>的形式，全部小写且<span style="color:f05">每个事件支持一个事件处理函数</span>。</p>
<p>我们为标签(元素)注册(绑定)事件只需要把事件处理函数赋值给元素的事件属性即可，标签常用的事件属性有<code>onclick</code>、<code>onmouseenter</code>和<code>onkeydown</code>等，使用时形如<code>oBtn.onclick = function(){...}</code> ，如果需要将标签上绑定的事件移除则只需要把事件属性赋值为<code>null</code>即可。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btnID"</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"divID"</span> <span class="attr">style</span>=<span class="string">"width: 100px;height: 50px;background: #195"</span>&gt;</span>我是div标签<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"inputID"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请输入..."</span> <span class="attr">value</span>=<span class="string">"文顶顶"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">/*01-获取页面中指定的标签*/</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oBtn = <span class="built_in">document</span>.getElementById(<span class="string">"btnID"</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">"divID"</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oIpt = <span class="built_in">document</span>.getElementById(<span class="string">"inputID"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">/*02-给按钮注册点击事件*/</span></span></span><br><span class="line"><span class="javascript">  oBtn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">"按钮被点击了"</span>,event.type);          <span class="comment">//按钮被点击了 click</span></span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">/*03-给div注册鼠标移入移出事件*/</span></span></span><br><span class="line"><span class="undefined">  oDiv.onmouseenter = enter;</span></span><br><span class="line"><span class="undefined">  oDiv.onmouseleave = leave;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">enter</span>(<span class="params">event</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">"鼠标移入div标签"</span>, event.currentTarget);</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">leave</span>(<span class="params">event</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">"鼠标移出div标签"</span>, event.currentTarget);</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">/*04-给input标签注册监听事件*/</span></span></span><br><span class="line"><span class="javascript">  oIpt.oninput = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">"监听input事件"</span>,<span class="keyword">this</span>.value);      <span class="comment">//实时获取文本输入框的值并打印</span></span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">/*05-演示删除事件*/</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">//oBtn.onclick = null;    打开后按钮的点击事件将失效</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p class="tip">因为在这种处理方式中，事件函数被认为是标签(元素)的方法，因此函数中的<code>this</code>引用当前的标签(元素)，可以在事件处理函数中直接通过<code>this</code>来访问当前标签(元素)的任何属性和方法。</p>

<p><span style="border:1px solid #ccc;padding:2px 10px;color:#666">③ 在JavaScript代码中为标签注册事件监听</span></p>
<p>我们还可以直接调用<code>addEventListener()</code>方法来给标签注册事件监听，同时支持为标签注册(<code>addEventListener</code>)和移除(<code>removeEventListener</code>)事件监听。所有的DOM节点都包含这两个方法，功能强大，唯一需要考虑的就是IE9-的兼容性问题。</p>
<p><strong><code>语法</code></strong> <code>ele.addEventListener(type,handle,bool)</code>  | <code>ele.removeEventListener(type,handle,bool)</code><br><strong><code>参数</code></strong> <code>type</code>表示要处理的事件名(类型)，<code>handle</code>是事件处理函数，<code>bool</code>控制调用事件函数的阶段，如果值为false(默认)则表示在冒泡阶段调用，值为true则表示在捕获阶段调用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*01-获取页面中指定的标签*/</span></span><br><span class="line"><span class="keyword">var</span> oBtn = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"button"</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/*02-给按钮绑定(注册)点击事件*/</span></span><br><span class="line"><span class="comment">/*02-A  捕获阶段调用事件函数*/</span></span><br><span class="line">oBtn.addEventListener(<span class="string">"click"</span>,listener, <span class="literal">true</span>);</span><br><span class="line"><span class="comment">/*02-B1 冒泡阶段调用事件函数*/</span></span><br><span class="line">oBtn.addEventListener(<span class="string">"click"</span>,listener1, <span class="literal">false</span>);</span><br><span class="line"><span class="comment">/*02-B2 冒泡阶段调用事件函数*/</span></span><br><span class="line">oBtn.addEventListener(<span class="string">"click"</span>,listener2, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*具体的-事件处理函数*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listener</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"点击了按钮-A-捕获阶段"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listener1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"点击了按钮-B1-冒泡阶段"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listener2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"点击了按钮-B2-冒泡阶段"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*点击按钮后的执行情况*/</span></span><br><span class="line"><span class="comment">// 点击了按钮-A-捕获阶段</span></span><br><span class="line"><span class="comment">// 点击了按钮-B1-冒泡阶段</span></span><br><span class="line"><span class="comment">// 点击了按钮-B2-冒泡阶段</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*03-删除按钮的点击事件*/</span></span><br><span class="line">oBtn.removeEventListener(<span class="string">"click"</span>,listener2, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<p>区别于<code>onclick</code>的方式，<code>addEventListener()</code>支持为标签绑定多个同类型的事件处理函数而且不存在覆盖的问题，当标签的事件被触发时绑定的事件处理函数会按照添加的顺序依次触发，需要注意的是在使用<code>removeEventListener()</code>方法移除标签的某个事件监听时，要求传入的函数同注册事件监听时的函数一致。此外，在IE9-的版本中，这两个方法不可用需考虑兼容性，在IE中我们可以使用<code>attachEvent</code>和<code>detachEvent</code>这两个方法来替代。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*01-获取页面中指定的标签*/</span></span><br><span class="line"><span class="keyword">var</span> oBtn = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"button"</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/*IE8以及更早版本中注册事件监听的方式*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*02-给按钮注册事件监听*/</span></span><br><span class="line">oBtn.attachEvent(<span class="string">"onclick"</span>,listener1);</span><br><span class="line">oBtn.attachEvent(<span class="string">"onclick"</span>,listener2);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listener1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"点击了按钮-A-冒泡阶段"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listener2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"点击了按钮-B-冒泡阶段"</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);       <span class="comment">//事件处理函数在全局作用域中运行(this-&gt;window)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*备注：如果给标签注册了多个事件监听，那么会以相反的顺序触发*/</span></span><br><span class="line"><span class="comment">//点击了按钮-B-冒泡阶段</span></span><br><span class="line"><span class="comment">//点击了按钮-A-冒泡阶段</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*03-演示移除事件处理程序的情况*/</span></span><br><span class="line">oBtn.detachEvent(<span class="string">"onclick"</span>,listener2);</span><br></pre></td></tr></table></figure>
<p class="tip">因为IE8及更早的版本只支持事件冒泡，因为通过<code>attachEvent()</code>方法添加的事件处理程序都会被添加到事件冒泡阶段，且事件函数中的this指向的并非事件标签而是<code>window</code>。</p>`<br><br><p class="titleX"><strong>常用的事件类型</strong></p>

<p>Web浏览器中可能发生的事件有很多种类型，如果时按照<code>DOM3级事件</code>的规定那么大概可以划分为UI事件、焦点和鼠标事件、文本和键盘事件以及变动事件等几种类型。因为涉及到的事件众多且用法各异，因此本节将只会简单罗列它们。</p>
<p><span style="border:1px solid #ccc;padding:2px 10px;color:#fff;background:#195">UI事件</span><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">load :  当页面完全加载后(包括页面中所有的图像、JavaScript文件、CSS文件等资源)触发window上面的load事件。</span><br><span class="line">unload: 当页面被完全卸载后触发window上面的unload事件，具体来说，当用户用一个页面切换到另一个页面时就会触发，常用于清除引用以避免内存泄露。</span><br><span class="line">resize: 当浏览器窗口被调整到一个新的高度或宽度时会触发window上面的resize事件，关于该事件不同的浏览器触发机制不同(FireFox)。</span><br><span class="line">scroll: 当页面文档滚动的时候会触发window上面的scroll方法，可以通过scrollLeft和scrollTop来监控该变化，需要注意标准和混杂模式下的差别。</span><br></pre></td></tr></table></figure></p>
<p>通常，我们总是把JavaScript的代码写到window.onload函数中以保证在执行JavaScript代码的时候页面和所有资源均以加载完毕。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;body onload=<span class="string">"alert('页面加载完毕')"</span>&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*常见的UI事件*/</span></span><br><span class="line">  <span class="comment">// window.onload = function (ev) &#123;</span></span><br><span class="line">  <span class="comment">//   console.log("页面所有资源都加载完毕--onload");</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.onunload = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">"页面被卸载---onunload"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"浏览器窗口大小被调整--onresize"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">window</span>.onscroll = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"监听到页面滚动----onscroll"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li>
<li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li>
<li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2019/04/18/javaScript系列 [27]-DOM/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2019 <a href="https://weibo.com/u/3800117445">文顶顶</a> &nbsp;☁ 全站字数统计 354.6k (字)</p><div class="topDiv"><div><img src="https://raw.githubusercontent.com/flowerField/Source/master/Blog/M.png" style="width:100px;height:100px"> </div></div><!--p © #{year} #[a(href=config.url)!= config.author], powered by #[a(href=hexoURL, target="_blank") Hexo] and #[a(href=apolloURL, target="_blank") hexo-theme-apollo].--></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>