<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 微信小程序基础[03]-小程序框架系统级文件 · 花田半亩</title><meta name="description" content="微信小程序基础[03]-小程序框架系统级文件 - 文顶顶"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.jpeg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://weibo.com/u/3800117445/atom.xml" title="花田半亩"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/鲸鱼.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">文顶顶的BLOG</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">标签</a></li><li class="nav-list-item"><a href="https://www.cnblogs.com/wendingding/" target="_blank" class="nav-list-link">博客园</a></li><li class="nav-list-item"><a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place" target="_blank" class="nav-list-link">微博</a></li><li class="nav-list-item"><a href="http://blog.sina.com.cn/u/1910914290" target="_blank" class="nav-list-link">花田半亩</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">微信小程序基础[03]-小程序框架系统级文件</h1><div class="post-info">Sep 22, 2018<span class="post-count"></span> ✧ 字数统计:1,759(字) &nbsp;&nbsp; ♨︎ 阅读时长:7(分钟)</div><div class="post-content"><blockquote>
<p>本文介绍开发微信小程序项目中的主体文件，这些文件的作用，以及具体的配置字段。</p>
</blockquote>
<p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx04.png?raw=true"></p>
<h3 id="1-0-配置文件-app-json"><a href="#1-0-配置文件-app-json" class="headerlink" title="1.0 配置文件(app.json)"></a>1.0 配置文件(app.json)</h3><h4 id="app-json文件说明"><a href="#app-json文件说明" class="headerlink" title="app.json文件说明"></a>app.json文件说明</h4><p>该文件是小程序的配置文件，编写的时候需要严格遵循json的格式规范(关于JSON的知识点请参考<a href="http://wendingding.com/2018/04/16/javaScript%E7%B3%BB%E5%88%97%20[05]-javaScript%E5%92%8CJSON/" target="_blank" rel="external">javaScript系列 [05]-javaScript和JSON</a>)，在程序加载的时候负责对小程序的全局进行配置，配置项如下：</p>
<p>☑︎ <span style="color:#f50">page</span>:设置页面路径。<br>◻︎ <span style="color:#f50">tabBar</span>:设置tab的表现。<br>◻︎ <span style="color:#f50">window</span>:设置默认页面的窗口表现。<br>◻︎ <span style="color:#f50">networkTimeout</span>:设置网络超时时间。<br>◻︎ <span style="color:#f50">debug</span>:设置是否开启debug模式，可选项为true或false，默认关闭。</p>
<p>列出app.json文件内容的整体结构<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"pages"</span>:[],</div><div class="line">  <span class="attr">"window"</span>:&#123;&#125;,</div><div class="line">  <span class="attr">"tabBar"</span>:&#123;&#125;,</div><div class="line">  <span class="attr">"networkTimeout"</span>:&#123;&#125;,</div><div class="line">  <span class="attr">"debug"</span>:<span class="literal">false</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="pages配置项"><a href="#pages配置项" class="headerlink" title="pages配置项"></a>pages配置项</h4><p>pages配置选项负责注册小程序的页面，是必须要填写的，当我们使用开发工具来创建页面的时候默认会自动生成对应的配置信息。</p>
<p>pages配置项的value值是一个包含多有页面路径的数组，用来指定小程序由哪些页面构成，其中每一项均有“<code>路径+文件名</code>”组成，下面给出示例：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line"><span class="attr">"pages"</span>: [</div><div class="line">  <span class="string">"pages/home/home"</span>,</div><div class="line">  <span class="string">"pages/cart/cart"</span>,</div><div class="line">  <span class="string">"pages/category/category"</span>,</div><div class="line">  <span class="string">"pages/mine/mine"</span>,</div><div class="line">  <span class="string">"pages/index/index"</span>,</div><div class="line">  <span class="string">"pages/logs/logs"</span>,</div><div class="line">  <span class="string">"pages/login/login"</span>,</div><div class="line">  <span class="string">"component/wdd-component/block/index"</span>,</div><div class="line">  <span class="string">"pages/mine/coupon/coupon"</span>,</div><div class="line">  <span class="string">"component/wdd-component/addresscard/index"</span></div><div class="line">]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<div class="tip"><br>说明：pages配置项中的第一个元素(上面为home)默认为小程序的首页，路径中不需要填写文件后缀名，渲染页面的时候框架会自动寻找路径并把同名的.json、.wxml、.wxss和.js文件进行整合。<br></div>

<h4 id="window配置项"><a href="#window配置项" class="headerlink" title="window配置项"></a>window配置项</h4><p>window配置项负责设置小程序<span style="color:"#195"">状态栏、导航条、标题、窗口背景色等系统级样式。</span></p>
<p><span class="propWX">navigationBarBackgroundColor</span>    导航栏背景颜色     [<code>HexColor类型</code>]<br><span class="propWX">navigationBarTextStyle</span>          导航栏标题颜色     [<code>String类型</code>],black或white(默认)<br><span class="propWX">navigationBarTitleText</span>          导航栏标题文字内容  [<code>String类型</code>]<br><span class="propWX">navigationStyle</span>                    导航栏样式         [<code>String类型</code>]，default(默认)或custom<br><span class="propWX">backgroundColor</span>                  窗口的背景色       [<code>HexColor类型</code>]<br><span class="propWX">backgroundTextStyle</span>              下拉加载的样式     [<code>String类型</code>]，dark(默认)和light<br><span class="propWX">backgroundColorTop    </span>           顶部窗口的背景色    [<code>HexColor类型</code>]     ，仅 iOS 支持<br><span class="propWX">backgroundColorBottom</span>            底部窗口的背景色    [<code>HexColor类型</code>]     ，仅 iOS 支持<br><span class="propWX">enablePullDownRefresh</span>            全局开启下拉刷新    [<code>Boolean类型值</code>]，true和false(默认)<br><span class="propWX">onReachBottomDistance</span>            上拉触底事件触发时距底部距离 [<code>Number类型</code>]，默认值为50px</p>
<p>这里给出一个小程序项目中的window配置项示例<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"window"</span>: &#123;</div><div class="line">    <span class="attr">"backgroundTextStyle"</span>: <span class="string">"light"</span>,</div><div class="line">    <span class="attr">"navigationBarBackgroundColor"</span>: <span class="string">"#000"</span>,</div><div class="line">    <span class="attr">"navigationBarTitleText"</span>: <span class="string">"文顶顶的小程序"</span>,</div><div class="line">    <span class="attr">"navigationBarTextStyle"</span>: <span class="string">"white"</span>,</div><div class="line">    <span class="attr">"backgroundColor"</span>: <span class="string">"#eeeeee"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="tabBar配置项"><a href="#tabBar配置项" class="headerlink" title="tabBar配置项"></a>tabBar配置项</h4><p><strong><code>tabBar配置项</code></strong> 用于设置小程序中的tabBar选项卡，在商业小程序中使用频率很高。tabBar配置项的可配置属性如下：</p>
<p>☑︎ <span class="propWX-green">color</span>                   tab 上的文字默认颜色[<code>HexColor类型</code>]<br>☑︎ <span class="propWX-green">selectedColor</span>         tab 上的文字选中时的颜色[<code>HexColor类型</code>]<br>☑︎ <span class="propWX-green">backgroundColor</span>         tab 的背景色[<code>HexColor类型</code>]<br>◻︎ <span class="propWX-green">borderStyle</span>             tabbar上边框的颜色， 仅支持 black / white(默认)<br>◻︎ <span class="propWX-green">position</span>                 tabBar的位置，仅支持 bottom / top[<code>String类型</code>]<br>☑︎ <span class="propWX-green">list</span>                     tab 的列表最少2个、最多5个元素[<code>Array类型</code>]</p>
<p><strong><code>list配置项</code></strong> 中的每一项都应该是一个对象，代表着一个tab的相关配置。list配置项的课配置属性如下：<br>☑︎ <span class="propWX-green">text    </span>            tab 上按钮文字<br>☑︎ <span class="propWX-green">pagePath</span>            页面路径，必须在 pages 中先定义<br>◻︎ <span class="propWX-green">iconPath</span>            图片的相对路径，icon 大小限制为40kb，不支持网络图片。<br>◻︎ <span class="propWX-green">selectedIconPath</span>    选中时的图片相对路径，icon 大小限制为40kb，不支持网络图片。</p>
<p>这里给出一个小程序项目中的tabBar配置项的示例和最终显示结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"tabBar"</span>: &#123;</div><div class="line">    <span class="attr">"selectedColor"</span>: <span class="string">"#000000"</span>,</div><div class="line">    <span class="attr">"list"</span>: [</div><div class="line">      &#123;</div><div class="line">        <span class="attr">"pagePath"</span>: <span class="string">"pages/home/home"</span>,</div><div class="line">        <span class="attr">"text"</span>: <span class="string">"首页"</span>,</div><div class="line">        <span class="attr">"iconPath"</span>: <span class="string">"img/tabbar/home.png"</span>,</div><div class="line">        <span class="attr">"selectedIconPath"</span>: <span class="string">"img/tabbar/homeSelected.png"</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">"pagePath"</span>: <span class="string">"pages/login/login"</span>,</div><div class="line">        <span class="attr">"text"</span>: <span class="string">"分类"</span>,</div><div class="line">        <span class="attr">"iconPath"</span>: <span class="string">"img/tabbar/category.png"</span>,</div><div class="line">        <span class="attr">"selectedIconPath"</span>: <span class="string">"img/tabbar/categorySelected.png"</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">"pagePath"</span>: <span class="string">"pages/cart/cart"</span>,</div><div class="line">        <span class="attr">"text"</span>: <span class="string">"购物车"</span>,</div><div class="line">        <span class="attr">"iconPath"</span>: <span class="string">"img/tabbar/cart.png"</span>,</div><div class="line">        <span class="attr">"selectedIconPath"</span>: <span class="string">"img/tabbar/cartSelected.png"</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">"pagePath"</span>: <span class="string">"pages/mine/mine"</span>,</div><div class="line">        <span class="attr">"text"</span>: <span class="string">"我的"</span>,</div><div class="line">        <span class="attr">"iconPath"</span>: <span class="string">"img/tabbar/mine.png"</span>,</div><div class="line">        <span class="attr">"selectedIconPath"</span>: <span class="string">"img/tabbar/mineSelected.png"</span></div><div class="line">      &#125; ]</div><div class="line">  &#125;&#125;</div></pre></td></tr></table></figure>
<p>上面配置项的显示效果如下图<br><img src="https://github.com/flowerField/Source/blob/master/Blog/wx05.png?raw=true" width="450px"></p>
<div></div>


<h4 id="请求超时和debug模式"><a href="#请求超时和debug模式" class="headerlink" title="请求超时和debug模式"></a>请求超时和debug模式</h4><p><strong><code>networkTimeout</code></strong>用于控制小程序中所有网络请求的超时时间(只能通过该配置项统一的配置)。</p>
<p><strong><code>debug配置项</code></strong>用于控制是否开启debug模式，默认情况下是关闭的，当debug模式设置为true之后在开发者工具的控制面板，所有的调试信息将以info的形式输。</p>
<div class="tip">说明：需要注意全局配置文件和页面配置文件的关系，当路由到对应页面的时候，页面配置文件的配置项将会覆盖全局配置</div>

<h3 id="2-0-逻辑控制文件-app-js"><a href="#2-0-逻辑控制文件-app-js" class="headerlink" title="2.0 逻辑控制文件(app.js)"></a>2.0 逻辑控制文件(app.js)</h3><p>app.js是小程序的整体逻辑控制文件，在该文件中通过<span style="color:#f82">App()函数</span>来注册小程序的生命周期函数、全局方法和全局属性，而且已经注册的小程序实例可以在其他的逻辑层代码中通过getApp()函数获取。</p>
<strong>App()函数用于注册一个微信小程序。</strong><br><strong>App()函数必须在app.js中注册，且不能注册多个。</strong><br><strong>App()函数的Object参数对象主要包括<code>生命周期函数</code>和其它数据，生命周期函数用于程序监听。</strong>

<p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx06.png?raw=true"></p>
<p><strong>生命周期函数说明</strong></p>
<p>当启动一个微信小程序的时候，会首先依次触发<code>onLaunch</code>和<code>onShow方法</code>，然后通过app.json配置文件中的pages配置项来注册相应的页面，最后根据默认路径加载首页。当用户点击关闭标签或点击了设备的Home按钮离开微信的时候小程序并不会直接销毁，而是进入后台，这两种情况都会触发<code>onHide方法</code>，当再次打开微信小程序的时候会触发<code>onShow方法</code>。当小程序进入后台一定时间或者系统资源占用过高的时候会被真正的销毁。</p>
<p>注册小程序的示例代码(该代码可以在app.js文件通过敲入<code>App + Tab键</code>的方式生成)<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">App(&#123;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 当小程序初始化完成时，会触发 onLaunch（全局只触发一次）</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  onLaunch: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 当小程序启动，或从后台进入前台显示，会触发 onShow</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  onShow: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;&#125;,</div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 当小程序从前台进入后台，会触发 onHide</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  onHide: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 当小程序发生脚本错误，或者 api 调用失败时，会触发 onError 并带上错误信息</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  onError: <span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;&#125;,</div><div class="line">  otherDate:<span class="string">'存放其他数据'</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h3 id="3-0-全局样式文件-app-wxss"><a href="#3-0-全局样式文件-app-wxss" class="headerlink" title="3.0 全局样式文件(app.wxss)"></a>3.0 全局样式文件(app.wxss)</h3><p>WXSS是小程序基于CSS拓展的一套样式语言，它实现了CSS大部分规则。<br><strong>app.wxss是全局样式表，对项目中每个页面都有效</strong>，可以将一些系统级别的样式统一写入到该文件中。</p>
<div class="tip">注意：页面在渲染的时候，页面中的.wxss文件样式会覆盖app.wxss中相同的选择器样式。</div>

<hr>
<ul>
<li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="external">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="external">花田半亩</a></li>
<li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="external">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li>
<li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="external">文顶顶</a></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2018/09/23/微信小程序系列[04]-小程序框架页面级文件/" class="prev">上一篇</a><a href="/2018/09/21/微信小程序系列[02]-小程序框架的文件体系/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2018 <a href="https://weibo.com/u/3800117445">文顶顶</a> &nbsp;☁ 全站字数统计213.3k(字)</p><!--p © #{year} #[a(href=config.url)!= config.author], powered by #[a(href=hexoURL, target="_blank") Hexo] and #[a(href=apolloURL, target="_blank") hexo-theme-apollo].--></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>