<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"><title>花田半亩</title><link rel="stylesheet" href="/css/app.css"></head><body><div class="container"><div class="nav j_nav"><!-- nav header--><div class="nav__header"><a href="/"><h1>花田半亩</h1></a></div><!-- nav body--><div class="nav__body"><ul class="nav__items"><li class="nav__item"><a href="/">Home</a></li><li class="nav__item"><a href="/tags">Tags</a></li><li class="nav__item"><a href="/about">About</a></li></ul></div><!-- nav footer--><div class="nav__footer"><a href="https://github.com/zhaobao">Theme By</a></div></div><div class="body"><div class="body__header"><h2>微信小程序基础[02]-小程序框架的文件体系</h2></div><div class="body__content"><div class="body__item post_tags"><a href="/tags/微信小程序序列/" class="post_tag">微信小程序序列</a></div><div class="body__item"><blockquote>
<p>本文介绍开发微信小程序项目中的体系结构和组成部分。</p>
</blockquote>
<h4 id="1-0-微信小程序框架体系"><a href="#1-0-微信小程序框架体系" class="headerlink" title="1.0 微信小程序框架体系"></a>1.0 微信小程序框架体系</h4><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx03.png?raw=true" height="300px"></p>
<p>微信小程序框架体系由两部分组成，分别是视图层和逻辑层。</p>
<p>视图层由<code>WXML</code>和<code>WXSS</code>组成，类似于前端开发中的HTML(标签)和CSS(样式)。</p>
<p>逻辑层是一套运行在本地JavaScript引擎中的JavaScript代码，负责调用数据处理方法来驱动视图更新。</p>
<p>微信小程序的整体开发流程非常接近前端<span style="color:#195">HTML + CSS + JavaScript</span>的模式,需要注意的是在小程序开发中没有DOM的概念的，本地也没有document和window等对象，更不能使用jQuery等类似的框架。</p>
<p>微信小程序中视图层和逻辑层的交互主要通过数据绑定和事件响应来实现，采用了单向绑定的机制。</p>
<p><strong>微信小程序的单向绑定机制</strong></p>
<p><span style="color:#f40">单向绑定机制需要先将逻辑层和视图层的数据与事件进行绑定，当页面需要修改的时候，逻辑层只需要调用特定的setData方法修改已经绑定的数据即可，这时候框架会自动触发WXML来重新渲染整个视图，当框架接收到用户的交互操作时会根据视图层绑定的事件执行逻辑层中对应的事件函数以进行响应</span>。</p>
<h4 id="2-0-微信小程序的结构"><a href="#2-0-微信小程序的结构" class="headerlink" title="2.0 微信小程序的结构"></a>2.0 微信小程序的结构</h4><p>微信小程序的开发工具下载并安装之后，我们可以来开始创建一个新的项目，如果没有appID那么可以选择使用测试账号。</p>
<p>项目初始化完成后，我们能够看到下面的界面。</p>
<p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx02.png?raw=true" height="300px"></p>
<p>整个开发界面大概可以分成工具选项区、模拟器显示区、调试区、代码目录和工作区，其中工作区、模拟器显示区和调试区均可以选择在关闭在打开中进行切换，这里我们主要关注项目初始化后的代码目录。</p>
<p>打印项目文件的目录结构(使用命令行操作，具体请参考<a href="http://wendingding.com/2018/04/11/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%B3%BB%E5%88%97%20Mac%E7%B3%BB%E7%BB%9F%E4%B8%ADTree%E7%9A%84%E4%BD%BF%E7%94%A8/" target="_blank" rel="external">网络编程系列 Mac系统中Tree的使用</a>)如下。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">├── app.js</div><div class="line">├── app.json</div><div class="line">├── app.wxss</div><div class="line">├── pages</div><div class="line">│   ├── index</div><div class="line">│   │   ├── index.js</div><div class="line">│   │   ├── index.wxml</div><div class="line">│   │   └── index.wxss</div><div class="line">│   └── logs</div><div class="line">│       ├── logs.js</div><div class="line">│       ├── logs.json</div><div class="line">│       ├── logs.wxml</div><div class="line">│       └── logs.wxss</div><div class="line">├── project.config.json</div><div class="line">└── utils</div><div class="line">    └── util.js</div></pre></td></tr></table></figure>
<p>在一个完成的小程序项目中，所有的文件可以划分为<strong><code>小程序框架主体文件</code></strong>和<strong><code>页面文件</code></strong>两类。</p>
<p><strong>① 小程序框架主体文件</strong>是系统级文件，每个项目中只有一份，他们分别是：</p>
<pre>
  app.js文件      控制小程序整体逻辑，主要用于注册小程序全局实例。
  app.json文件    控制小程序整体配置，配置小程序整体设置。
  app.wxss文件    控制小程序整体样式，对所有页面的布局文件都有效。
  project.config.json文件     整个项目的配置信息
</pre>

<p><strong>② 页面文件</strong> 通常由四个文件组成，分别是<span style="color:#195">.wxml（结构）.wxss（样式）.js（逻辑）和.json（配置）</span>。框架规定，同一个页面的这四个文件必须具有相同的路径和文件名，在编译的时候它们将自动关联。在初始化后的项目中，pages文件夹下面拥有两个默认的页面，分别是index页面和logs页面。</p>
</div></div><div id="disqus_thread"></div><div class="body__footer"><div class="footer__content">footer</div></div></div></div><div class="menu j-menu">ΞΞ</div><!-- code highlight support--><script src="/js/highlight.js"></script><!-- zoom support--><script src="/lib/zoom/zepto.js"></script><script src="/lib/zoom/zoom.js"></script><!-- disqus support--><!-- ga support--><script src="/js/footer.js"></script></body></html>