<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> jQuery系列 [10]-jQuery框架源码解读[结构] · 花田半亩</title><meta name="description" content="jQuery系列 [10]-jQuery框架源码解读[结构] - 文顶顶"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.jpeg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://weibo.com/u/3800117445/atom.xml" title="花田半亩"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/鲸鱼.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">文顶顶的BLOG</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">标签</a></li><li class="nav-list-item"><a href="https://www.cnblogs.com/wendingding/" target="_blank" class="nav-list-link">博客园</a></li><li class="nav-list-item"><a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place" target="_blank" class="nav-list-link">微博</a></li><li class="nav-list-item"><a href="http://blog.sina.com.cn/u/1910914290" target="_blank" class="nav-list-link">花田半亩</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">jQuery系列 [10]-jQuery框架源码解读[结构]</h1><div class="post-info">Aug 24, 2018<span class="post-count"></span> ✧ 字数统计:5,340(字) &nbsp;&nbsp; ♨︎ 阅读时长:23(分钟)</div><div class="post-content"><blockquote>
<p>这篇文章将主要介绍jQuery框架的前500行代码并说明jQuery框架的整体结构。</p>
</blockquote>
<h3 id="整体结构"><a href="#整体结构" class="headerlink" title="整体结构"></a>整体结构</h3><p>这里先简单贴出jQuery框架3.3.1版本中的前600行代码，其它和整体结构无关的部分省略了。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div><div class="line">642</div><div class="line">643</div><div class="line">644</div><div class="line">645</div><div class="line">646</div><div class="line">647</div><div class="line">648</div><div class="line">649</div><div class="line">650</div><div class="line">651</div><div class="line">652</div><div class="line">653</div><div class="line">654</div><div class="line">655</div><div class="line">656</div><div class="line">657</div><div class="line">658</div><div class="line">659</div><div class="line">660</div><div class="line">661</div><div class="line">662</div><div class="line">663</div><div class="line">664</div><div class="line">665</div><div class="line">666</div><div class="line">667</div><div class="line">668</div><div class="line">669</div><div class="line">670</div><div class="line">671</div><div class="line">672</div><div class="line">673</div><div class="line">674</div><div class="line">675</div><div class="line">676</div><div class="line">677</div><div class="line">678</div><div class="line">679</div><div class="line">680</div><div class="line">681</div><div class="line">682</div><div class="line">683</div><div class="line">684</div><div class="line">685</div><div class="line">686</div><div class="line">687</div><div class="line">688</div><div class="line">689</div><div class="line">690</div><div class="line">691</div><div class="line">692</div><div class="line">693</div><div class="line">694</div><div class="line">695</div><div class="line">696</div><div class="line">697</div><div class="line">698</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"> * jQuery JavaScript Library v3.3.1</div><div class="line"> * https://jquery.com/ 官网地址</div><div class="line"> *</div><div class="line"> * Includes Sizzle.js</div><div class="line"> * https://sizzlejs.com/  核心选择器</div><div class="line"> *</div><div class="line"> * Copyright JS Foundation and other contributors</div><div class="line"> * Released under the MIT license	开源协议</div><div class="line"> * https://jquery.org/license       开源协议地址</div><div class="line"> *</div><div class="line"> * Date: 2018-01-20T17:24Z			更新(发布)时间</div><div class="line"> */</div><div class="line"></div><div class="line">//jQuery的外城结构是一个闭包(即时调用函数)</div><div class="line">//整体结构可以抽象为(fn)(....)</div><div class="line">( function( global, factory ) &#123;</div><div class="line"></div><div class="line">	"use strict"; 	//开启严格模式</div><div class="line"></div><div class="line">	//判断的当前的环境是否是CommonJs</div><div class="line">	//说明：CommJs 环境中会有一个 module 对象，这个对象上会有一个 exports 对象</div><div class="line">	if ( typeof module === "object" &amp;&amp; typeof module.exports === "object" )</div><div class="line">	&#123;</div><div class="line">		// For CommonJS and CommonJS-like environments where a proper `window`</div><div class="line">		// is present, execute the factory and get jQuery.</div><div class="line">		// For environments that do not have a `window` with a `document`</div><div class="line">		// (such as Node.js), expose a factory as module.exports.</div><div class="line">		// This accentuates the need for the creation of a real `window`.</div><div class="line">		// e.g. var jQuery = require("jquery")(window);</div><div class="line">		// See ticket #14549 for more info.</div><div class="line"></div><div class="line">		//如果在 CommonJs 环境下，那么将 jQuery 对象挂载到 module.exports 对象</div><div class="line">		//factory函数的第二个参数传递为true,表示将不会在window上注册jQuery对象</div><div class="line"></div><div class="line">		//因为可能运行在非浏览器下，所有对global.document进行检查</div><div class="line">		//如果global.document有值，那么调用factory( global, true )得到结果赋值给module.exports</div><div class="line">		//如果global.document没有值(在非浏览器环境下)，我们没有window对象，那么就需要自己创建了一个模拟浏览器的环境</div><div class="line">		//传入自己的 window 对象，这种情况下 jQuery 对象将绑定到你传入的这个特殊的 window 对象上</div><div class="line">		module.exports = global.document ?</div><div class="line">			factory( global, true ) :</div><div class="line">			function( w ) &#123;</div><div class="line">				if ( !w.document ) &#123;</div><div class="line">					//如果没有document,那么就抛出错误信息</div><div class="line">					throw new Error( "jQuery requires a window with a document" );</div><div class="line">				&#125;</div><div class="line">				return factory( w );</div><div class="line">			&#125;;</div><div class="line">	&#125;</div><div class="line">	else</div><div class="line">	&#123;</div><div class="line">		//如果不是在 CommonJs 环境下，直接执行工厂函数</div><div class="line">        //调用函数的时候传递一个参数(window|this),第二个参数没有传值，默认为undefined</div><div class="line">		factory( global );</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	// Pass this if window is not defined yet</div><div class="line">    //实参说明：第一个参数(global)的值为window 或者 是当前上下文this,第二个参数为函数</div><div class="line">&#125; )( typeof window !== "undefined" ? window : this, function( window, noGlobal )</div><div class="line">&#123;</div><div class="line"></div><div class="line">// Edge &lt;= 12 - 13+, Firefox &lt;=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1</div><div class="line">// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode</div><div class="line">// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common</div><div class="line">// enough that all such attempts are guarded in a try block.</div><div class="line">//开启严格模式</div><div class="line">"use strict";</div><div class="line"></div><div class="line">//声明变量</div><div class="line">var arr = [];</div><div class="line"></div><div class="line">//获取document文件</div><div class="line">var document = window.document;</div><div class="line"></div><div class="line">//保存Object对象上获取原型对象的方法</div><div class="line">var getProto = Object.getPrototypeOf;</div><div class="line"></div><div class="line">//保存数组中截取元素的方法</div><div class="line">var slice = arr.slice;</div><div class="line"></div><div class="line">//保存数组中合并数组的方法</div><div class="line">var concat = arr.concat;</div><div class="line"></div><div class="line">//保存数组中添加元素的方法</div><div class="line">var push = arr.push;</div><div class="line"></div><div class="line">//保存数组中返回元素索引的方法</div><div class="line">var indexOf = arr.indexOf;</div><div class="line"></div><div class="line">//初始化空的对象</div><div class="line">var class2type = &#123;&#125;;</div><div class="line"></div><div class="line">//保存&#123;&#125;.toString方法,其实是Object.prototype.toString方法</div><div class="line">//该方法用于获取指定对象的类型和真实构造函数 ex: [object String]</div><div class="line">var toString = class2type.toString;</div><div class="line"></div><div class="line">//保存检查是否是实例成员的方法</div><div class="line">var hasOwn = class2type.hasOwnProperty;</div><div class="line"></div><div class="line">//保存 Object.prototype.hasOwnProperty.toString方法</div><div class="line">var fnToString = hasOwn.toString;</div><div class="line">//保存 Object.prototype.hasOwnProperty.toString.call(Object) 方法</div><div class="line">//	==&gt; "function Object() &#123; [native code] &#125;"</div><div class="line">var ObjectFunctionString = fnToString.call( Object );</div><div class="line"></div><div class="line">// 初始化空的对象</div><div class="line">var support = &#123;&#125;;</div><div class="line">// 工具函数：检查传入的对象是否是函数类型的</div><div class="line">var isFunction = function isFunction( obj ) &#123;</div><div class="line"></div><div class="line">      // Support: Chrome &lt;=57, Firefox &lt;=52</div><div class="line">	  //浏览器的支持情况</div><div class="line">      // In some browsers, typeof returns "function" for HTML <span class="tag">&lt;<span class="name">object</span>&gt;</span> elements</div><div class="line">	  // 在很多的浏览器中对HTML对象节点执行typeof会返回 function</div><div class="line">      // (i.e., `typeof document.createElement( "object" ) === "function"`).</div><div class="line">	  // 在ie中typeof document.createElement( "object" )的结果为function</div><div class="line">      // We don't want to classify *any* DOM node as a function.</div><div class="line">	  // 在检查函数的时候排除任何的DOM节点</div><div class="line">	  // 注：DOM节点均拥有nodeType属性，属性值为number类型，根据具体的数值不同来进行区分 1为元素节点 2为属性节点</div><div class="line"></div><div class="line">      return typeof obj === "function" &amp;&amp; typeof obj.nodeType !== "number";</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">//工具函数：检查传入的参数是否是window</div><div class="line">var isWindow = function isWindow( obj ) &#123;</div><div class="line">		//检查window的方式  window = window.window 即window对象本身拥有window属性来标名自己是window</div><div class="line">		//null不能拥有任何的属性，排除null</div><div class="line">		return obj != null &amp;&amp; obj === obj.window;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//保存script属性的字面量对象:类型|资源|noModule</div><div class="line">var preservedScriptAttributes = &#123;</div><div class="line">		type: true,</div><div class="line">		src: true,</div><div class="line">		noModule: true</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">// 该方法作为 $.globalEval();方法的内部实现,作用类似于js原生的eval方法</div><div class="line">// $.globalEval( "var a = 1;" );方法其实就是调用 DOMEval("var a = 1;");</div><div class="line">function DOMEval( code, doc, node ) &#123;</div><div class="line"></div><div class="line">	     //如果doc没有值,那么初始化为document</div><div class="line">		doc = doc || document;</div><div class="line"></div><div class="line">		//创建空的script标签</div><div class="line">		var i,</div><div class="line">			script = doc.createElement( "script" );</div><div class="line">		//设置script标签的文本内容</div><div class="line">		script.text = code;</div><div class="line">		if ( node ) &#123;</div><div class="line">			//循环preservedScriptAttributes对象</div><div class="line">			//把node节点中的type &amp;&amp; src &amp;&amp; noModule拷贝给script标签</div><div class="line">			for ( i in preservedScriptAttributes ) &#123;</div><div class="line">				if ( node[ i ] ) &#123;</div><div class="line">					script[ i ] = node[ i ];</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		//doc.head 表示访问页面中的header头部标签</div><div class="line">		//把先创建的script标签插入到页面然后删除掉</div><div class="line">		doc.head.appendChild( script ).parentNode.removeChild( script );</div><div class="line">	&#125;</div><div class="line"></div><div class="line">//	获取参数对应的数据类型</div><div class="line">function toType( obj ) &#123;</div><div class="line">	// 如果参数是null,那么就返回"null"</div><div class="line">	if ( obj == null ) &#123;</div><div class="line">		return obj + "";</div><div class="line">	&#125;</div><div class="line">	// Support: Android <span class="tag">&lt;<span class="name">=2.3</span> <span class="attr">only</span> (<span class="attr">functionish</span> <span class="attr">RegExp</span>)</span></div><div class="line"><span class="tag">	// 如果<span class="attr">typeof</span>的结果为<span class="attr">object</span> 或者是<span class="attr">function</span> 那么就通过<span class="attr">class2type</span>[ <span class="attr">toString.call</span>( <span class="attr">obj</span> ) ]方法计算</span></div><div class="line"><span class="tag">	// <span class="attr">class2type</span>[ <span class="attr">toString.call</span>( <span class="attr">obj</span> ) ] 其实就是<span class="attr">Object.prototype.toString.call</span>(<span class="attr">obj</span>) 形式</span></div><div class="line"><span class="tag">	// 如果<span class="attr">toString</span>方法计算的结果为<span class="attr">false</span>,那么就返回<span class="attr">object</span>,否则返回<span class="attr">typeof</span> <span class="attr">obj</span>的值</span></div><div class="line"><span class="tag">	<span class="attr">return</span> <span class="attr">typeof</span> <span class="attr">obj</span> === <span class="string">"object"</span> || <span class="attr">typeof</span> <span class="attr">obj</span> === <span class="string">"function"</span> ?</span></div><div class="line"><span class="tag">		<span class="attr">class2type</span>[ <span class="attr">toString.call</span>( <span class="attr">obj</span> ) ] || "<span class="attr">object</span>" <span class="attr">:</span></span></div><div class="line"><span class="tag">		<span class="attr">typeof</span> <span class="attr">obj</span>;</span></div><div class="line"><span class="tag">&#125;</span></div><div class="line"><span class="tag">/* <span class="attr">global</span> <span class="attr">Symbol</span> */</span></div><div class="line"><span class="tag">// <span class="attr">Defining</span> <span class="attr">this</span> <span class="attr">global</span> <span class="attr">in</span> <span class="attr">.eslintrc.json</span> <span class="attr">would</span> <span class="attr">create</span> <span class="attr">a</span> <span class="attr">danger</span> <span class="attr">of</span> <span class="attr">using</span> <span class="attr">the</span> <span class="attr">global</span></span></div><div class="line"><span class="tag">// <span class="attr">unguarded</span> <span class="attr">in</span> <span class="attr">another</span> <span class="attr">place</span>, <span class="attr">it</span> <span class="attr">seems</span> <span class="attr">safer</span> <span class="attr">to</span> <span class="attr">define</span> <span class="attr">global</span> <span class="attr">only</span> <span class="attr">for</span> <span class="attr">this</span> <span class="attr">module</span></span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag"><span class="attr">var</span></span></div><div class="line"><span class="tag">	// 当前版本</span></div><div class="line"><span class="tag">	<span class="attr">version</span> = <span class="string">"3.3.1"</span>,</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">	// <span class="attr">Define</span> <span class="attr">a</span> <span class="attr">local</span> <span class="attr">copy</span> <span class="attr">of</span> <span class="attr">jQuery</span> 定义<span class="attr">jQuery</span>的本地副本</span></div><div class="line"><span class="tag">	// <span class="attr">jQuery</span>工厂函数的定义(声明)</span></div><div class="line"><span class="tag">	// 参数<span class="attr">1</span> ： 选择器</span></div><div class="line"><span class="tag">	// 参数<span class="attr">2</span> <span class="attr">:</span>  上下文对象</span></div><div class="line"><span class="tag">	<span class="attr">jQuery</span> = <span class="string">function(</span> <span class="attr">selector</span>, <span class="attr">context</span> ) &#123;</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">		// <span class="attr">The</span> <span class="attr">jQuery</span> <span class="attr">object</span> <span class="attr">is</span> <span class="attr">actually</span> <span class="attr">just</span> <span class="attr">the</span> <span class="attr">init</span> <span class="attr">constructor</span> '<span class="attr">enhanced</span>'</span></div><div class="line"><span class="tag">		// <span class="attr">Need</span> <span class="attr">init</span> <span class="attr">if</span> <span class="attr">jQuery</span> <span class="attr">is</span> <span class="attr">called</span> (<span class="attr">just</span> <span class="attr">allow</span> <span class="attr">error</span> <span class="attr">to</span> <span class="attr">be</span> <span class="attr">thrown</span> <span class="attr">if</span> <span class="attr">not</span> <span class="attr">included</span>)</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">		// <span class="attr">jQuery.fn</span>,<span class="attr">init</span> 作为构造函数，这里返回的其实是<span class="attr">jQuery.fn.init</span>构造函数的实例化对象</span></div><div class="line"><span class="tag">		// 调用<span class="attr">jQuery</span>函数的时候其实是以构造函数的方式调用 <span class="attr">xxx...init</span>函数</span></div><div class="line"><span class="tag">		<span class="attr">return</span> <span class="attr">new</span> <span class="attr">jQuery.fn.init</span>( <span class="attr">selector</span>, <span class="attr">context</span> );</span></div><div class="line"><span class="tag">	&#125;,</span></div><div class="line"><span class="tag"></span></div><div class="line">	// Support: Android &lt;=4.0 only</div><div class="line">	// Make sure we trim BOM and NBSP</div><div class="line">	// 确保对BOM和NBSP的处理,清除字符串开始和结尾的一个或多个空格的正则表达式</div><div class="line">	rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;</div><div class="line"></div><div class="line">//设置jQuery的原型对象，并把原型对象赋值给jQuery.fn</div><div class="line">jQuery.fn = jQuery.prototype = &#123;</div><div class="line"></div><div class="line">	//这里列出了一部分jQuery原型成员（属性和方法）</div><div class="line">	//所有的jQuery实例对象都能够访问这些属性和方法</div><div class="line"></div><div class="line">	// The current version of jQuery being used</div><div class="line">	//当前正在使用的jQuery版本信息</div><div class="line">	jquery: version,</div><div class="line">	//构造器属性 ---&gt; jQuery</div><div class="line">	constructor: jQuery,</div><div class="line"></div><div class="line">	// The default length of a jQuery object is 0</div><div class="line">	//jQuery实例对象中数据的个数，默认长度为0</div><div class="line">	length: 0,</div><div class="line"></div><div class="line">	// 把jQuery实例对象转换为数组类型的方法</div><div class="line">	toArray: function() &#123;</div><div class="line">		//其实调用的是Array.prototype.slice.call(this) 方法 相当于this.slice()</div><div class="line">		//在数组的slice方法中，如果不接受参数则表示截取所有的元素保存到一个新的数组中返回</div><div class="line">		return slice.call( this );</div><div class="line">	&#125;,</div><div class="line"></div><div class="line">	// Get the Nth element in the matched element set OR</div><div class="line">	// Get the whole matched element set as a clean array</div><div class="line">	// 获取jQ对象中指定索引对应的数据(通常为DOM节点)</div><div class="line">	get: function( num ) &#123;</div><div class="line"></div><div class="line">		// Return all the elements in a clean array</div><div class="line">		//如果没有传递参数，那么等价于调用了toArray方法</div><div class="line">		//把当前jQ对象中所有的value值保存到数组中返回</div><div class="line">		if ( num == null ) &#123;</div><div class="line">			return slice.call( this );</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		// Return just the one element from the set</div><div class="line">		// 区分索引值的情况</div><div class="line">		// 如果索引值为负数那么 返回this[index + this.length]</div><div class="line">		// 如果索引值&gt; = 0     返回thus[index]</div><div class="line">		return num <span class="tag">&lt; <span class="attr">0</span> ? <span class="attr">this</span>[ <span class="attr">num</span> + <span class="attr">this.length</span> ] <span class="attr">:</span> <span class="attr">this</span>[ <span class="attr">num</span> ];</span></div><div class="line"><span class="tag">	&#125;,</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">	// <span class="attr">Take</span> <span class="attr">an</span> <span class="attr">array</span> <span class="attr">of</span> <span class="attr">elements</span> <span class="attr">and</span> <span class="attr">push</span> <span class="attr">it</span> <span class="attr">onto</span> <span class="attr">the</span> <span class="attr">stack</span></span></div><div class="line"><span class="tag">	// (<span class="attr">returning</span> <span class="attr">the</span> <span class="attr">new</span> <span class="attr">matched</span> <span class="attr">element</span> <span class="attr">set</span>)</span></div><div class="line"><span class="tag">	// 维护堆栈集合 把传入的数据包裹成一个新的<span class="attr">jQ</span>对象，然后更新<span class="attr">prevObject</span>的值为上一个(<span class="attr">this</span>)对象</span></div><div class="line"><span class="tag">	<span class="attr">pushStack:</span> <span class="attr">function</span>( <span class="attr">elems</span> ) &#123;</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">		// <span class="attr">Build</span> <span class="attr">a</span> <span class="attr">new</span> <span class="attr">jQuery</span> <span class="attr">matched</span> <span class="attr">element</span> <span class="attr">set</span></span></div><div class="line"><span class="tag">		// <span class="attr">merge</span>方法用于合并两个数组</span></div><div class="line"><span class="tag">		// <span class="attr">this.constructor</span>() 其实就是<span class="attr">this.jQuery</span>(); 得到的是一个空的<span class="attr">jQ</span>实例对象</span></div><div class="line"><span class="tag">		//</span></div><div class="line"><span class="tag">		<span class="attr">var</span> <span class="attr">ret</span> = <span class="string">jQuery.merge(</span> <span class="attr">this.constructor</span>(), <span class="attr">elems</span> );</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">		// <span class="attr">Add</span> <span class="attr">the</span> <span class="attr">old</span> <span class="attr">object</span> <span class="attr">onto</span> <span class="attr">the</span> <span class="attr">stack</span> (<span class="attr">as</span> <span class="attr">a</span> <span class="attr">reference</span>)</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">		//<span class="attr">prevObject</span>属性用于维护和记录前一个操作的<span class="attr">jQ</span>实例对象</span></div><div class="line"><span class="tag">		//把当前对象设置为<span class="attr">ret</span>的<span class="attr">prevObject</span>属性，并返回</span></div><div class="line"><span class="tag">		<span class="attr">ret.prevObject</span> = <span class="string">this;</span></span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">		// <span class="attr">Return</span> <span class="attr">the</span> <span class="attr">newly-formed</span> <span class="attr">element</span> <span class="attr">set</span></span></div><div class="line"><span class="tag">		<span class="attr">return</span> <span class="attr">ret</span>;</span></div><div class="line"><span class="tag">	&#125;,</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">	// <span class="attr">Execute</span> <span class="attr">a</span> <span class="attr">callback</span> <span class="attr">for</span> <span class="attr">every</span> <span class="attr">element</span> <span class="attr">in</span> <span class="attr">the</span> <span class="attr">matched</span> <span class="attr">set.</span></span></div><div class="line"><span class="tag">	//迭代<span class="attr">jQuery</span>实例对象的方法，该方法内部调用<span class="attr">jQuery.each</span>方法实现</span></div><div class="line"><span class="tag">	<span class="attr">each:</span> <span class="attr">function</span>( <span class="attr">callback</span> ) &#123;</span></div><div class="line"><span class="tag">		<span class="attr">return</span> <span class="attr">jQuery.each</span>( <span class="attr">this</span>, <span class="attr">callback</span> );</span></div><div class="line"><span class="tag">	&#125;,</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">	// 数组映射方法，对<span class="attr">jQuery.map</span>方法做了额外的包装</span></div><div class="line"><span class="tag">	<span class="attr">map:</span> <span class="attr">function</span>( <span class="attr">callback</span> ) &#123;</span></div><div class="line"><span class="tag">		<span class="attr">return</span> <span class="attr">this.pushStack</span>( <span class="attr">jQuery.map</span>( <span class="attr">this</span>, <span class="attr">function</span>( <span class="attr">elem</span>, <span class="attr">i</span> ) &#123;</span></div><div class="line"><span class="tag">			//使用当前的元素来调用<span class="attr">callback</span>方法,绑定<span class="attr">this</span></span></div><div class="line"><span class="tag">			<span class="attr">return</span> <span class="attr">callback.call</span>( <span class="attr">elem</span>, <span class="attr">i</span>, <span class="attr">elem</span> );</span></div><div class="line"><span class="tag">		&#125; ) );</span></div><div class="line"><span class="tag">	&#125;,</span></div><div class="line"><span class="tag">	// 截取对象中指定的键值对(元素)</span></div><div class="line"><span class="tag">	//因为<span class="attr">slice</span>方法调用后返回的是一个新的对象集合，所以需要调用<span class="attr">pushStack</span>方法维护<span class="attr">prevObject</span>堆栈</span></div><div class="line"><span class="tag">	<span class="attr">slice:</span> <span class="attr">function</span>() &#123;</span></div><div class="line"><span class="tag">		//核心实现：<span class="attr">this</span> =&gt;</span> Array.prototype.slice(arguments) || this =&gt; [].slice(arguments)</div><div class="line">		return this.pushStack( slice.apply( this, arguments ) );</div><div class="line">	&#125;,</div><div class="line"></div><div class="line">	//获取jQuery实例对象中的第一个元素(第一个键值对中的value值，其实就是第一个DOM标签)包裹为jQuery对象返回</div><div class="line">	//内部通过调用jQuery.eq方法实现，</div><div class="line">	first: function() &#123;</div><div class="line">		return this.eq( 0 );</div><div class="line">	&#125;,</div><div class="line">	//获取jQuery实例对象中的最后一个元素</div><div class="line">	//同first方法一致，eq方法传递-1表示倒着数，即倒数第一个(最后一个)元素</div><div class="line">	last: function() &#123;</div><div class="line">		return this.eq( -1 );</div><div class="line">	&#125;,</div><div class="line"></div><div class="line">	//获取jQuery实例对象中指定索引对应的元素，拿到元素后包装为jQuery实例对象返回</div><div class="line">	//该方法的参数支持正整数或者是负数</div><div class="line">	eq: function( i ) &#123;</div><div class="line">		var len = this.length,</div><div class="line">			j = +i + ( i <span class="tag">&lt; <span class="attr">0</span> ? <span class="attr">len</span> <span class="attr">:</span> <span class="attr">0</span> );</span></div><div class="line"><span class="tag">		<span class="attr">return</span> <span class="attr">this.pushStack</span>( <span class="attr">j</span> &gt;</span>= 0 &amp;&amp; j <span class="tag">&lt; <span class="attr">len</span> ? [ <span class="attr">this</span>[ <span class="attr">j</span> ] ] <span class="attr">:</span> [] );</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">		//自己写的另外一种实现方案(在判断的时候需要考虑到越界的问题)</span></div><div class="line"><span class="tag">		// <span class="attr">var</span> <span class="attr">len</span> = <span class="string">this.length;</span></span></div><div class="line"><span class="tag">		// <span class="attr">var</span> <span class="attr">arrM</span> = <span class="string">[];</span></span></div><div class="line"><span class="tag">		// <span class="attr">if</span> (<span class="attr">i</span> &gt;</span>= 0 &amp;&amp; i <span class="tag">&lt; <span class="attr">len</span>)</span></div><div class="line"><span class="tag">		// &#123;</span></div><div class="line"><span class="tag">		// 		<span class="attr">arrM.push</span>(<span class="attr">this</span>[<span class="attr">i</span>])</span></div><div class="line"><span class="tag">		// &#125;</span></div><div class="line">		// else if(i &lt; 0 &amp;&amp; (-i &lt; len) )</div><div class="line">		// &#123;</div><div class="line">		// 		arrM.push(this[i + len])</div><div class="line">		// &#125;</div><div class="line">		// return this.pushStack(arrM)</div><div class="line">	&#125;,</div><div class="line"></div><div class="line">	//返回前一个操作的jQuery实例对象</div><div class="line">	end: function() &#123;</div><div class="line">		//检查prevObject的属性值，如果优质那么就返回prevObject否则返回空的jQuery实例对象</div><div class="line">		return this.prevObject || this.constructor();</div><div class="line">	&#125;,</div><div class="line"></div><div class="line">	// For internal use only.</div><div class="line">	// 仅供内部使用的方法</div><div class="line">	// Behaves like an Array's method, not like a jQuery method.</div><div class="line">	// 这些方法的表现和数组一致，不完全像jQuery风格的方法</div><div class="line"></div><div class="line">	//往jQuery实例对象中添加数据</div><div class="line">	push: push,</div><div class="line">	//排序的方法</div><div class="line">	sort: arr.sort,</div><div class="line">	//添加|删除的方法，其实就是数组中的splice方法</div><div class="line">	splice: arr.splice</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//  jQuery中的插件处理机制</div><div class="line">//	给jQuery添加extend扩展方法，即jQuery.extend()</div><div class="line">//	给jQuery的原型对象添加extend扩展方法,即jQuery.prototype.extend()</div><div class="line">//	这两个的方法的作用简单来说就是把传入参数(对象类型)中所有的方法都添加到jQuery或者是jQuery原型对象上面</div><div class="line">//  这里给出一个简陋的实现版本,内部使用了this根据当前上下文的不同，指代的可能是jQuery或者是jQuery.prototype</div><div class="line">//     jQuery.extend = jQuery.fn.extend = function (objT) &#123;</div><div class="line">// 		for (var key in objT)</div><div class="line">// 		&#123;</div><div class="line">// 			if (Object.hasOwnProperty(key))</div><div class="line">// 			&#123;</div><div class="line">// 				this[key] = objT[key];</div><div class="line">// 			&#125;</div><div class="line">// 		&#125;</div><div class="line">//     &#125;;</div><div class="line"></div><div class="line">jQuery.extend = jQuery.fn.extend = function() &#123;</div><div class="line">	//声明一堆的变量length 为实参的个数</div><div class="line">	var options, name, src, copy, copyIsArray, clone,</div><div class="line">		target = arguments[ 0 ] || &#123;&#125;,</div><div class="line">		i = 1,</div><div class="line">		length = arguments.length,</div><div class="line">		deep = false;</div><div class="line"></div><div class="line">	// Handle a deep copy situation</div><div class="line">	if ( typeof target === "boolean" ) &#123;</div><div class="line">		deep = target;</div><div class="line"></div><div class="line">		// Skip the boolean and the target</div><div class="line">		target = arguments[ i ] || &#123;&#125;;</div><div class="line">		i++;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	// Handle case when target is a string or something (possible in deep copy)</div><div class="line">	if ( typeof target !== "object" &amp;&amp; !isFunction( target ) ) &#123;</div><div class="line">		target = &#123;&#125;;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	// Extend jQuery itself if only one argument is passed</div><div class="line">	if ( i === length ) &#123;</div><div class="line">		target = this;</div><div class="line">		i--;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	for ( ; i <span class="tag">&lt; <span class="attr">length</span>; <span class="attr">i</span>++ ) &#123;</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">		// <span class="attr">Only</span> <span class="attr">deal</span> <span class="attr">with</span> <span class="attr">non-null</span>/<span class="attr">undefined</span> <span class="attr">values</span></span></div><div class="line"><span class="tag">		<span class="attr">if</span> ( ( <span class="attr">options</span> = <span class="string">arguments[</span> <span class="attr">i</span> ] ) != <span class="string">null</span> ) &#123;</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">			// <span class="attr">Extend</span> <span class="attr">the</span> <span class="attr">base</span> <span class="attr">object</span></span></div><div class="line"><span class="tag">			<span class="attr">for</span> ( <span class="attr">name</span> <span class="attr">in</span> <span class="attr">options</span> ) &#123;</span></div><div class="line"><span class="tag">				<span class="attr">src</span> = <span class="string">target[</span> <span class="attr">name</span> ];</span></div><div class="line"><span class="tag">				<span class="attr">copy</span> = <span class="string">options[</span> <span class="attr">name</span> ];</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">				// <span class="attr">Prevent</span> <span class="attr">never-ending</span> <span class="attr">loop</span></span></div><div class="line"><span class="tag">				<span class="attr">if</span> ( <span class="attr">target</span> === <span class="string">copy</span> ) &#123;</span></div><div class="line"><span class="tag">					<span class="attr">continue</span>;</span></div><div class="line"><span class="tag">				&#125;</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">				// <span class="attr">Recurse</span> <span class="attr">if</span> <span class="attr">we</span>'<span class="attr">re</span> <span class="attr">merging</span> <span class="attr">plain</span> <span class="attr">objects</span> <span class="attr">or</span> <span class="attr">arrays</span></span></div><div class="line"><span class="tag">				<span class="attr">if</span> ( <span class="attr">deep</span> &amp;&amp; <span class="attr">copy</span> &amp;&amp; ( <span class="attr">jQuery.isPlainObject</span>( <span class="attr">copy</span> ) ||</span></div><div class="line"><span class="tag">					( <span class="attr">copyIsArray</span> = <span class="string">Array.isArray(</span> <span class="attr">copy</span> ) ) ) ) &#123;</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">					<span class="attr">if</span> ( <span class="attr">copyIsArray</span> ) &#123;</span></div><div class="line"><span class="tag">						<span class="attr">copyIsArray</span> = <span class="string">false;</span></span></div><div class="line"><span class="tag">						<span class="attr">clone</span> = <span class="string">src</span> &amp;&amp; <span class="attr">Array.isArray</span>( <span class="attr">src</span> ) ? <span class="attr">src</span> <span class="attr">:</span> [];</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">					&#125; <span class="attr">else</span> &#123;</span></div><div class="line"><span class="tag">						<span class="attr">clone</span> = <span class="string">src</span> &amp;&amp; <span class="attr">jQuery.isPlainObject</span>( <span class="attr">src</span> ) ? <span class="attr">src</span> <span class="attr">:</span> &#123;&#125;;</span></div><div class="line"><span class="tag">					&#125;</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">					// <span class="attr">Never</span> <span class="attr">move</span> <span class="attr">original</span> <span class="attr">objects</span>, <span class="attr">clone</span> <span class="attr">them</span></span></div><div class="line"><span class="tag">					<span class="attr">target</span>[ <span class="attr">name</span> ] = <span class="string">jQuery.extend(</span> <span class="attr">deep</span>, <span class="attr">clone</span>, <span class="attr">copy</span> );</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">				// <span class="attr">Don</span>'<span class="attr">t</span> <span class="attr">bring</span> <span class="attr">in</span> <span class="attr">undefined</span> <span class="attr">values</span></span></div><div class="line"><span class="tag">				&#125; <span class="attr">else</span> <span class="attr">if</span> ( <span class="attr">copy</span> !== <span class="string">undefined</span> ) &#123;</span></div><div class="line"><span class="tag">					<span class="attr">target</span>[ <span class="attr">name</span> ] = <span class="string">copy;</span></span></div><div class="line"><span class="tag">				&#125;</span></div><div class="line"><span class="tag">			&#125;</span></div><div class="line"><span class="tag">		&#125;</span></div><div class="line"><span class="tag">	&#125;</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">	// <span class="attr">Return</span> <span class="attr">the</span> <span class="attr">modified</span> <span class="attr">object</span></span></div><div class="line"><span class="tag">	<span class="attr">return</span> <span class="attr">target</span>;</span></div><div class="line"><span class="tag">&#125;;</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">//为<span class="attr">jQuery</span>添加一堆工具方法,对象参数中所有的成员都将直接添加在<span class="attr">jQuery</span>函数身上成为<span class="attr">jQuery</span>的静态方法</span></div><div class="line"><span class="tag"><span class="attr">jQuery.extend</span>( &#123;</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">	// <span class="attr">Unique</span> <span class="attr">for</span> <span class="attr">each</span> <span class="attr">copy</span> <span class="attr">of</span> <span class="attr">jQuery</span> <span class="attr">on</span> <span class="attr">the</span> <span class="attr">page</span></span></div><div class="line"><span class="tag">	// 简单测试下得到的结果是：<span class="attr">jQuery33104605303773584173</span></span></div><div class="line"><span class="tag">	// 确保页面中的<span class="attr">jQuery</span>副本是唯一的，（<span class="attr">jQuery</span> + 版本号 + 随机数） =&gt;</span> 格式处理</div><div class="line">	expando: "jQuery" + ( version + Math.random() ).replace( /\D/g, "" ),</div><div class="line"></div><div class="line">	// Assume jQuery is ready without the ready module</div><div class="line">	// 是否已经准备就绪</div><div class="line">	isReady: true,</div><div class="line">	//错误处理方法：根据传入的消息创建一个错误对象并抛出异常</div><div class="line">	error: function( msg ) &#123;</div><div class="line">		throw new Error( msg );</div><div class="line">	&#125;,</div><div class="line">	//空函数</div><div class="line">	noop: function() &#123;&#125;,</div><div class="line"></div><div class="line">	//用于判断指定参数是否是一个纯粹的对象</div><div class="line">	//所谓"纯粹的对象"，就是该对象是通过"&#123;&#125;"或"new Object"创建的 .排除了数组、自定义构造函数创建的对象以及函数等类型</div><div class="line">	isPlainObject: function( obj ) &#123;</div><div class="line">		var proto, Ctor;</div><div class="line"></div><div class="line">		// Detect obvious negatives</div><div class="line">		// Use toString instead of jQuery.type to catch host objects</div><div class="line"></div><div class="line">		//如果参数为null | undefined 或者在调用Object.prototype.toString.call(参数)的时候得到的结果不是[object Object]则直接返回false</div><div class="line">		if ( !obj || toString.call( obj ) !== "[object Object]" ) &#123;</div><div class="line">			return false;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		//获取当前对象的原型对象，其实是调用了Object.getPrototypeOf(参数) 方法</div><div class="line">		proto = getProto( obj );</div><div class="line"></div><div class="line">		// Objects with no prototype (e.g., `Object.create( null )`) are plain</div><div class="line">		//监测 没有原型对象的最纯净的对象 例如使用Object.create( null )创建的对象</div><div class="line"></div><div class="line">		if ( !proto ) &#123;</div><div class="line">			return true;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		// Objects with prototype are plain iff they were constructed by a global Object function</div><div class="line">		//如果原型对象上拥有constructor属性(前一句的结果为true) 那么就返回proto.constructor的值</div><div class="line">		//如果原型对象是Object.prototype 那么Object.prototype.constructor ==&gt; ƒ Object() &#123; [native code] &#125;</div><div class="line">		Ctor = hasOwn.call( proto, "constructor" ) &amp;&amp; proto.constructor;</div><div class="line"></div><div class="line">		//检查Ctor是否是函数 且函数字符串是否全等于function Object() &#123; [native code] &#125;</div><div class="line">		return typeof Ctor === "function" &amp;&amp; fnToString.call( Ctor ) === ObjectFunctionString;</div><div class="line">	&#125;,</div><div class="line"></div><div class="line">	//用于判断指定参数是否是一个空对象</div><div class="line">	//所谓"空对象"，即不包括任何可枚举(自定义)的属性。简而言之，就是该对象没有属性可以通过for...in迭代。</div><div class="line">	isEmptyObject: function( obj ) &#123;</div><div class="line"></div><div class="line">		/* eslint-disable no-unused-vars */</div><div class="line">		// See https://github.com/eslint/eslint/issues/6125</div><div class="line">		var name;</div><div class="line"></div><div class="line">		for ( name in obj ) &#123;</div><div class="line">			return false;</div><div class="line">		&#125;</div><div class="line">		return true;</div><div class="line">	&#125;,</div><div class="line"></div><div class="line">	// Evaluates a script in a global context</div><div class="line">	//用于全局性地执行一段JavaScript代码,内部调用DOMEval方法实现</div><div class="line">	//其作用与常规的JavaScript eval()函数相似。区别自傲与jQuery.globalEval()执行代码的作用域为全局作用域。</div><div class="line">    //使用示例：$.globalEval( "var a =1" ); 该行代码将在全局作用域中定义变量a</div><div class="line">	globalEval: function( code ) &#123;</div><div class="line">		DOMEval( code );</div><div class="line">	&#125;,</div><div class="line"></div><div class="line">	//常用的迭代方法，可以用来遍历数组|对象|jQ实例对象(伪数组)</div><div class="line">	//该方法同$("xxx").each() 方法保持一致</div><div class="line">	//第一个参数：要遍历的对象| 数组 | jQ实例对象</div><div class="line">	each: function( obj, callback ) &#123;</div><div class="line">		var length, i = 0;</div><div class="line"></div><div class="line">		//如果参数是伪数组那么使用普通的for循环来进行遍历</div><div class="line">		if ( isArrayLike( obj ) ) &#123;</div><div class="line">			length = obj.length;</div><div class="line">			for ( ; i <span class="tag">&lt; <span class="attr">length</span>; <span class="attr">i</span>++ ) &#123;</span></div><div class="line"><span class="tag">				//调用回到函数，把当前的<span class="attr">value</span>值绑定给函数的<span class="attr">this</span> [<span class="attr">each</span>方法的回调函数中<span class="attr">this--</span>&gt;</span> value值]</div><div class="line">				//把当前循环的key和value值(这里是i和obj[i])作为参数传递给callback回调函数</div><div class="line">				//检查回调函数的返回值，如果返回的是false，那么就退出循环</div><div class="line">				if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) &#123;</div><div class="line">					break;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125; else &#123;</div><div class="line">			//如果是普通的对象那么使用for..in循环来进行遍历</div><div class="line">			for ( i in obj ) &#123;</div><div class="line">				//同上面的代码保持一致</div><div class="line">				if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) &#123;</div><div class="line">					break;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		//把遍历的对象返回,链式编程的代码风格</div><div class="line">		return obj;</div><div class="line">	&#125;,</div><div class="line"></div><div class="line">	// Support: Android <span class="tag">&lt;<span class="name">=4.0</span> <span class="attr">only</span></span></div><div class="line"><span class="tag">	// 工具方法，用于清空字符串前面或者是后面的<span class="attr">N</span>个空格</span></div><div class="line"><span class="tag">	// 在<span class="attr">ES5</span>中<span class="attr">js</span>提供了原生的<span class="attr">trim</span>方法来清除字符串前后的<span class="attr">1</span>个或多个空格</span></div><div class="line"><span class="tag">	// 这里主要是通过正则表达式去进行匹配，把匹配到的内容替换为空字符串""</span></div><div class="line"><span class="tag">	<span class="attr">trim:</span> <span class="attr">function</span>( <span class="attr">text</span> ) &#123;</span></div><div class="line"><span class="tag">		<span class="attr">return</span> <span class="attr">text</span> == <span class="string">null</span> ?</span></div><div class="line"><span class="tag">			"" <span class="attr">:</span></span></div><div class="line"><span class="tag">			( <span class="attr">text</span> + "" )<span class="attr">.replace</span>( <span class="attr">rtrim</span>, "" );</span></div><div class="line"><span class="tag">	&#125;,</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">	// <span class="attr">results</span> <span class="attr">is</span> <span class="attr">for</span> <span class="attr">internal</span> <span class="attr">usage</span> <span class="attr">only</span></span></div><div class="line"><span class="tag">	// 结果仅共内部使用</span></div><div class="line"><span class="tag">	// 该函数用于将一个类数组对象(伪数组)转换为真正的数组对象</span></div><div class="line"><span class="tag">	// 所谓"类数组对象"就是一个常规的<span class="attr">Object</span>对象，但它和数组对象非常相似：具备<span class="attr">length</span>属性，并以<span class="attr">0</span>、<span class="attr">1</span>、<span class="attr">2</span>、<span class="attr">3</span>……等数字作为属性名。</span></div><div class="line"><span class="tag">	<span class="attr">makeArray:</span> <span class="attr">function</span>( <span class="attr">arr</span>, <span class="attr">results</span> ) &#123;</span></div><div class="line"><span class="tag">		// 初始化<span class="attr">ret</span>为空数组</span></div><div class="line"><span class="tag">		<span class="attr">var</span> <span class="attr">ret</span> = <span class="string">results</span> || [];</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">		<span class="attr">if</span> ( <span class="attr">arr</span> != <span class="string">null</span> ) &#123;</span></div><div class="line"><span class="tag">			//检查传入的参数是否是伪数组</span></div><div class="line"><span class="tag">			<span class="attr">if</span> ( <span class="attr">isArrayLike</span>( <span class="attr">Object</span>( <span class="attr">arr</span> ) ) ) &#123;</span></div><div class="line"><span class="tag">				//如果是伪数组，那么合并<span class="attr">ret</span>和<span class="attr">arr</span> 并返回</span></div><div class="line"><span class="tag">				//如果<span class="attr">arr</span>是字符串那么<span class="attr">jQuery.merge</span>(<span class="attr">ret</span>,[<span class="attr">arr</span>]) ，否则<span class="attr">jQuery.merge</span>(<span class="attr">ret</span>,<span class="attr">arr</span>)</span></div><div class="line"><span class="tag">				<span class="attr">jQuery.merge</span>( <span class="attr">ret</span>,</span></div><div class="line"><span class="tag">					<span class="attr">typeof</span> <span class="attr">arr</span> === <span class="string">"string"</span> ?</span></div><div class="line"><span class="tag">					[ <span class="attr">arr</span> ] <span class="attr">:</span> <span class="attr">arr</span></span></div><div class="line"><span class="tag">				);</span></div><div class="line"><span class="tag">			&#125; <span class="attr">else</span> &#123;</span></div><div class="line"><span class="tag">				//如果参数不是伪数组，那么直接把<span class="attr">arr</span>中的每个数据都添加到新的数组中</span></div><div class="line"><span class="tag">				//<span class="attr">push.call</span>( <span class="attr">ret</span>, <span class="attr">arr</span> ) 就是是 []<span class="attr">.push.call</span>(<span class="attr">ret</span>,<span class="attr">arr</span>) =&gt;</span> [].push(arr)</div><div class="line">				push.call( ret, arr );</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		//返回处理完的数组对象</div><div class="line">		return ret;</div><div class="line">	&#125;,</div><div class="line"></div><div class="line">	// 该方法用于在数组中搜索指定的值，并返回其索引值。如果数组中不存在该值，则返回 -1。</div><div class="line">	// 第一个参数 用于查找的值</div><div class="line">	// 第二个参数 指定被查找的数组</div><div class="line">	// 第三个参数 指定从数组的指定索引位置开始查找，默认为 0</div><div class="line">    // 如果数组中存在多个相同的值，则以查找到的第一个值的索引为准</div><div class="line">	// 使用示例：$.inArray("文顶顶",["demoA","demoB","wendingding.com","文顶顶","demoC","end"],4)</div><div class="line">	// 上面的代码表示从数组中索引为4的位置开始查找"文顶顶"这个元素项，返回的结果为-1，最后一个参数不传递则返回3</div><div class="line">	inArray: function( elem, arr, i ) &#123;</div><div class="line">		//如果参数是null或undefined那么直接返回-1</div><div class="line">		//否则通过调用indexOf方法实现 indexOf.call( arr, elem, i ) =&gt; arr.indexOf(elem,i)</div><div class="line">		return arr == null ? -1 : indexOf.call( arr, elem, i );</div><div class="line">	&#125;,</div><div class="line"></div><div class="line">	// Support: Android <span class="tag">&lt;<span class="name">=4.0</span> <span class="attr">only</span>, <span class="attr">PhantomJS</span> <span class="attr">1</span> <span class="attr">only</span></span></div><div class="line"><span class="tag">	// <span class="attr">push.apply</span>(<span class="attr">_</span>, <span class="attr">arraylike</span>) <span class="attr">throws</span> <span class="attr">on</span> <span class="attr">ancient</span> <span class="attr">WebKit</span></span></div><div class="line"><span class="tag">	//该方法用于合并两个数组</span></div><div class="line"><span class="tag">	<span class="attr">merge:</span> <span class="attr">function</span>( <span class="attr">first</span>, <span class="attr">second</span> ) &#123;</span></div><div class="line"><span class="tag">		<span class="attr">var</span> <span class="attr">len</span> = <span class="string">+second.length,</span></span></div><div class="line"><span class="tag">			<span class="attr">j</span> = <span class="string">0,</span></span></div><div class="line"><span class="tag">			<span class="attr">i</span> = <span class="string">first.length;</span></span></div><div class="line"><span class="tag"></span></div><div class="line">		for ( ; j &lt; len; j++ ) &#123;</div><div class="line">			//通过普通的for循环来遍历第二个数组</div><div class="line">			//把第二个数组的元素依次追加在第一个数组的后面</div><div class="line">			first[ i++ ] = second[ j ];</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		//更新数组的长度值</div><div class="line">		first.length = i;</div><div class="line"></div><div class="line">		return first;</div><div class="line">	&#125;,</div><div class="line"></div><div class="line">	// 过滤函数用于过滤数组</div><div class="line">	// 参数1 待过滤的数组</div><div class="line">	// 参数2 过滤数组的具体函数</div><div class="line">	// 参数3 布尔类型的值</div><div class="line">	// 		为true则函数返回数组中由过滤函数返回 true 的元素</div><div class="line">	//      为false则函数返回数组中由过滤函数返回false的元素</div><div class="line">	grep: function( elems, callback, invert ) &#123;</div><div class="line"></div><div class="line">		//初始化一堆的变量</div><div class="line">		var callbackInverse,</div><div class="line">			matches = [],   //空数组</div><div class="line">			i = 0,			//索引值为0</div><div class="line">			length = elems.length,	//待过滤数组的长度</div><div class="line">			callbackExpect = !invert;</div><div class="line"></div><div class="line">		// Go through the array, only saving the items</div><div class="line">		// that pass the validator function</div><div class="line">		for ( ; i <span class="tag">&lt; <span class="attr">length</span>; <span class="attr">i</span>++ ) &#123;</span></div><div class="line"><span class="tag">			//每循环一次就把当前的元素和对应的索引传递给回调函数，并保存回调函数的返回值取反</span></div><div class="line"><span class="tag">			<span class="attr">callbackInverse</span> = <span class="string">!callback(</span> <span class="attr">elems</span>[ <span class="attr">i</span> ], <span class="attr">i</span> );</span></div><div class="line"><span class="tag">			<span class="attr">if</span> ( <span class="attr">callbackInverse</span> !== <span class="string">callbackExpect</span> ) &#123;</span></div><div class="line"><span class="tag">				//把过滤后的元素收集保存到新的数组中</span></div><div class="line"><span class="tag">				<span class="attr">matches.push</span>( <span class="attr">elems</span>[ <span class="attr">i</span> ] );</span></div><div class="line"><span class="tag">			&#125;</span></div><div class="line"><span class="tag">		&#125;</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">		//返回过滤后得到的数据，是一个新的数组</span></div><div class="line"><span class="tag">		<span class="attr">return</span> <span class="attr">matches</span>;</span></div><div class="line"><span class="tag">	&#125;,</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">	// <span class="attr">arg</span> <span class="attr">is</span> <span class="attr">for</span> <span class="attr">internal</span> <span class="attr">usage</span> <span class="attr">only</span></span></div><div class="line"><span class="tag">	// <span class="attr">arg</span>仅用于内部使用的情况</span></div><div class="line"><span class="tag">	// 数组映射方法( 将一个数组中的元素转换到另一个数组中 )</span></div><div class="line"><span class="tag">	// 参数<span class="attr">1</span> ：待处理的数组</span></div><div class="line"><span class="tag">	// 参数<span class="attr">2</span> <span class="attr">:</span> 具体的处理函数</span></div><div class="line"><span class="tag">	// 参数<span class="attr">3</span> <span class="attr">:</span> <span class="attr">arg</span></span></div><div class="line"><span class="tag">	<span class="attr">map:</span> <span class="attr">function</span>( <span class="attr">elems</span>, <span class="attr">callback</span>, <span class="attr">arg</span> ) &#123;</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">		//初始化一堆的变量</span></div><div class="line"><span class="tag">		<span class="attr">var</span> <span class="attr">length</span>, <span class="attr">value</span>,</span></div><div class="line"><span class="tag">			<span class="attr">i</span> = <span class="string">0,</span>			//索引值为<span class="attr">0</span></span></div><div class="line"><span class="tag">			<span class="attr">ret</span> = <span class="string">[];</span>		//<span class="attr">ret</span>为空的数组</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">		// <span class="attr">Go</span> <span class="attr">through</span> <span class="attr">the</span> <span class="attr">array</span>, <span class="attr">translating</span> <span class="attr">each</span> <span class="attr">of</span> <span class="attr">the</span> <span class="attr">items</span> <span class="attr">to</span> <span class="attr">their</span> <span class="attr">new</span> <span class="attr">values</span></span></div><div class="line"><span class="tag">		// 遍历数组把数组中的每一项都转换为一个新的值</span></div><div class="line"><span class="tag"></span></div><div class="line"><span class="tag">		//检查是否是伪数组</span></div><div class="line"><span class="tag">		<span class="attr">if</span> ( <span class="attr">isArrayLike</span>( <span class="attr">elems</span> ) ) &#123;</span></div><div class="line"><span class="tag">			<span class="attr">length</span> = <span class="string">elems.length;</span>		//获取待处理的伪数组的长度</span></div><div class="line">			for ( ; i &lt; length; i++ ) &#123;</div><div class="line">				//循环，每循环一次就调用处理函数并把当前的key和value值作为参数传递进去</div><div class="line">				//收集回调函数的返回值</div><div class="line">				value = callback( elems[ i ], i, arg );</div><div class="line"></div><div class="line">				//如果回调函数的范返回值不为空，那么就把该返回值添加到数组中并最终返回</div><div class="line">				if ( value != null ) &#123;</div><div class="line">					ret.push( value );</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line"></div><div class="line">		// Go through every key on the object,</div><div class="line">		//	如果是普通的对象，那么就使用for...in循环来进行遍历</div><div class="line">		&#125; else &#123;</div><div class="line">			for ( i in elems ) &#123;</div><div class="line">				value = callback( elems[ i ], i, arg );</div><div class="line"></div><div class="line">				if ( value != null ) &#123;</div><div class="line">					ret.push( value );</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		// Flatten any nested arrays</div><div class="line">		// 等价于 [].concat(ret) 问题：为什么不直接范湖ret数组呢？</div><div class="line">		return concat.apply( [], ret );  </div><div class="line">	&#125;,</div><div class="line"></div><div class="line">	// A global GUID counter for objects</div><div class="line">	// 全局的GUID计数器</div><div class="line">	guid: 1,</div><div class="line"></div><div class="line">	// jQuery.support is not used in Core but other projects attach their</div><div class="line">	// properties to it so it needs to exist.</div><div class="line">    // 就是个空对象 &#123;&#125; 不在核心中使用，但其他项目将它们的属性附加到它，因此它需要存在。</div><div class="line">	support: support</div><div class="line">&#125; );</div><div class="line"></div><div class="line">//......</div><div class="line">// 设置jQuery.prototype.init方法</div><div class="line">init = jQuery.fn.init = function( selector, context, root ) &#123;</div><div class="line">    //...</div><div class="line">&#125;;</div><div class="line"></div><div class="line">// Give the init function the jQuery prototype for later instantiation</div><div class="line">/  让jQuery.prototype.init方法的原型对象指向jQuery原型对象</div><div class="line">// (正因如此$("xx")得到的jQ实例对象才能访问jQuery原型对象上面的方法)</div><div class="line">init.prototype = jQuery.fn;</div><div class="line">//.....</div><div class="line"></div><div class="line">window.jQuery = window.$ = jQuery;</div><div class="line">&#125; );</div></pre></td></tr></table></figure>
<p>上面的代码简化后的整体结构如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">//01 立即调用函数(闭包)</div><div class="line">(function (window) &#123;</div><div class="line"></div><div class="line">    //02 提供工厂函数</div><div class="line">    var jQuery = function (selector) &#123;</div><div class="line">        return new jQuery.fn.init(selector);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //03 设置原型对象</div><div class="line">    jQuery.prototype = &#123;</div><div class="line">        constructor:jQuery,</div><div class="line">        init:function (selector) &#123;</div><div class="line">            //初始化处理...</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //动态的添加fn属性</div><div class="line">    jQuery.fn = jQuery.prototype;</div><div class="line">    </div><div class="line">    //04 原型对象赋值</div><div class="line">    jQuery.fn.init.prototype = jQuery.fn;</div><div class="line"></div><div class="line">    //........</div><div class="line">    </div><div class="line">    //05 把jQuery和$暴露出来</div><div class="line">    window.$ = window.jQuery = jQuery;</div><div class="line"></div><div class="line">&#125;)(window);</div></pre></td></tr></table></figure></p>
<hr>
<ul>
<li>获取更多、更专业的IT技能，请猛戳~<a href="http://www.520it.com/" target="_blank" rel="external">小码哥教育</a>︎</li>
<li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="external">文顶顶</a> ~ <a href="http://wendingding.com" target="_blank" rel="external">文顶顶的个人博客_花田半亩</a></li>
<li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="external">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li>
<li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="external">文顶顶</a><br><img src="https://github.com/flowerField/Source/blob/master/Blog/banner.jpg?raw=true" onclick="window.open('http://www.520it.com/zt/t30/');"></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2018/08/24/jQuery系列 [09]-jQuery框架源码解读[开始]/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2018 <a href="https://weibo.com/u/3800117445">文顶顶</a> &nbsp;☁ 全站字数统计170.5k(字)</p><!--p © #{year} #[a(href=config.url)!= config.author], powered by #[a(href=hexoURL, target="_blank") Hexo] and #[a(href=apolloURL, target="_blank") hexo-theme-apollo].--></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>