<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>  · 花田半亩</title><meta name="description" content=" - 文顶顶"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.jpeg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://weibo.com/u/3800117445/atom.xml" title="花田半亩"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/白菜.jpeg" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">文顶顶的BLOG</a></li><li class="nav-list-item"><a href="https://www.cnblogs.com/wendingding/" target="_blank" class="nav-list-link">博客园</a></li><li class="nav-list-item"><a href="https://github.com/flowerField" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="http://blog.sina.com.cn/u/1910914290" target="_blank" class="nav-list-link">花田半亩</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title"></h1><div class="post-info">Apr 20, 2018</div><div class="post-content"><hr>
<p>title: 网络编程系列 前端开发Ajax简单介绍<br>date: 2018-01-26 17:05:13<br>tags:</p>
<pre><code>- 前端开发技术
- 网络编程
</code></pre><p>categories: 前端开发技术</p>
<p><style><br>    .column{width:7px;height:100%;background:#ccc;display:inline-block;margin:0 1px;}<br>    .column:hover{background:#f30;}<br>    .focus{background:#195;}<br></style></p>
<p><button onclick="playSortAnimate()"><br>    选择排序<br></button></p>
<p></p><p> 动画速度：<br>    <input value="170" max="200" min="1" id="speed" type="range" onchange="srotanimte && srotanimte.changeSpeed(200-this.value)"><br></p><p></p>
<p><div><br>    <div class="sort-animate-box" id="sortAnimateBox" style="height:100px;"></div><br>    <div id="sortText"></div><br></div></p>
<script>

    function selectionSort(array){
        var len = array.length;
        var index = 0;
        var k;
        var item;
        var c;
        for(var i=0; i<len; i++){

            item = array[i];
            index = i;
            //寻找最小的数位置
            for(j=i+1; j<len;j++){
                if(array[j] < item){
                    index = j;
                    item = array[j];
                }
            }
            if(index != i){
                c = array[i];
                array[i] = array[index];
                array[index] = c;
            }
        }
        return array;
    }
    function selectionSortAnimate(array, srotanimte){

        var len = array.length;
        var index = 0;
        var k;
        var item;
        var c;
        for(var i=0; i<len; i++){

            item = array[i];
            index = i;

            srotanimte.activeOne(i);
            //寻找最小的数位置
            for(j=i+1; j<len;j++){
                srotanimte.activeOne(j);
                if(array[j] < item){
                    srotanimte.blurOne(index);
                    srotanimte.activeOne(j);
                    index = j;
                    item = array[j];
                }
                srotanimte.blurOne(j);
            }
            srotanimte.blurOne(i);
            if(index != i){
                srotanimte.blurOne(index);
                srotanimte.exchange(i, index);
                c = array[i];
                array[i] = array[index];
                array[index] = c;
            }
        }

        return array;

    }

    function playSortAnimate( key ){
        var arr = [3,1,2,6,8,4];
        srotanimte = new SortAnimate( arr, document.getElementById("sortAnimateBox") );
        document.getElementById("sortText").innerHTML = "XX选择排序";
        selectionSortAnimate(arr, srotanimte);
        srotanimte.play(getSpeed());
    }

    function getSpeed(){
        return 200-document.getElementById('speed').value;
        // return 100;
    }

    //......

    function SortAnimate( array, wrapper ){
        this.array = array.slice();
        this.max = Math.max.apply(Math, array);
        this.ui = {columns:[], wrapper:wrapper || document.body};
        this.index = -1;
        this.animte = [];
        this.html = "";
        this.init();
    };
    SortAnimate.prototype = {
        init:function(){
            var html = "";
            for(var i=0; i<this.array.length; i++){
                html += this.getColumn(this.array[i], this.array[i]);
            }
            this.html = html;

            console.log(this.html);
            console.log(this.ui.wrapper);
            this.ui.wrapper.innerHTML = this.html;
            this.ui.columns = this.ui.wrapper.getElementsByClassName("column");

        },
        getHeight:function( number ){
            return parseInt(number/this.max*100);
        },
        getColumn:function( number){
            return '<div class="column" style="height:'+this.getHeight(number)+'%" title="'+ number +'" ></div>';
        },
        //交换两个数的位置
        uiExchange:function( index1, index2 ){
            var tmp = this.array[index1];
            this.array[index1] = this.array[index2];
            this.array[index2] = tmp;

            this.uiSetHeight(index1);
            this.uiSetHeight(index2);
        },
        uiSetHeight:function( index ){
            var number = this.array[index];
            this.ui.columns[index].style.height = this.getHeight( number )+"%";
            this.ui.columns[index].title = number;
        },
        uiHighlightOne:function(index1, index2){
            this.ui.columns[index1].className += " highlight";
            this.ui.columns[index2].className += " highlight";
        },
        uiUnHighlightOne:function(index1, index2){
            this.ui.columns[index1].className = this.ui.columns[index1].className.replace(" highlight", "");
            this.ui.columns[index2].className = this.ui.columns[index2].className.replace(" highlight", "");
        },
        //激活第 index 个元素
        uiActiveOne:function( index ){
            this.ui.columns[index].className += " focus";
        },
        //取消激活 index 个元素
        uiBlurOne:function( index ){
            this.ui.columns[index].className = this.ui.columns[index].className.replace(" focus", "");
        },
        //激活数组中一个片段
        uiActiveFragment:function(startIndex, endIndex){
            //console.log("uiActiveFragment", startIndex, endIndex);
            this.startIndex = startIndex;
            this.endIndex = endIndex;
            for(var i= startIndex; i<endIndex; i++){
                this.ui.columns[i].className += " active";
            }
        },
        //取消激活数组中一个片段
        uiBlurFragment:function(startIndex, endIndex){

            startIndex = startIndex || this.startIndex;
            endIndex = endIndex || this.endIndex;

            for(var i= startIndex; i<endIndex; i++){
                this.ui.columns[i].className = this.ui.columns[i].className.replace(" active","");
            }
        },
        activeOne:function( index ){
            this.animte.push({
                type:"uiActiveOne",
                data:[index]
            });
        },
        blurOne:function( index ){
            this.animte.push({
                type:"uiBlurOne",
                data:[index]
            });
        },
        exchange:function(index1, index2){
            this.highlight(index1, index2);
            this.unHighlight(index1, index2);

            this.animte.push({
                type:"uiExchange",
                data:[index1, index2]
            });
        },
        activeFragment:function(startIndex, endIndex){
            startIndex = startIndex < 0 ? 0 : startIndex;
            this.animte.push({
                type:"uiActiveFragment",
                data:[startIndex, endIndex]
            });
        },
        blurFragment:function(startIndex, endIndex){
            startIndex = startIndex < 0 ? 0 : startIndex;
            this.animte.push({
                type:"uiBlurFragment",
                data:[startIndex, endIndex]
            });
        },
        highlight:function( index1, index2 ){
            this.animte.push({
                type:"uiHighlightOne",
                data:[index1, index2]
            });
        },
        unHighlight:function(index1, index2){
            this.animte.push({
                type:"uiUnHighlightOne",
                data:[index1, index2]
            });
        },
        changeSpeed:function( speed ){
            this.speed = speed;
            this.play();
        },
        /**
         play 播放排序动画
         id 容器id
         speed 速度单位毫秒
         */
        play:function( speed ){

            clearInterval( SortAnimate.interid );
            this.speed = speed || this.speed;
            var animate = this.animte;
            var len = animate.length;
            var self = this;
            SortAnimate.interid = setInterval(function(){
                self.index++
                if(self.index<len){
                    self[animate[self.index].type].apply( self, animate[self.index].data);
                }else{
                    clearInterval( SortAnimate.interid );
                }
            }, this.speed);
        }
    };
</script>

</div></article></div></main><footer><div class="paginator"><a href="/2018/04/16/javaScript系列 [05]-javaScript和JSON/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2018 <a href="https://weibo.com/u/3800117445">文顶顶</a></p><!--p © #{year} #[a(href=config.url)!= config.author], powered by #[a(href=hexoURL, target="_blank") Hexo] and #[a(href=apolloURL, target="_blank") hexo-theme-apollo].--></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>