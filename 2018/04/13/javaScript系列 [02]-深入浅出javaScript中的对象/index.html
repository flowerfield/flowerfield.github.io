<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> javaScript系列 [02]-javaScript对象探析 · 花田半亩</title><meta name="description" content="javaScript系列 [02]-javaScript对象探析 - 文顶顶"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.jpeg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://weibo.com/u/3800117445/atom.xml" title="花田半亩"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/白菜.jpeg" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">文顶顶的BLOG</a></li><li class="nav-list-item"><a href="https://www.cnblogs.com/wendingding/" target="_blank" class="nav-list-link">博客园</a></li><li class="nav-list-item"><a href="https://github.com/flowerField" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="http://blog.sina.com.cn/u/1910914290" target="_blank" class="nav-list-link">花田半亩</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">javaScript系列 [02]-javaScript对象探析</h1><div class="post-info">Apr 13, 2018</div><div class="post-content"><p><div class="tip"><code>题记：</code>多年前，以非常偶然的方式关注了微信<code>公众号“面向对象”</code>，本以为这个公众号主要以分享面向对象编程的干货为主，不料其乃实实在在的猿圈相亲平台。通过查看公开资料，发现该公众号俨然是在以自己的方式来帮助广大单身程序猿们通往一条真真正正的面向对象编程之路，相对而言，编程和语言特性这些破事又算得了什么呢，先“找到对象”似乎才是更高层面的话题。这篇文章，我们不谈如何”面向对象”，只着力于JavaScript中对象的存在方式、对象的创建以及探讨对象使用中面临的问题。<br>本文作为纯粹的技术文章，和“面向对象”公众号利益无关，借用择偶标准说辞是一种调侃，但我给他们点赞。</div></p>
<p><div></div></p>
<h4 id="1-1-javaScript中对象的个人档案"><a href="#1-1-javaScript中对象的个人档案" class="headerlink" title="1.1  javaScript中对象的个人档案"></a>1.1  javaScript中对象的个人档案</h4><p>javaScript是一门基于<code>弱类型、支持面向对象编程且基于原型继承的脚本语言</code>。</p>
<p><strong>对象说明</strong></p>
<p>在JavaScript语言中，对象是可变的键值对集合（或者称为属性的容器），通过对象我们可以方便的管理一组变量和函数。</p>
<p>用通俗的话来说，对象其实就是一堆变量和函数的集合。只是“定义”在对象中的变量，我们称为属性，“定义”在对象中的函数，我们称之为方法。</p>
<p><strong>数据类型和对象</strong></p>
<p>JavaScript中的数据类型可以分为<code>基本数据类型和复杂数据类型</code>。<br>其中基本数据类型有：数字(number)、字符串(string)、布尔值(boolean)、undefined值和null。</p>
<p>复杂数据类型可以简单理解为对象类型。在JavaScript中，数组是对象、函数是对象、正则表达式是对象，对象自然也是对象，它们在使用typeof 运算符时得到的结果为object，即对象类型。</p>
<p><div class="tip"><br>typeof对函数运算的结果为function，对null运算的结果为object，但这被认为是一个错误。</div></p>
<div>

<p><span style="red">JavaScript语言中的对象是无类型的</span>，对象可以拥有属性和方法，属性和方法都是以key-value的方式存储的。我们可以笼统的把方法和属性统一归类为属性（因为方法名其实和属性名没有任何本质的区别，属性和方法的分类方式只是对它们存储的内容进行人为区分），所以<code>对象其实就是键值对的集合</code>。</p>
<p><span style="red">对象通过引用来传递，它们永远不会被复制。</span></p>
<p><strong>对象的检查</strong></p>
<p>① 可以使用typeof来对对象类型进行简单的检查，但需要注意排除null的情况。</p>
<p>② 在开发中，经常会用到hasOwnProperty方法来过滤对象原型成员。</p>
<h4 id="1-2-javaScript中对象的获取方式"><a href="#1-2-javaScript中对象的获取方式" class="headerlink" title="1.2  javaScript中对象的获取方式"></a>1.2  javaScript中对象的获取方式</h4><p>JavaScript中对象的创建有多种方式，根据特定的应用场景，我们可以选择不同的更合适的方式来创建对象，简单可以归纳为以下情况：</p>
<blockquote>
<p>① 字面量的方式创建对象<br>② 内置构造函数创建对象<br>③ 封装工厂函数创建对象<br>④ 定义构造函数创建对象<br>⑤ 调用系统方法创建对象</p>
</blockquote>
<p>下面分别对上面列出的这些方式进行逐一介绍。</p>
<p><strong>字面量的方式创建对象</strong></p>
<p>基本写法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span>  bookObj = &#123;</div><div class="line">       name:<span class="string">"声名狼藉者的生活"</span>,</div><div class="line">       price:<span class="number">42.00</span>,</div><div class="line">       author:<span class="string">"福柯"</span>,</div><div class="line">       press:<span class="string">"北京大学出版社"</span>,</div><div class="line">       read:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">           <span class="built_in">console</span>.log(<span class="string">"我的书名为:声名狼藉者的的生活,作者为福柯...."</span>);</div><div class="line">       &#125;</div><div class="line">   &#125;;</div></pre></td></tr></table></figure></p>
<p>上面的代码中通过字面量的方式创建了bookObj对象，该对象拥有name、price、author和press属性，还拥有read方法。</p>
<p>对象字面量提供了一种非常方便的创建新对象的表示方法，一个对象就是包围在{}中的N(N&gt;=0)个键值对。对象字面量可以出现在任何允许表达式出现的地方。</p>
<p><strong>内置构造函数创建对象</strong></p>
<p>JavaScript中的内置构造函数主要有：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">String</span></div><div class="line"><span class="built_in">Number</span></div><div class="line"><span class="built_in">Boolean</span></div><div class="line"><span class="built_in">Date</span></div><div class="line"><span class="built_in">Array</span></div><div class="line"><span class="built_in">Function</span></div><div class="line"><span class="built_in">Object</span></div><div class="line"><span class="built_in">RegExp</span></div></pre></td></tr></table></figure></p>
<p><div class="tip">注意：(String Number Boolean 是区别于string number boolean的基本包装类型)</div></p>
<div>

<p>基本写法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> book = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line">   book.name = <span class="string">"声名狼藉者的生活"</span>;</div><div class="line">   book.price = <span class="number">42.00</span>;</div><div class="line">   book.author = <span class="string">"福柯"</span>;</div><div class="line">   book.press = <span class="string">"北京大学出版社"</span>;</div><div class="line">   book.read = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(<span class="string">"我的书名为:声名狼藉者的的生活,作者为福柯...."</span>);</div><div class="line">   &#125;;</div></pre></td></tr></table></figure>
<p>这种写法相对字面量创建方式而言不够简洁和直观，而且本身的代码复用性不好，不推荐。</p>
<p><strong>工厂函数创建对象</strong></p>
<p>工厂函数方式创建对象其本质是对内置构造函数创建对象的过程进行了封装，适用于大规模“批量生产”同类型的对象。<br>基本写法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//提供工厂函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createBookNew</span> (<span class="params">name,price,author,press</span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">var</span> book = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line">    book.name = name;</div><div class="line">    book.price = price;</div><div class="line">    book.author = author;</div><div class="line">    book.press = press;</div><div class="line">    book.read = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"我的书名为:"</span>+book.name+<span class="string">",作者为"</span>+book.author+<span class="string">"...."</span>);</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> book;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//使用工厂函数来创建对象</span></div><div class="line"><span class="keyword">var</span> book1 = createBookNew(<span class="string">"声名狼藉者的的生活"</span>,<span class="string">"42.00"</span>,<span class="string">"福柯"</span>,<span class="string">"北京大学出版社"</span>);</div><div class="line"><span class="keyword">var</span> book2 = createBookNew(<span class="string">"人性的枷锁"</span>,<span class="string">"49.00"</span>,<span class="string">"毛姆"</span>,<span class="string">"华东师范大学出版社"</span>);</div><div class="line"><span class="keyword">var</span> book3 = createBookNew(<span class="string">"悟空传"</span>,<span class="string">"28.00"</span>,<span class="string">"今何在"</span>,<span class="string">"湖南文艺出版社"</span>);</div><div class="line"></div><div class="line"><span class="comment">//打印对象的属性,调用对象的方法</span></div><div class="line"><span class="built_in">console</span>.log(book1.name);</div><div class="line"><span class="built_in">console</span>.log(book2.name);</div><div class="line"><span class="built_in">console</span>.log(book3.name);</div><div class="line"></div><div class="line">book1.read();</div><div class="line">book2.read();</div><div class="line">book3.read();</div></pre></td></tr></table></figure>
<p>总结工厂函数创建对象的实现过程</p>
<blockquote>
<p>① 提供一个创建对象的函数（参数）<br>② 在函数内使用new 关键字和构造器创建对象<br>③ 设置对象的属性和方法<br>④ 返回加工过的对象</p>
</blockquote>
<p><strong>自定义构造函数创建对象</strong></p>
<p>基本写法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">//提供构造函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">CreateBook</span> (<span class="params">name,price,author,press</span>) </span>&#123;</div><div class="line"></div><div class="line">   <span class="comment">//使用new调用该构造函数时,默认在内部会先创建Object类型的实例对象</span></div><div class="line">   <span class="comment">//并把该对象关联到当前构造函数的原型对象上，并把函数内的this绑定到该对象</span></div><div class="line">   <span class="comment">//通过this来给实例对象设置属性和方法</span></div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">    <span class="keyword">this</span>.price = price;</div><div class="line">    <span class="keyword">this</span>.author = author;</div><div class="line">    <span class="keyword">this</span>.press = press;</div><div class="line">    <span class="keyword">this</span>.read = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"我的书名为:"</span>+<span class="keyword">this</span>.name+<span class="string">",作者为"</span>+<span class="keyword">this</span>.author+<span class="string">"...."</span>);</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">  <span class="comment">//默认总是把新创建的实例对象返回</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//使用new + 函数名() 的方式来调用</span></div><div class="line"><span class="keyword">var</span> bookObj = <span class="keyword">new</span> CreateBook(<span class="string">"声名狼藉者的的生活"</span>,<span class="string">"42.00"</span>,<span class="string">"福柯"</span>,<span class="string">"北京大学出版社"</span>);</div></pre></td></tr></table></figure>
<p><div class="tip"><br>构造函数和普通函数没有本质区别，约定使用new调用的构造函数的首字母应该大写。<br>构造函数的作用在于完成对象的初始化，对象的创建等工作由new关键字完成，组合使用。</div></p>
<div>

<p><code>工厂函数和构造函数创建对象过程简单对象</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">① 函数的首字母大写(用于区别构造函数和普通函数)</div><div class="line">② 创建对象的过程是由new关键字实现</div><div class="line">③ 在构造函数内部会自动的创建新对象,并赋值给this指针</div><div class="line">④ 自动返回创建出来的对象</div></pre></td></tr></table></figure>
<p><code>构造函数调用方式的返回值</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">① 如果在构造函数中没有显示的return，则默认返回的是新创建出来的对象</div><div class="line">② 如果在构造函数中显示的return，则依照具体的情况处理</div><div class="line">❐ return 的是对象类型数据，则直接返回该对象</div><div class="line">❐ return 的是null或其他基本数据类型数据，则返回新创建的对象（即this）</div></pre></td></tr></table></figure></p>
<p><span style="border:1px solid #ccc;color: #ff3333">提示 </span>在开发中我们通过把自定义构造函数和原型对象结合在一起使用，这样可以充分的利用JavaScript原型链继承的特性并解决方法的共享问题。下面给出基本的代码示例：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//（1）提供Person构造函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;&#125;</div><div class="line"><span class="comment">//（2）替换Person默认的原型对象</span></div><div class="line">Person.prototype =&#123;</div><div class="line">    <span class="comment">//修正构造器属性 Object --&gt; Person</span></div><div class="line">    <span class="keyword">constructor</span>:Person,</div><div class="line">    //提供实例对象的初始化方法</div><div class="line">    init:function(name,age)&#123;</div><div class="line">        <span class="keyword">this</span>.name = name || <span class="string">"默认的姓名"</span>;</div><div class="line">        <span class="keyword">this</span>.age = age || <span class="number">18</span>;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">//所有实例对象都需要访问的原型方法</span></div><div class="line">    showName:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//（3）使用new来调用构造函数以创建实例对</span></div><div class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person();</div><div class="line"><span class="comment">//（4）调用init方法对实例对象进行初始化操作</span></div><div class="line">p.init(<span class="string">"文顶顶"</span>,<span class="number">20</span>);</div></pre></td></tr></table></figure></p>
<h4 id="1-3-javaScript中对象的操作"><a href="#1-3-javaScript中对象的操作" class="headerlink" title="1.3  javaScript中对象的操作"></a>1.3  javaScript中对象的操作</h4><hr>
<ul>
<li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="external">文顶顶</a> ~ <a href="http://wendingding.cn" target="_blank" rel="external">花田半亩</a></li>
<li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="external">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">文顶顶</a></li>
<li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="external">文顶顶</a></li>
</ul>
</div></div></div></div></article></div></main><footer><div class="paginator"><a href="/2018/04/11/javaScript系列 [01]-javaScript函数基本/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2018 <a href="https://weibo.com/u/3800117445">文顶顶</a></p><!--p © #{year} #[a(href=config.url)!= config.author], powered by #[a(href=hexoURL, target="_blank") Hexo] and #[a(href=apolloURL, target="_blank") hexo-theme-apollo].--></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>