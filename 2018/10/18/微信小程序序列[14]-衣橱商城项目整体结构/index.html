<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 微信小程序序列[14]-衣橱商城结构和我的页面 · 花田半亩</title><meta name="description" content="微信小程序序列[14]-衣橱商城结构和我的页面 - 文顶顶"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.jpeg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://weibo.com/u/3800117445/atom.xml" title="花田半亩"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/鲸鱼.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">文顶顶的BLOG</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">标签</a></li><li class="nav-list-item"><a href="https://www.cnblogs.com/wendingding/" target="_blank" class="nav-list-link">博客园</a></li><li class="nav-list-item"><a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place" target="_blank" class="nav-list-link">微博</a></li><li class="nav-list-item"><a href="http://blog.sina.com.cn/u/1910914290" target="_blank" class="nav-list-link">花田半亩</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">微信小程序序列[14]-衣橱商城结构和我的页面</h1><div class="post-info">Oct 18, 2018<span class="post-count"></span> ✧ 字数统计:1,334(字) &nbsp;&nbsp; ♨︎ 阅读时长:5(分钟)</div><div class="post-content"><blockquote>
<p>因为需要完整的综合项目来贯穿小程序开发中的基础知识，所以我在自己使用的小程序清单中选择了一款优秀小程序(<code>MatchU码尚</code>)来进行实现和学习，项目中用到的数据和图片等资源有部分来源于此，该项目<code>仅做技术演示和个人学习使用</code>。本文先对该综合项目、开发小程序项目前期的准备工作进行说明，然后从零开始构建<code>&quot;衣橱定制商城小程序&quot;</code>，并完成tabbar栏和我的页面视图搭建。</p>
</blockquote>
<p><strong>说明</strong> 这是篇说明性博文，不会过多涉及项目的具体代码，该系列文章的源码您可以<a href="https://github.com/flowerField/weapp-yichu" target="_blank" rel="external">点击此处下载</a>。</p>
<p><strong>1.0 开发前准备</strong></p>
<p>[1] <a href="https://mp.weixin.qq.com/" target="_blank" rel="external">官网注册微信小程序开发者账号</a>。<br>[2] <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html" target="_blank" rel="external">官网注册并完善小程序基本信息后，下载微信开发者工具并安装</a>。<br>[3] <a href="">在电脑合适的位置新建空的项目目录，在设置-开发设置中获取APPID初始化项目</a>。</p>
<p><strong>2.0 项目的功能模块</strong></p>
<p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx35.png?raw=true"></p>
<p><strong>3.0 项目的初始化</strong></p>
<p>在使用微信开发者工具选择项目目录，输入appID（也可以使用测试的appID）后勾选<code>建立普通快速模板</code>，那么我们将得到一个最简单的项目，该项目的整体结构如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">├── app.js</div><div class="line">├── app.json</div><div class="line">├── app.wxss</div><div class="line">├── pages</div><div class="line">│   ├── index</div><div class="line">│   │   ├── index.js</div><div class="line">│   │   ├── index.wxml</div><div class="line">│   │   └── index.wxss</div><div class="line">│   └── logs</div><div class="line">│       ├── logs.js</div><div class="line">│       ├── logs.json</div><div class="line">│       ├── logs.wxml</div><div class="line">│       └── logs.wxss</div><div class="line">├── project.config.json</div><div class="line">└── utils</div><div class="line">    └── util.js</div></pre></td></tr></table></figure>
<p>对默认的项目结构进行调整。具体调整内容为:</p>
<pre><code>001 删除默认的两个页面 index 和 logs文件夹。
 002 在pages文件夹中新建home、cart、mine和category文件夹并创建对应的pages页面(命名为index)。
 003 在项目根目录下面新建src目录，该目录用于存放项目中需要用到的资源，并调整app.json文件的配置项。
 004 在src目录下新建img目录用于存储项目中需要用到的图片资源，新建lib目录用于存放需要用到的第三方库和组件。
</code></pre><p>调整后的项目文件结构如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">├── app.js</div><div class="line">├── app.json</div><div class="line">├── app.wxss</div><div class="line">├── pages</div><div class="line">│   ├── cart</div><div class="line">│   │   ├── index.js</div><div class="line">│   │   ├── index.json</div><div class="line">│   │   ├── index.wxml</div><div class="line">│   │   └── index.wxss</div><div class="line">│   ├── category</div><div class="line">│   │   ├── index.js</div><div class="line">│   │   ├── index.json</div><div class="line">│   │   ├── index.wxml</div><div class="line">│   │   └── index.wxss</div><div class="line">│   ├── home</div><div class="line">│   │   ├── index.js</div><div class="line">│   │   ├── index.json</div><div class="line">│   │   ├── index.wxml</div><div class="line">│   │   └── index.wxss</div><div class="line">│   └── mine</div><div class="line">│       ├── index.js</div><div class="line">│       ├── index.json</div><div class="line">│       ├── index.wxml</div><div class="line">│       └── index.wxss</div><div class="line">├── project.config.json</div><div class="line">├── src</div><div class="line">│   ├── img</div><div class="line">│   └── lib</div><div class="line">└── utils</div><div class="line">    └── util.js</div><div class="line"></div><div class="line">9 directories, 31 files</div></pre></td></tr></table></figure></p>
<p><strong>4.0 项目tabbar实现</strong></p>
<p>[1] 准备好项目tabbar部分需要的图标，存放到src/img目录下，这些图标可以在<a href="http://iconfont.cn/collections/detail?cid=918" target="_blank" rel="external">iconfont</a>网站获取。</p>
<p>[2] <code>对app.json</code>文件的字段进行配置，主要设置项目的导航背景、标题文字以及设置tabBar选项信息。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">//app.json文件中的部分配置项</div><div class="line">&#123;</div><div class="line">  <span class="attr">"pages"</span>: [</div><div class="line">    <span class="string">"pages/home/index"</span>,</div><div class="line">     ...省略</div><div class="line">  ],</div><div class="line">  <span class="attr">"window"</span>: &#123;</div><div class="line">    <span class="attr">"backgroundTextStyle"</span>: <span class="string">"light"</span>,</div><div class="line">    <span class="attr">"navigationBarBackgroundColor"</span>: <span class="string">"#110e1e"</span>,</div><div class="line">    <span class="attr">"navigationBarTitleText"</span>: <span class="string">"衣橱商城"</span>,</div><div class="line">    <span class="attr">"navigationBarTextStyle"</span>: <span class="string">"white"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">"tabBar"</span>: &#123;</div><div class="line">    <span class="attr">"selectedColor"</span>: <span class="string">"#000000"</span>,</div><div class="line">    <span class="attr">"list"</span>: [</div><div class="line">      &#123;</div><div class="line">        <span class="attr">"pagePath"</span>: <span class="string">"pages/home/index"</span>,</div><div class="line">        <span class="attr">"text"</span>: <span class="string">"首页"</span>,</div><div class="line">        <span class="attr">"iconPath"</span>: <span class="string">"src/img/home.png"</span>,</div><div class="line">        <span class="attr">"selectedIconPath"</span>: <span class="string">"src/img/homeSelected.png"</span></div><div class="line">      &#125;</div><div class="line">      ....省略</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx36.gif?raw=true"></p>
<p><strong>5.0 我的页面视图实现</strong></p>
<p>在项目的整体结构和tabbar选项卡配置好之后，先尝试实现<code>我的</code>页面视图。</p>
<p>先给出<code>我的</code>页面的整体界面实现效果。</p>
<p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx37.gif?raw=true"></p>
<p>因为该页面的布局相对来说比较简单，而且要处理的数据也相对较少，这里在页面中需要用到数据的地方我们先暂时使用假数据来代替，稍微后面一点的时候再进行具体的优化。通过观察上面的实现效果，我们可以把<code>我的</code>页面分解成几个组成部分，每个部分则采用不同的策略来进行实现。</p>
<blockquote>
<p>❏  <span style="color:#195"><strong>头部视图</strong></span><br>    采用小程序中的基础组件<code>text</code>、<code>image</code>、<code>view</code>等并设置样式来实现。</p>
<p>❏  <span style="color:#195"><strong>cell视图(多组)</strong></span><br>    采用第三方组件库来实现，这里使用到的是iview中的<code>cell</code>和<code>panel</code>以及<code>cell-group</code>组件。<br>    <strong>[步骤]</strong> 把第三方库下载并导入到项目中(<code>src/lib/iview</code>) → 在json文件中配置<code>usingComponents</code> → 在wxml中使用组件并设置属性。</p>
<p>❏  <span style="color:#195"><strong>待付款、已付款区域视图</strong></span><br>    因为该视图在首页中也有用到，所以这里考虑把这一块的视图封装成自定义组件来处理。<br>    <strong>[步骤]</strong> 自定义组件(<code>src/lib/tabview</code>) →  在json文件中配置 -&gt; 在wxml中使用自定义组件。</p>
</blockquote>
<p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx39.png?raw=true"></p>
<p><strong><code>ex: tabview自定义组件内部实现细节</code></strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line">001 自定义组件的基本操作</div><div class="line">    (1) 在项目的src/lib目录下新建tabview文件夹。</div><div class="line">    (2) 在tabview目录下新建component文件并命名为tabview。</div><div class="line">    (3) 新建component的时候会默认生成js\wxml\json\wxss四个文件，其中json文件中已配置component为true.</div><div class="line">    (4) 在wxml文件中编辑内容。</div><div class="line">    (5) 在wxss文件中设置样式。</div><div class="line">    (6) 在js文件中设置初始数据和事件方法。</div><div class="line"></div><div class="line"></div><div class="line">002 wxml文件中的内容</div><div class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'content-view'</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'content-view-cell'</span> <span class="attr">wx:for</span>=<span class="string">'&#123;&#123;itemArray&#125;&#125;'</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">'content-view-cell-img'</span> <span class="attr">src</span>=<span class="string">'&#123;&#123;item.srcImg&#125;&#125;'</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">text</span>  <span class="attr">class</span>=<span class="string">'content-view-cell-des'</span>&gt;</span>&#123;&#123;item.des&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></div><div class="line"></div><div class="line">003 wxss文件中的内容</div><div class="line">.content-view</div><div class="line">&#123;</div><div class="line">  width: 100%;</div><div class="line">  height: 150rpx;</div><div class="line">  background: #fff;</div><div class="line">  margin-top: 40rpx;</div><div class="line">  display: flex;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.content-view-cell</div><div class="line">&#123;</div><div class="line">  height: 150rpx;</div><div class="line">  line-height: 150rpx;</div><div class="line">  flex-grow: 1;</div><div class="line">  position: relative;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.content-view-cell-img</div><div class="line">&#123;</div><div class="line">  width: 70rpx;</div><div class="line">  height: 70rpx;</div><div class="line">  position: absolute;</div><div class="line">  left: 30rpx;</div><div class="line">  top: 40rpx;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.content-view-cell-des</div><div class="line">&#123;</div><div class="line">  position: absolute;</div><div class="line">  left: 120rpx;</div><div class="line">  font-size: 30rpx;</div><div class="line">  line-height: 150rpx;</div><div class="line">  height: 150rpx;</div><div class="line">&#125;</div><div class="line"></div><div class="line">004 js文件中内容</div><div class="line">Component(&#123;</div><div class="line">  //设置自定义组件的属性列表</div><div class="line">  properties: &#123;</div><div class="line">    itemArray:&#123;</div><div class="line">      type:Array</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/10/16/网络编程系列-基本术语/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2018 <a href="https://weibo.com/u/3800117445">文顶顶</a> &nbsp;☁ 全站字数统计205.1k(字)</p><!--p © #{year} #[a(href=config.url)!= config.author], powered by #[a(href=hexoURL, target="_blank") Hexo] and #[a(href=apolloURL, target="_blank") hexo-theme-apollo].--></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>