<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 前端工程化系列[02] Grunt构建工具的使用 · 花田半亩</title><meta name="description" content="前端工程化系列[02] Grunt构建工具的使用 - 文顶顶"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.jpeg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://weibo.com/u/3800117445/atom.xml" title="花田半亩"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/白菜.jpeg" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">文顶顶的BLOG</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">标签</a></li><li class="nav-list-item"><a href="https://www.cnblogs.com/wendingding/" target="_blank" class="nav-list-link">博客园</a></li><li class="nav-list-item"><a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place" target="_blank" class="nav-list-link">微博</a></li><li class="nav-list-item"><a href="http://blog.sina.com.cn/u/1910914290" target="_blank" class="nav-list-link">花田半亩</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">前端工程化系列[02] Grunt构建工具的使用</h1><div class="post-info">May 18, 2018</div><div class="post-content"><blockquote>
<p>本文主要介绍前端开发中常用的构建工具Grunt，具体包括Grunt的基本情况、安装、使用和常见操作等内容。</p>
</blockquote>
<h3 id="1-1-Grunt简单介绍"><a href="#1-1-Grunt简单介绍" class="headerlink" title="1.1 Grunt简单介绍"></a>1.1 Grunt简单介绍</h3><p><img src="https://github.com/flowerField/Source/blob/master/Blog/grunt.png?raw=true" height="300px"></p>
<p><span style="color:#f25">Grunt是一套前端自动化构建工具。</span>对于需要反复重复的任务（如压缩、编译、单元测试等），自动化构建工具可以减轻并简化我们的工作。我们只需要在 Gruntfile 文件中正确配置好要处理的任务，任务运行器就会自动帮我们完成大部分工作。</p>
<p><strong>Grunt的优点</strong></p>
<blockquote>
<p>❏  Grunt拥有庞大的生态系统，并且一直在增长。<br>❏  Grunt支持我们自己创作插件并发布。</p>
</blockquote>
<p>由于Grunt拥有数量庞大的插件，所以几乎任何的任务都可以利用Grunt来自动完成，你也可以根据自己项目的特点来创作合适的插件发布。</p>
<p><strong><span style="color:#f25">Grunt的工作方式</span></strong></p>
<p>Grunt为开发者提供了一个工具包，用于创建命令行程序来执行项目构建过程中的重复性任务，比如压缩js代码、编译Sass样式等。Grunt不仅仅能创建简单任务以解决特定工程遇到的特定需求，还能将任务打包为可复用的插件。这些插件可以被发布、分享，使用以及被其他人进行改进。</p>
<p>Grunt的运转依赖于四个核心的组件：分别是<span style="color:#f25">Gruntfile、Tasks 、Plugins以及任务配置。</span></p>
<p><span style="border:1px solid #000"><strong>&nbsp; &nbsp;① Gruntfile &nbsp; &nbsp;</strong></span></p>
<p>Gruntfile指的是在项目根目录下面名为Gruntfile.js的Node模块。该文件使得我们可以加载Grunt插件，创建自定义任务，并根据项目需求对它们进行配置。</p>
<p>Grunt每次运行时的首要任务都是接受该模块发出的指令。</p>
<p><span style="border:1px solid #000"><strong>&nbsp; &nbsp;② Tasks &nbsp; &nbsp;</strong></span></p>
<p>Tasks作为Grunt的基本构建模块，它实际上是由Grunt的registerTask（）方法注册的具名函数。</p>
<p><span style="border:1px solid #000"><strong>&nbsp; &nbsp;③ Plugins &nbsp; &nbsp;</strong></span></p>
<p>Plugins是一系列能够用于不同项目的可配置任务的集合。</p>
<p><span style="border:1px solid #000"><strong>&nbsp; &nbsp;④ 任务配置 &nbsp; &nbsp;</strong></span></p>
<p>Grunt强调配置优先，任务和插件的功能都可以通过配置文件进行定制，以适应不同工程的需求。这种代码和配置相分离的特性，使开发者能够创造出高复用的插件。</p>
<p><strong>相关参考</strong></p>
<p><strong>现在最新版本&nbsp;&nbsp;&nbsp;&nbsp;</strong>   <span style="color:#f25">v1.0.2</span><br><strong>其它构建工具&nbsp;&nbsp;&nbsp;&nbsp;</strong> <span style="color:#f25"> gulp、webpack、fis3等</span></p>
<p><a href="http://www.gruntjs.com" target="_blank" rel="external">Grunt官网</a><br><a href="http://www.gruntjs.net/" target="_blank" rel="external">Grunt官网(中文)</a><br><a href="http://www.gruntjs.net/plugins" target="_blank" rel="external">Grunt相关的插件列表</a></p>
<h3 id="1-2-Grunt的安装"><a href="#1-2-Grunt的安装" class="headerlink" title="1.2 Grunt的安装"></a>1.2 Grunt的安装</h3><p>Grunt和相关的插件都通过 npm 安装并管理。</p>
<p>Grunt基于Node.js，安装之前要先安装Node.js。</p>
<blockquote>
<p><strong>Node.js的安装</strong></p>
<p>① 打开<a href="https://nodejs.org/en/" target="_blank" rel="external">Node.js官网</a>找到Download选项，选择对应的版本下载。<br>② 下载之后，根据对应的提示进行安装即可。<br>③ 安装完成之后，可以通过<code>$ node --version</code>和<code>$ npm --version</code>命令查看是否安装成功。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">wendingding:~ wendingding$ node --version</div><div class="line">v8.9.3</div><div class="line">wendingding:~ wendingding$ npm --version</div><div class="line">5.5.1</div><div class="line">wendingding:~ wendingding$</div></pre></td></tr></table></figure>
<p><strong>安装注意点</strong></p>
<p>❗ ️Grunt依赖于nodejs的v0.8.0及以上版本；<br>❗ ️奇数版本号的 Node.js 被认为是不稳定的开发版；<br>❗️  需确保当前环境中所安装的 npm 已经是最新版本（<code>$ npm update -g npm</code>）</p>
<p><strong><span style="color:#f25">安装Grunt命令行</span></strong></p>
<p><strong>注意</strong> 在使用Grunt之前，需要先安装Grunt命令行到全局环境中。</p>
<p>安装命令：<code>$ npm install -g grunt-cli</code></p>
<p>安装完之后，可以通过<code>$ grunt</code>命令来验证Grunt命令行是否安装完成并生效，命令行中的<code>-g</code>表示全局安装。</p>
<p>具体的执行情况<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">wendingding:~ wendingding$ npm install -g grunt-cli</div><div class="line">/usr/local/bin/grunt -&gt; /usr/local/lib/node_modules/grunt-cli/bin/grunt</div><div class="line">+ grunt-cli@1.2.0</div><div class="line">added 16 packages in 9.289s</div><div class="line">wendingding:~ wendingding$ grunt</div><div class="line">grunt-cli: The grunt command line interface (v1.2.0)</div><div class="line"></div><div class="line">Fatal error: Unable to find local grunt.</div><div class="line"></div><div class="line">If you're seeing this message, grunt hasn't been installed locally to</div><div class="line">your project. For more information about installing and configuring grunt,</div><div class="line">please see the Getting Started guide:</div><div class="line"></div><div class="line">http://gruntjs.com/getting-started</div></pre></td></tr></table></figure></p>
<p><strong>Grunt命令行的作用</strong></p>
<p><code>Grunt命令行用于调用与Gruntfile在同一目录中 Grunt</code>。每次运行Grunt 时，都会根据node提供的require()系统查找本地安装的 Grunt（<code>因此我们可以在项目的任意子目录中运行grunt</code>） ，如果找到一份本地安装的 Grunt，命令行就将其加载，并传递Gruntfile中的配置信息，然后执行指定的任务。</p>
<h3 id="1-3-Grunt的基本使用"><a href="#1-3-Grunt的基本使用" class="headerlink" title="1.3 Grunt的基本使用"></a>1.3 Grunt的基本使用</h3><h4 id="1-3-1-Grunt使用的基本步骤"><a href="#1-3-1-Grunt使用的基本步骤" class="headerlink" title="1.3.1 Grunt使用的基本步骤"></a>1.3.1 Grunt使用的基本步骤</h4><blockquote>
<p><strong><span style="color:#f25">Grunt使用的基本步骤</span></strong></p>
<p>① &nbsp;生成package.json和Gruntfile.js文件<br>② &nbsp;命令行安装项目中需要用到的插件<br>③ &nbsp;编辑Gruntfile文件定义Task并进行配置<br>④ &nbsp;命令行以grunt task的方式执行任务</p>
</blockquote>
<h4 id="1-3-2-Grunt使用小案例"><a href="#1-3-2-Grunt使用小案例" class="headerlink" title="1.3.2 Grunt使用小案例"></a>1.3.2 Grunt使用小案例</h4><p>接下来，我们通过一个完整的Grunt案例来介绍Grunt的常规使用方法。首先创建的对应的项目文件目录，这里命名为Grunt_demo文件夹，然后创建<code>package.json文件</code>和<code>Gruntfile.js文件</code>并进行相关配置,安装相应的插件并执行Task。</p>
<p><span style="border:1px solid #000"><strong>&nbsp; &nbsp;① 创建package.json文件&nbsp; &nbsp;</strong></span></p>
<p>创建package.json文件有两种方式，一种是直接创建然后以json格式的字段来进行配置，第二种是通过执行npm install来创建，推荐通过命令行的方式来创建。</p>
<p><strong> ✧ 直接创建package.json文件 ✧ </strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">wendingding:~ wendingding$ mkdir Grunt_Demo</div><div class="line">wendingding:~ wendingding$ cd Grunt_Demo/</div><div class="line">wendingding:Grunt_Demo wendingding$ PWD</div><div class="line">/Users/文顶顶/Grunt_Demo</div><div class="line">wendingding:Grunt_Demo wendingding$ touch package.json</div><div class="line">wendingding:Grunt_Demo wendingding$ open package.json</div></pre></td></tr></table></figure>
<p>命令行说明</p>
<p><code>$ mkdir Grunt_Demo</code> 表示创建文件夹<br><code>$ cd Grunt_Demo/</code>    表示进入文件目录<br><code>$ PWD</code>              表示查看当前路径<br><code>$ touch package.json</code> 表示创建package.json文件<br><code>$ open package.json</code> 表示使用记事本打开文件并编辑</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">wendingding:Grunt_Demo wendingding$ open package.json</div><div class="line">wendingding:Grunt_Demo wendingding$ cat package.json</div><div class="line">&#123;</div><div class="line">	"name":"Grunt_Demo",</div><div class="line">	"version":"1.0.0",</div><div class="line">	"dependencies":&#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>$ cat package.json</code> 表示查看文件内容</p>
<p>创建好package.json文件后，可以根据需要添加内容字段到文件中。该json文件中最基本字段主要有<span style="color:#f25">name、version和dependencies</span>，其中name和version对应的是Grunt项目的名称和版本，而dependencies字段中则列出该项目的依赖。</p>
<p><span style="color:#195">package.json文件用于被npm存储项目的元数据，以便将此项目发布为npm模块。我们可以在此文件中列出项目依赖的Grunt和Grunt插件，保存在devDependencies（开发依赖）配置段内。</span></p>
<p><strong> ✧ 初始化命令创建package.json文件 ✧ </strong></p>
<p>除手动创建外，我们还能够通过命令行来进行初始化操作，会以交互的方式来生成一个包含基本配置信息的package.json文件。</p>
<p>初始化命令：<code>$ npm init</code></p>
<p>下面列出具体的命令行执行情况</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">wendingding:Grunt_Demo wendingding$ npm init</div><div class="line">This utility will walk you through creating a package.json file.</div><div class="line">It only covers the most common items, and tries to guess sensible defaults.</div><div class="line"></div><div class="line">See `npm help json` for definitive documentation on these fields</div><div class="line">and exactly what they do.</div><div class="line"></div><div class="line">Use `npm install <span class="tag">&lt;<span class="name">pkg</span>&gt;</span>` afterwards to install a package and</div><div class="line">save it as a dependency in the package.json file.</div><div class="line"></div><div class="line">Press ^C at any time to quit.</div><div class="line">package name: (grunt_demo)</div><div class="line">version: (1.0.0)</div><div class="line">description:</div><div class="line">entry point: (index.js)</div><div class="line">test command:</div><div class="line">git repository:</div><div class="line">keywords:</div><div class="line">author:</div><div class="line">license: (ISC)</div><div class="line">About to write to /Users/文顶顶/Grunt_Demo/package.json:</div><div class="line"></div><div class="line">&#123;</div><div class="line">  "name": "grunt_demo",</div><div class="line">  "version": "1.0.0",</div><div class="line">  "description": "",</div><div class="line">  "main": "index.js",</div><div class="line">  "scripts": &#123;</div><div class="line">    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"</div><div class="line">  &#125;,</div><div class="line">  "author": "",</div><div class="line">  "license": "ISC"</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">Is this ok? (yes) yes</div><div class="line">wendingding:Grunt_Demo wendingding$ cat package.json</div><div class="line">&#123;</div><div class="line">  "name": "grunt_demo",</div><div class="line">  "version": "1.0.0",</div><div class="line">  "description": "",</div><div class="line">  "main": "index.js",</div><div class="line">  "scripts": &#123;</div><div class="line">    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"</div><div class="line">  &#125;,</div><div class="line">  "author": "",</div><div class="line">  "license": "ISC"</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在执行<code>npm init</code>命令创建基本package.json文件的时候，可以设置名称、版本、依赖等选项，如果不设置直接回车表示以默认(建议)的方式来进行配置。</p>
<div class="tip"><br><p><strong>package.json文件注意点</strong><br>（1）package.json应当放置于项目的根目录中，并同项目源代码一起管理。<br>（2）如果在根目录中运行<code>npm install</code>命令，那么将依据package.json文件中所列出的每项依赖来自动安装适当版本的依赖。<br></p><br></div>

<p><span style="border:1px solid #000"><strong>&nbsp; &nbsp;② 创建Gruntfile文件&nbsp; &nbsp;</strong></span></p>
<p>Gruntfile文件是Grunt项目中最核心的文件，可以被命名为 Gruntfile.js 或者是Gruntfile.coffee，该文件同package.json文件一起存放在项目的根目录中，主要<code>用来配置或定义任务（task）并加载Grunt插件</code>。</p>
<p>标准的grunt项目中必须拥有package.json和Gruntfile这两个文件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">wendingding:Grunt_Demo wendingding$ touch Gruntfile.js</div><div class="line">wendingding:Grunt_Demo wendingding$ tree -L 2</div><div class="line">.</div><div class="line">├── Gruntfile.js</div><div class="line">└── package.json</div><div class="line"></div><div class="line">0 directories, 2 files</div></pre></td></tr></table></figure>
<p><code>$ tree -L 2</code> 表示以树状图的方式列出当前目录下面的二级文件结构，具体使用可以参考<a href="http://wendingding.com/2018/04/11/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%B3%BB%E5%88%97%20Mac%E7%B3%BB%E7%BB%9F%E4%B8%ADTree%E7%9A%84%E4%BD%BF%E7%94%A8/" target="_blank" rel="external">网络编程系列 Mac系统中Tree的使用</a></p>
<hr>
<ul>
<li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="external">文顶顶</a> ~ <a href="http://wendingding.com" target="_blank" rel="external">文顶顶的个人博客_花田半亩</a></li>
<li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="external">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">文顶顶</a></li>
<li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="external">文顶顶</a></li>
</ul>
<p><img src="https://github.com/flowerField/Source/blob/master/Blog/zanshang.jpeg?raw=true" width="180" height="180"></p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/05/17/读书笔记 [010]-孩子王/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2018 <a href="https://weibo.com/u/3800117445">文顶顶</a></p><!--p © #{year} #[a(href=config.url)!= config.author], powered by #[a(href=hexoURL, target="_blank") Hexo] and #[a(href=apolloURL, target="_blank") hexo-theme-apollo].--></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>