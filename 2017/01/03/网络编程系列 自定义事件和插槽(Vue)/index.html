<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 网络编程系列 自定义事件和插槽（Vue） · 花田半亩</title><meta name="description" content="网络编程系列 自定义事件和插槽（Vue） - 文顶顶"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.jpeg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://weibo.com/u/3800117445/atom.xml" title="花田半亩"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/鲸鱼.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">文顶顶的BLOG</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">标签</a></li><li class="nav-list-item"><a href="https://www.cnblogs.com/wendingding/" target="_blank" class="nav-list-link">博客园</a></li><li class="nav-list-item"><a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place" target="_blank" class="nav-list-link">微博</a></li><li class="nav-list-item"><a href="http://blog.sina.com.cn/u/1910914290" target="_blank" class="nav-list-link">花田半亩</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">网络编程系列 自定义事件和插槽（Vue）</h1><div class="post-info">Jan 3, 2017<span class="post-count"></span> ✧ 字数统计:1,128(字) &nbsp;&nbsp; ♨︎ 阅读时长:4(分钟)</div><div class="post-content"><blockquote>
<p>本文是早期学习Vue整理的一些阶段性总结，内容主要关于Vue框架中组件的事件传递和插槽。</p>
</blockquote>
<h3 id="组件通信（自定义事件）"><a href="#组件通信（自定义事件）" class="headerlink" title="组件通信（自定义事件）"></a>组件通信（自定义事件）</h3><p><strong>组件间通信</strong>主要涉及到两方面的内容，即父组件（父级标签）向子组件传递数据以及子组件通过自定义事件的方式来反馈给父组件。</p>
<p>数据的传递我们只需要在组件中使用props属性来记录和接收需要的内容即可，这里简单通过代码示例的方式说明下自定义事件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../../Vue/vue.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demoID"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button-custom</span> @<span class="attr">countereventfunction</span>=<span class="string">"totalEventFunction()"</span>&gt;</span><span class="tag">&lt;/<span class="name">button-custom</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button-custom</span> @<span class="attr">countereventfunction</span>=<span class="string">"totalEventFunction()"</span>&gt;</span><span class="tag">&lt;/<span class="name">button-custom</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>按钮被点击的总次数为 &#123;&#123;total&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"button_custom"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"countereventfunction"</span>&gt;</span>点击了当前按钮的次数为：&#123;&#123;counter&#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="javascript">    <span class="comment">//实例化组件</span></span></div><div class="line"><span class="javascript">    Vue.component(<span class="string">"button-custom"</span>,&#123;</span></div><div class="line"><span class="javascript">        template:<span class="string">"#button_custom"</span>,</span></div><div class="line"><span class="javascript">        data:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></div><div class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></div><div class="line"><span class="undefined">                counter:0</span></div><div class="line"><span class="undefined">            &#125;</span></div><div class="line"><span class="undefined">        &#125;,</span></div><div class="line"><span class="undefined">        methods:&#123;</span></div><div class="line"><span class="javascript">            countereventfunction:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="javascript">                <span class="comment">//执行标签的点击事件（先把计数器 + 1）</span></span></div><div class="line"><span class="javascript">                <span class="keyword">this</span>.counter += <span class="number">1</span>;</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="javascript">                <span class="comment">//发出通知 表示counterEventFunction方法已经被点击</span></span></div><div class="line"><span class="javascript">                <span class="keyword">this</span>.$emit(<span class="string">"countereventfunction"</span>);</span></div><div class="line"><span class="undefined">            &#125;</span></div><div class="line"><span class="undefined">        &#125;</span></div><div class="line"><span class="undefined">    &#125;);</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="javascript">    <span class="comment">//创建实例化Vue对象</span></span></div><div class="line"><span class="javascript">    <span class="keyword">new</span> Vue(&#123;</span></div><div class="line"><span class="javascript">        el: <span class="string">"#demoID"</span>,</span></div><div class="line"><span class="undefined">        data: &#123;</span></div><div class="line"><span class="undefined">            total: 0</span></div><div class="line"><span class="undefined">        &#125;,</span></div><div class="line"><span class="undefined">        methods: &#123;</span></div><div class="line"><span class="javascript">            totalEventFunction: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></div><div class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">"___"</span>);</span></div><div class="line"><span class="javascript">                <span class="keyword">this</span>.total += <span class="number">1</span>;</span></div><div class="line"><span class="undefined">            &#125;</span></div><div class="line"><span class="undefined">        &#125;</span></div><div class="line"><span class="undefined">    &#125;);</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>上面的代码中我们在组件中编写了一个按钮标签，该标签在点击的时候能够更新按钮的内容 counter计数器加1、另外我们还有一个标签用来统计页面中所有按钮被点击的次数，这就要求每次组件中标签的点击事件被触发的时候父级标签应该收到通知，我们通过this.$emit方法来实现。</p>
<p>代码的执行结果为:</p>
<p><img src="https://github.com/flowerField/Source/blob/master/Blog/vue01.png?raw=true" width="500px"></p>
<div class="tip">注意：在使用v-on标签或者是其语法糖@的时候，函数的名称不支持驼峰标识命名的方式。</div>


<h3 id="插槽（内容分发）"><a href="#插槽（内容分发）" class="headerlink" title="插槽（内容分发）"></a>插槽（内容分发）</h3><p>插槽的简单说明：Vue 实现了一套内容分发的 API，这套 API 基于当前的<code>Web Components 规范草案</code>，将 <slot> 元素作为承载分发内容的出口。</slot></p>
<p>插槽分成两种，<strong>有名称的插槽</strong>和<strong>没有名称的插槽</strong>,因此也称为具名插槽和匿名插槽。</p>
<p>插槽的使用切入点是什么？</p>
<p>我们注册好组件之后，在使用组件的时候使用的自定义标签对，在这个标签对中可以有内容。</p>
<p>如果在定义组件的时候，我们在组件中预留了<slot>元素，那么页面在渲染的时候会使用自定义标签中的内容来替换组件中的slot元素。</slot></p>
<p>下面给出匿名插槽和具名插槽使用的代码示例：</p>
<p><strong>匿名插槽示例</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"demoID"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">my-slot</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是插槽的内容 p标签<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>我是插槽的内容  div标签<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"date"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">my-slot</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">my-slot</span>&gt;</span><span class="tag">&lt;/<span class="name">my-slot</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"my_slot"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>示例代码的头部标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--在组件的头部和底部中间的内容是不确定的--&gt;</span></div><div class="line">    <span class="comment">&lt;!--这个预留一个没有名称的插槽：匿名插槽--&gt;</span></div><div class="line">    <span class="comment">&lt;!--slot标签中可以有具体的内容，如果在使用组件的时候自定义标签中有内容，那么则替换slot中的部分--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span>预留的插槽出口<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">footer</span>&gt;</span>示例代码的底部标签<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="javascript">    <span class="comment">//组件实例化</span></span></div><div class="line"><span class="javascript">    Vue.component(<span class="string">"my-slot"</span>,&#123;</span></div><div class="line"><span class="javascript">        template:<span class="string">"#my_slot"</span></span></div><div class="line"><span class="undefined">    &#125;)</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="javascript">    <span class="keyword">new</span> Vue(&#123;</span></div><div class="line"><span class="javascript">        el:<span class="string">"#demoID"</span></span></div><div class="line"><span class="undefined">    &#125;)</span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>代码在运行的时候，组件中预留的slot标签会被自定义标签my-slot（组件）内部的标签完成替换。</p>
<p><strong>具名插槽代码示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">v id="demoID"&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">my-slot</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"cpu"</span>&gt;</span>Core i8 <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"memory"</span>&gt;</span>64GB内存条<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"store"</span>&gt;</span>我是存储相关的插槽信息1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"store"</span>&gt;</span>我是存储相关的插槽信息2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"hard-drive"</span>&gt;</span>1TB的固态硬盘<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">my-slot</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"my_slot"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"cpu"</span>&gt;</span>我是cpu插槽<span class="tag">&lt;/<span class="name">slot</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"memory"</span>&gt;</span>我是memory插槽<span class="tag">&lt;/<span class="name">slot</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"store"</span>&gt;</span>我是存储插槽<span class="tag">&lt;/<span class="name">slot</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"hard-drive"</span>&gt;</span>我是硬盘插槽<span class="tag">&lt;/<span class="name">slot</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="javascript">    <span class="comment">//组件实例化</span></span></div><div class="line"><span class="javascript">    Vue.component(<span class="string">"my-slot"</span>,&#123;</span></div><div class="line"><span class="javascript">        template:<span class="string">"#my_slot"</span></span></div><div class="line"><span class="undefined">    &#125;);</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="javascript">    <span class="comment">//创建Vue实例对象</span></span></div><div class="line"><span class="javascript">    <span class="keyword">new</span> Vue(&#123;</span></div><div class="line"><span class="javascript">        el:<span class="string">"#demoID"</span></span></div><div class="line"><span class="undefined">    &#125;)</span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>代码的执行结果为：<br><img src="https://github.com/flowerField/Source/blob/master/Blog/vue02.png?raw=true" width="500px"></p>
<hr>
<ul>
<li>获取更多、更专业的IT技能，请猛戳~<a href="http://www.520it.com/" target="_blank" rel="external">小码哥教育</a>︎</li>
<li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="external">文顶顶</a> ~ <a href="http://wendingding.com" target="_blank" rel="external">文顶顶的个人博客_花田半亩</a></li>
<li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="external">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li>
<li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="external">文顶顶</a><br><img src="https://github.com/flowerField/Source/blob/master/Blog/banner.jpg?raw=true" onclick="window.open('http://www.520it.com/zt/t30/');"></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2017/08/10/读书笔记 [000]-金玉良言/" class="prev">上一篇</a><a href="/2017/01/02/网络编程系列 数据流和组件通信(Vue)/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2018 <a href="https://weibo.com/u/3800117445">文顶顶</a> &nbsp;☁ 全站字数统计193.5k(字)</p><!--p © #{year} #[a(href=config.url)!= config.author], powered by #[a(href=hexoURL, target="_blank") Hexo] and #[a(href=apolloURL, target="_blank") hexo-theme-apollo].--></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>