<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>花田半亩</title>
  
  <subtitle>文顶顶的Blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://weibo.com/u/3800117445/"/>
  <updated>2018-11-26T10:08:51.061Z</updated>
  <id>https://weibo.com/u/3800117445/</id>
  
  <author>
    <name>文顶顶</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Node系列-Query String</title>
    <link href="https://weibo.com/u/3800117445/2018/11/26/Node%E7%B3%BB%E5%88%97-queryString/"/>
    <id>https://weibo.com/u/3800117445/2018/11/26/Node系列-queryString/</id>
    <published>2018-11-26T15:20:13.000Z</published>
    <updated>2018-11-26T10:08:51.061Z</updated>
    
    <content type="html"><![CDATA[<div class="tip">本文对Node的内置模块Query String进行介绍，包括基本情况和简单使用。</div><h4 id="1-0-模块简介"><a href="#1-0-模块简介" class="headerlink" title="1.0 模块简介"></a>1.0 模块简介</h4><p><a href="">Query String</a>是Node的内置核心模块之一，无需单独安装。在Nodejs文件中可以直接在代码里通过<code>var querystring = require(&quot;querystring&quot;)</code>的方式来进行加载，该模块主要用来处理URL路径中查询字符串的转换工作。</p><p><strong>查询字符串</strong> 在GET请求的URL路径中，请求的参数会以键值对的方式拼接(键和值之间使用=连接，多个键值对之间使用&amp;符号连接)并以?分隔符跟在请求路径的后面。这一段参数字符串其实就是查询字符串，譬如在<code>http://www.wendingding.com/doc?name=node系列-NPM&amp;page=1</code>这个URL路径中，<code>name=node系列-NPM&amp;page=1</code>就是所谓的查询字符串。</p><p>在命令行环境中可以直接通过REPL来查看Query String模块的内容，这个模块本身返回一个对象。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">bogon:~ wendingding$ node</span><br><span class="line">&gt; querystring</span><br><span class="line">&#123; <span class="attr">unescapeBuffer</span>: [<span class="built_in">Function</span>: unescapeBuffer],</span><br><span class="line">  <span class="built_in">unescape</span>: [<span class="built_in">Function</span>: qsUnescape],</span><br><span class="line">  <span class="built_in">escape</span>: [<span class="built_in">Function</span>: qsEscape],</span><br><span class="line">  stringify: [<span class="built_in">Function</span>: stringify],</span><br><span class="line">  encode: [<span class="built_in">Function</span>: stringify],</span><br><span class="line">  parse: [<span class="built_in">Function</span>: parse],</span><br><span class="line">  decode: [<span class="built_in">Function</span>: parse] &#125;</span><br></pre></td></tr></table></figure><p><strong>Query String模块中两个比较重要的方法</strong></p><ul><li><code>parse方法</code> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用于将查询字符串转换为对象。</li><li><code>stringify方法</code>&nbsp;用于将对象序列化为查询字符串。</li></ul><h4 id="2-0-基本使用"><a href="#2-0-基本使用" class="headerlink" title="2.0 基本使用"></a>2.0 基本使用</h4><p>这里主要介绍Query String模块中常用方法的基本使用、这些方法的作用、参数传递以及返回值结构等情况，并提供简短的代码示例。</p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>parse方法</strong></span></p><p><strong>作用</strong> 把查询字符串转换(反序列化)为对象。<br><strong>语法</strong> <code>querystring.parse( str , [ sep ] , [ eq ] , [ options ])</code><br><strong>参数</strong></p><ul><li><div class="liX widthX">str</div>           字符串类型 | 指定待转换的查询字符串。</li><li><div class="liX widthX">sep</div> 字符串类型 | 指定查询字符串中的分隔字符，默认为<code>&amp;</code>。</li><li><div class="liX widthX">eq</div> 字符串类型 | 指定查询字符串中的分配字符(连接键和值)，默认为<code>=</code>。</li><li><div class="liX widthX">options</div> 对象类型 | 设置maxKeys字段的值可以来控制转换结果中属性的个数。</li></ul><p><strong>返回值</strong> 反序列化成功后，将返回转换后的对象。<br><strong>示例</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//001 最简单的使用方式</span></span><br><span class="line">wendingding$ node</span><br><span class="line">&gt; <span class="keyword">var</span> str = <span class="string">"name=LiuY&amp;password=931007&amp;star=best"</span>;</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line">&gt; <span class="keyword">var</span> obj = querystring.parse(str);</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line">&gt; obj</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">'LiuY'</span>, <span class="attr">password</span>: <span class="string">'931007'</span>, <span class="attr">star</span>: <span class="string">'best'</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//002 测试分割字符参数</span></span><br><span class="line">&gt; querystring.parse(<span class="string">"name=LiuY&amp;password=931007&amp;star=best"</span>);</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">'LiuY'</span>, <span class="attr">password</span>: <span class="string">'931007'</span>, <span class="attr">star</span>: <span class="string">'best'</span> &#125;</span><br><span class="line">&gt; querystring.parse(<span class="string">"name=LiuY&amp;password=931007&amp;star=best"</span>,<span class="string">"@"</span>);</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">'LiuY&amp;password=931007&amp;star=best'</span> &#125;</span><br><span class="line">&gt; querystring.parse(<span class="string">"name=LiuY@password=931007@star=best"</span>,<span class="string">"@"</span>);</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">'LiuY'</span>, <span class="attr">password</span>: <span class="string">'931007'</span>, <span class="attr">star</span>: <span class="string">'best'</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//003 测试分配字符</span></span><br><span class="line">&gt; querystring.parse(<span class="string">"name=LiuY&amp;password=931007&amp;star=best"</span>,<span class="string">"&amp;"</span>,<span class="string">"="</span>);</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">'LiuY'</span>, <span class="attr">password</span>: <span class="string">'931007'</span>, <span class="attr">star</span>: <span class="string">'best'</span> &#125;</span><br><span class="line">&gt; querystring.parse(<span class="string">"name=LiuY&amp;password=931007&amp;star=best"</span>,<span class="string">"&amp;"</span>,<span class="string">":"</span>);</span><br><span class="line">&#123; <span class="string">'name=LiuY'</span>: <span class="string">''</span>, <span class="string">'password=931007'</span>: <span class="string">''</span>, <span class="string">'star=best'</span>: <span class="string">''</span> &#125;</span><br><span class="line">&gt; querystring.parse(<span class="string">"name:LiuY&amp;password:931007&amp;star:best"</span>,<span class="string">"&amp;"</span>,<span class="string">":"</span>);</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">'LiuY'</span>, <span class="attr">password</span>: <span class="string">'931007'</span>, <span class="attr">star</span>: <span class="string">'best'</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//004 测试配置对象</span></span><br><span class="line">&gt; querystring.parse(<span class="string">"name=LiuY&amp;password=931007&amp;star=best"</span>,<span class="string">"&amp;"</span>,<span class="string">"="</span>,&#123;<span class="attr">maxKeys</span>:<span class="number">2</span>&#125;);</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">'LiuY'</span>, <span class="attr">password</span>: <span class="string">'931007'</span> &#125;</span><br><span class="line">&gt; querystring.parse(<span class="string">"name=LiuY&amp;password=931007&amp;star=best"</span>,<span class="string">"&amp;"</span>,<span class="string">"="</span>,&#123;<span class="attr">maxKeys</span>:<span class="number">1</span>&#125;);</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">'LiuY'</span> &#125;</span><br><span class="line">&gt; querystring.parse(<span class="string">"name=LiuY&amp;password=931007&amp;star=best"</span>,<span class="string">"&amp;"</span>,<span class="string">"="</span>,&#123;<span class="attr">maxKeys</span>:<span class="number">0</span>&#125;);</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">'LiuY'</span>, <span class="attr">password</span>: <span class="string">'931007'</span>, <span class="attr">star</span>: <span class="string">'best'</span> &#125;</span><br></pre></td></tr></table></figure><div class="tip"><strong>注意</strong> options配置对象中当字段maxKeys的值为0时等价于没有设置该参数。</div><p><span style="border:1px solid #000;padding:5px 20px;"><strong>stringify方法</strong></span></p><p><strong>作用</strong> 把对象序列化为查询字符串。<br><strong>语法</strong> <code>querystring.stringify( obj , [ sep ] , [ eq ] )</code><br><strong>参数</strong></p><ul><li><div class="liX widthX">obj</div>           对象类型 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 指定待转换的对象。</li><li><div class="liX widthX">sep</div> 字符串类型 | 指定查询字符串中的分隔字符，默认为<code>&amp;</code>。</li><li><div class="liX widthX">eq</div> 字符串类型 | 指定查询字符串中的分配字符(连接键和值)，默认为<code>=</code>。</li></ul><p><strong>返回值</strong> 序列化成功后，返回转换后的查询字符串。<br><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//001 基本用法</span></span><br><span class="line">wendingding$ node</span><br><span class="line">&gt;  <span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">'wendingding'</span>, <span class="attr">password</span>: <span class="string">'911021'</span>, <span class="attr">star</span>: <span class="string">'other'</span> &#125;</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line">&gt; querystring.stringify(obj);</span><br><span class="line"><span class="string">'name=wendingding&amp;password=911021&amp;star=other'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//002 测试分隔字符参数</span></span><br><span class="line">&gt; querystring.stringify(obj,<span class="string">"@"</span>);</span><br><span class="line"><span class="string">'name=wendingding@password=911021@star=other'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//003 测试分配字符参数</span></span><br><span class="line">&gt; querystring.stringify(obj,<span class="string">"&amp;"</span>,<span class="string">":"</span>);</span><br><span class="line"><span class="string">'name:wendingding&amp;password:911021&amp;star:other'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//004 如果生成的查询字符串中有中文那么默认进行转码处理</span></span><br><span class="line">&gt; querystring.stringify(&#123; <span class="attr">name</span>: <span class="string">'文顶顶'</span>, <span class="attr">password</span>: <span class="string">'911021'</span>, <span class="attr">star</span>: <span class="string">'other'</span> &#125;);</span><br><span class="line"><span class="string">'name=%E6%96%87%E9%A1%B6%E9%A1%B6&amp;password=911021&amp;star=other'</span></span><br></pre></td></tr></table></figure></p><h4 id="3-0-番外篇"><a href="#3-0-番外篇" class="headerlink" title="3.0 番外篇"></a>3.0 番外篇</h4><p>通过学习我们发现，Query String模块不论是内部结构还是其主要方法的使用相对都是比较简单的。如果您对JavaScript语言比较熟悉那么就会发现Query String模块中的序列化和反序列方法同JavaScript语言中原生的<code>JSON.parse</code>和<code>JSON.stringify</code>方法很像，而转换的过程和jQuery框架中<code>$().serialize()</code>内部依赖的<code>$.param</code>方法也几乎无差。</p><p>其实，如果要自己动手来实现也不会很复杂，下面列出示例代码。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stringify</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arrM = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj)</span><br><span class="line">    &#123;</span><br><span class="line">        arrM.push(key + <span class="string">"="</span> + obj[key]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">encodeURI</span>(arrM.join(<span class="string">"&amp;"</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parse</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> objM = &#123;&#125;;</span><br><span class="line">    <span class="keyword">var</span> arrM = <span class="built_in">decodeURI</span>(str).split(<span class="string">"&amp;"</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arrM.length; i ++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> keyAndValueArr = arrM[i].split(<span class="string">"="</span>);</span><br><span class="line">        objM[keyAndValueArr[<span class="number">0</span>]] = keyAndValueArr[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> objM;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试代码和运行结果</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">name</span>:<span class="string">"文顶顶"</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(stringify(obj));         <span class="comment">//name=%E6%96%87%E9%A1%B6%E9%A1%B6&amp;age=18</span></span><br><span class="line"><span class="built_in">console</span>.log(parse(stringify(obj)));  <span class="comment">//&#123;name: "文顶顶", age: "18"&#125;</span></span><br></pre></td></tr></table></figure></p><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;tip&quot;&gt;本文对Node的内置模块Query String进行介绍，包括基本情况和简单使用。&lt;/div&gt;

&lt;h4 id=&quot;1-0-模块简介&quot;&gt;&lt;a href=&quot;#1-0-模块简介&quot; class=&quot;headerlink&quot; title=&quot;1.0 模块简介&quot;&gt;
      
    
    </summary>
    
    
      <category term="Node系列" scheme="https://weibo.com/u/3800117445/tags/Node%E7%B3%BB%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>Node系列-url</title>
    <link href="https://weibo.com/u/3800117445/2018/11/25/Node%E7%B3%BB%E5%88%97-url/"/>
    <id>https://weibo.com/u/3800117445/2018/11/25/Node系列-url/</id>
    <published>2018-11-25T15:20:13.000Z</published>
    <updated>2018-11-27T01:10:17.255Z</updated>
    
    <content type="html"><![CDATA[<div class="tip">本文对Node的内置模块url进行介绍，包括基本情况和简单使用。</div><h4 id="1-0-模块的内容"><a href="#1-0-模块的内容" class="headerlink" title="1.0 模块的内容"></a>1.0 模块的内容</h4><p><a href="https://www.npmjs.com/package/url" target="_blank" rel="noopener">url</a>是Node的内置核心模块之一，无需单独安装可以直接在代码中通过<code>var url = require(&quot;url&quot;)</code>的方式加载，该模块提供了很多使用的函数专门用于URL的处理和解析。</p><p>在命令行环境中可以直接通过REPL来查看URL模块的内容，这个模块本身返回一个对象。</p><p><strong>URL模块中有三个比较重要的方法</strong></p><ul><li><code>parse方法</code> &nbsp;&nbsp;&nbsp;&nbsp;用于将URL字符串转换为对象</li><li><code>format方法</code>&nbsp;&nbsp;&nbsp;用于将特定的对象还原为URL字符串</li><li><code>resolve方法</code>&nbsp;用于将两个(字符串 base url对象和href url对象)路径合成一个路径。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">bogon:~ wendingding$ node</span><br><span class="line">&gt; <span class="built_in">console</span>.dir(url);</span><br><span class="line">&#123; <span class="attr">Url</span>: [<span class="built_in">Function</span>: Url],</span><br><span class="line">  parse: [<span class="built_in">Function</span>: urlParse],</span><br><span class="line">  resolve: [<span class="built_in">Function</span>: urlResolve],</span><br><span class="line">  resolveObject: [<span class="built_in">Function</span>: urlResolveObject],</span><br><span class="line">  format: [<span class="built_in">Function</span>: urlFormat],</span><br><span class="line">  URL: [<span class="built_in">Function</span>: URL],</span><br><span class="line">  URLSearchParams: [<span class="built_in">Function</span>: URLSearchParams],</span><br><span class="line">  domainToASCII: [<span class="built_in">Function</span>: domainToASCII],</span><br><span class="line">  domainToUnicode: [<span class="built_in">Function</span>: domainToUnicode] &#125;</span><br></pre></td></tr></table></figure><p><strong>URL的结构</strong></p><p>Node内置的url模块提供了两套API来处理URL字符串</p><ul><li>Node.js特有的API，是旧版本的遗留；</li><li>实现了<a href="http://nodejs.cn/api/url.html#url_class_url" target="_blank" rel="noopener">WHATWG URL Standard</a>的API ，该标准也在各种浏览器中被使用。</li></ul><p><img src="https://github.com/flowerField/Source/blob/master/Blog/node_url.png?raw=true"></p><p>上图给出的是两套API的结构比较情况。其中网址上方是Node API中的的<code>url.parse()方法</code>解析后返回的对象结构，网址下方的则是WHATWG URL对象的结构，在具体使用的时候需要注意区分。</p><p>使用示例:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//WHATWG URL Standard API</span></span><br><span class="line"><span class="keyword">const</span> &#123; URL &#125; = <span class="built_in">require</span>(<span class="string">'url'</span>);</span><br><span class="line"><span class="keyword">const</span> myURL =</span><br><span class="line">  <span class="keyword">new</span> URL(<span class="string">'https://user:pass@sub.host.com:8080/p/a/t/h?query=string#hash'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Node API</span></span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</span><br><span class="line"><span class="keyword">const</span> myURL =</span><br><span class="line">  url.parse(<span class="string">'https://user:pass@sub.host.com:8080/p/a/t/h?query=string#hash'</span>);</span><br></pre></td></tr></table></figure></p><h4 id="2-0-基本使用"><a href="#2-0-基本使用" class="headerlink" title="2.0 基本使用"></a>2.0 基本使用</h4><p>这里主要介绍URL模块中常用方法的基本使用、这些方法的作用、参数传递以及返回值结构等情况，并提供简短的代码示例。</p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>parse方法</strong></span></p><p><strong>作用</strong> 解析URL字符串并返回URL对象。<br><strong>语法</strong> <code>url.parse( urlStr , [ parseQueryString ] , [ slashesDenoteHost ])</code><br><strong>参数</strong></p><ul><li><div class="liX">urlStr</div>           字符串类型 | 待解析的 URL 字符串</li><li><div class="liX">parseQueryString</div> 布尔值类型 | 是否把查询字符串转换为对象。</li><li><div class="liX">slashesDenoteHost</div> 布尔值类型 | 是否把<code>//后...下一个/之前</code>的字符串会解析为host。</li></ul><p><strong>返回值</strong></p><ul><li><div class="liY">解析成功</div> URL对象。</li><li><div class="liY">解析失败</div> 报错(若参数非字符串抛出<code>TypeError</code>|若无法编码抛出<code>URIError</code>) 。</li></ul><p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ node</span><br><span class="line">url.parse(<span class="string">"https://user:pass@www.wendingding.com:8080/p/a/t/h?query=string#hash"</span>)</span><br><span class="line">Url &#123;</span><br><span class="line">  protocol: <span class="string">'https:'</span>,</span><br><span class="line">  slashes: <span class="literal">true</span>,</span><br><span class="line">  auth: <span class="string">'user:pass'</span>,</span><br><span class="line">  host: <span class="string">'www.wendingding.com:8080'</span>,</span><br><span class="line">  port: <span class="string">'8080'</span>,</span><br><span class="line">  hostname: <span class="string">'www.wendingding.com'</span>,</span><br><span class="line">  hash: <span class="string">'#hash'</span>,</span><br><span class="line">  search: <span class="string">'?query=string'</span>,</span><br><span class="line">  query: <span class="string">'query=string'</span>,</span><br><span class="line">  pathname: <span class="string">'/p/a/t/h'</span>,</span><br><span class="line">  path: <span class="string">'/p/a/t/h?query=string'</span>,</span><br><span class="line">  href: <span class="string">'https://user:pass@www.wendingding.com:8080/p/a/t/h?query=string#hash'</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong>URL对象字段说明</strong><br><span class="spaceX">href</span> 被转换的原URL字符串。<br><span class="spaceX" style="background:#195;color:#fff">protocol</span> 请求使用的协议。<br><span class="spaceX">auth</span> URL字符串中的认证信息。<br><span class="spaceX">host</span> URL字符串中的完整地址和端口号。<br><span class="spaceX">port</span> URL字符串中的端口号。<br><span class="spaceX">slashes</span>  协议和路径中间是否使用//分隔符。<br><span class="spaceX">hostname</span> URL字符串中的完整地址(<code>主机名</code>|<code>IP地址</code>)。<br><span class="spaceX">hash</span> URL字符串中的散列字符串，包含起始字符<code>#</code>。<br><span class="spaceX">search</span> URL字符串中的查询字符串，包含起始字符<code>?</code>。<br><span class="spaceX">path</span> URL字符串中的路径，包含查询字符串。<br><span class="spaceX" style="background:#195;color:#fff">pathname</span> URL字符串中的路径，不包含查询字符串。<br><span class="spaceX" style="background:#195;color:#fff">query</span> 查询字符串(如果parseQueryString参数传递true，则保存为对象)。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ node</span><br><span class="line">&gt;<span class="keyword">var</span> obj = url.parse(<span class="string">"https://www.wendingding.com/doc?name=mitaoer&amp;password=931007"</span>,<span class="literal">true</span>)</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line">&gt;obj</span><br><span class="line">Url &#123;</span><br><span class="line">  protocol: <span class="string">'https:'</span>,</span><br><span class="line">  slashes: <span class="literal">true</span>,</span><br><span class="line">  auth: <span class="literal">null</span>,</span><br><span class="line">  host: <span class="string">'www.wendingding.com'</span>,</span><br><span class="line">  port: <span class="literal">null</span>,</span><br><span class="line">  hostname: <span class="string">'www.wendingding.com'</span>,</span><br><span class="line">  hash: <span class="literal">null</span>,</span><br><span class="line">  search: <span class="string">'?name=mitaoer&amp;password=931007'</span>,</span><br><span class="line">  query: &#123; <span class="attr">name</span>: <span class="string">'mitaoer'</span>, <span class="attr">password</span>: <span class="string">'931007'</span> &#125;,</span><br><span class="line">  pathname: <span class="string">'/doc'</span>,</span><br><span class="line">  path: <span class="string">'/doc?name=mitaoer&amp;password=931007'</span>,</span><br><span class="line">  href: <span class="string">'https://www.wendingding.com/doc?name=mitaoer&amp;password=931007'</span> &#125;</span><br><span class="line">&gt; obj.query</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">'mitaoer'</span>, <span class="attr">password</span>: <span class="string">'931007'</span> &#125;</span><br></pre></td></tr></table></figure><p><span style="border:1px solid #000;padding:5px 20px;"><strong>format方法</strong></span></p><p><strong>作用</strong> 把URL对象转换(序列化)为URL字符串。<br><strong>语法</strong> <code>url.format( url , [ options ])</code><br><strong>参数</strong></p><ul><li><div class="liX">url</div>           <a href="http://nodejs.cn/api/url.html#url_the_whatwg_url_api" target="_blank" rel="noopener">WHATWG URL</a>类型的对象。</li><li><div class="liX">options</div>       对象类型 | 用于控制转换(序列化)的配置。</li></ul><p><strong>返回值</strong> 如果解析成功，那么就返回对应的URL字符串。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">obj</span><br><span class="line">Url &#123;</span><br><span class="line">  protocol: <span class="string">'https:'</span>,</span><br><span class="line">  slashes: <span class="literal">true</span>,</span><br><span class="line">  auth: <span class="literal">null</span>,</span><br><span class="line">  host: <span class="string">'www.wendingding.com'</span>,</span><br><span class="line">  port: <span class="literal">null</span>,</span><br><span class="line">  hostname: <span class="string">'www.wendingding.com'</span>,</span><br><span class="line">  hash: <span class="literal">null</span>,</span><br><span class="line">  search: <span class="string">'?name=mitaoer&amp;password=931007'</span>,</span><br><span class="line">  query: &#123; <span class="attr">name</span>: <span class="string">'mitaoer'</span>, <span class="attr">password</span>: <span class="string">'931007'</span> &#125;,</span><br><span class="line">  pathname: <span class="string">'/doc'</span>,</span><br><span class="line">  path: <span class="string">'/doc?name=mitaoer&amp;password=931007'</span>,</span><br><span class="line">  href: <span class="string">'https://www.wendingding.com/doc?name=mitaoer&amp;password=931007'</span> &#125;</span><br><span class="line">&gt; obj.query</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">'mitaoer'</span>, <span class="attr">password</span>: <span class="string">'931007'</span> &#125;</span><br><span class="line"></span><br><span class="line">&gt; <span class="keyword">var</span> urlStr = url.format(obj)</span><br><span class="line">&gt; urlStr</span><br><span class="line"><span class="string">'https://www.wendingding.com/doc?name=mitaoer&amp;password=931007'</span></span><br></pre></td></tr></table></figure><p><strong>备注</strong> 该方法第二个参数Options参数是可选的接受一个配置对象，可以配置下面列出的四个字段它们都是布尔类型的值，如果不配置那么默认均为true。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">search      是否应该包含搜索查询。</span><br><span class="line">auth        是否应该包含用户名和密码。</span><br><span class="line">fragment    结果字符串是否应该包含分段。</span><br><span class="line">unicode     Unicode字符是否应该被直接编码。</span><br></pre></td></tr></table></figure></p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>resolve方法</strong></span></p><p><strong>作用</strong> 同浏览器那样把URL转换为完整的目标地址。<br><strong>语法</strong> <code>url.resolve( from , to )</code><br><strong>参数</strong></p><ul><li><div class="liX">from</div>           字符串类型 | 解析时相对的基本 URL(起点路径)</li><li><div class="liX">to</div>             字符串类型 | 要解析的超链接的 URL(参考路径)。</li></ul><p><strong>示例</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; url.resolve(<span class="string">'/one/two/three'</span>, <span class="string">'four'</span>);  </span><br><span class="line"><span class="string">'/one/two/four'</span></span><br><span class="line">&gt; url.resolve(<span class="string">'http://www.wendingding.com/'</span>, <span class="string">'/one'</span>);</span><br><span class="line"><span class="string">'http://www.wendingding.com/one'</span></span><br><span class="line">&gt; url.resolve(<span class="string">'http://www.wendingding.com/one'</span>, <span class="string">'/two'</span>);</span><br><span class="line"><span class="string">'http://www.wendingding.com/two'</span></span><br></pre></td></tr></table></figure></p><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;tip&quot;&gt;本文对Node的内置模块url进行介绍，包括基本情况和简单使用。&lt;/div&gt;

&lt;h4 id=&quot;1-0-模块的内容&quot;&gt;&lt;a href=&quot;#1-0-模块的内容&quot; class=&quot;headerlink&quot; title=&quot;1.0 模块的内容&quot;&gt;&lt;/a&gt;1.
      
    
    </summary>
    
    
      <category term="Node系列" scheme="https://weibo.com/u/3800117445/tags/Node%E7%B3%BB%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>Node系列-cnpm</title>
    <link href="https://weibo.com/u/3800117445/2018/11/25/Node%E7%B3%BB%E5%88%97-cnpm/"/>
    <id>https://weibo.com/u/3800117445/2018/11/25/Node系列-cnpm/</id>
    <published>2018-11-24T16:22:13.000Z</published>
    <updated>2018-11-27T03:37:54.850Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://camo.githubusercontent.com/b674d29f60a0c9b6474843a70d305b7ab6c8da99/68747470733a2f2f7261772e6769746875622e636f6d2f636e706d2f636e706d6a732e6f72672f6d61737465722f6c6f676f2e706e67" style="width:200px"></p><div class="tip">本文输出Node中另一款包管理工具CNPM相关的内容，包括基本情况和简单使用。</div><h4 id="1-0-简单介绍"><a href="#1-0-简单介绍" class="headerlink" title="1.0 简单介绍"></a>1.0 简单介绍</h4><p><a href="https://github.com/cnpm/cnpm" target="_blank" rel="noopener">CNPM</a>是阿里的Node团队开发的一款NPM工具，由蚂蚁金服Node技术专家<a href="http://fengmk2.github.io/" target="_blank" rel="noopener">苏千</a>(<code>袁锋·Node技术专家</code>)和<a href="https://github.com/dead-horse" target="_blank" rel="noopener">死马</a>(<code>何翊宇·Node技术专家·koa.js和egg.js框架核心维护者</code>)主导，内核使用了自主研发的<a href="https://github.com/cnpm/npminstall" target="_blank" rel="noopener">npminstall</a>实现。CNPM依托于<a href="https://npm.taobao.org/" target="_blank" rel="noopener">淘宝NPM镜像</a>，在国内能够更快速的进行包和依赖的安装。</p><p>在<a href="https://npm.taobao.org/" target="_blank" rel="noopener">淘宝NPM镜像网站</a>上面有关于镜像的说明：<span style="color:#195">“这是一个完整 npmjs.org 镜像，你可以用此代替官方版本(只读)，同步频率目前为 10分钟 一次以保证尽量与官方服务同步”</span>。</p><p>也就是说，我们在管理和安装包的时候使用淘宝NPM镜像跟直接使用npm来进行安装的资源其实是相同的，因为国内网络环境的原因，我们直接使用淘宝NPM镜像来下载包速度会更快一些。</p><h4 id="2-0-基本使用"><a href="#2-0-基本使用" class="headerlink" title="2.0 基本使用"></a>2.0 基本使用</h4><div class="titleX"><strong>安装CNPM</strong></div><p><span class="spaceY spaceL" style="width:410px;">$ npm install -g cnpm </span> 全局安装CNPM<br><span class="spaceY spaceL" style="width:410px;">$ npm install -g cnpm - -registry=<a href="https://registry.npm.taobao.org" target="_blank" rel="noopener">https://registry.npm.taobao.org</a></span> 全局安装CNPM并切换源</p><p><strong>注意</strong> 在命令行工具中执行上面命令的时候<code>--</code>中间没有空格。</p><p>在全局安装<code>CNPM</code>的时候如果切换了源，将会从<a href="https://registry.npm.taobao.org/" target="_blank" rel="noopener">Registry.npm.taobao.org</a>来安装模块。当安装的时候如果发现安装的模块还没有同步过来, 那么淘宝NPM会自动在后台进行同步, 并且会让你从官方NPM <a href="https://registry.npmjs.org/" target="_blank" rel="noopener">Registry.npmjs.org</a>进行安装. 当下次再安装这个模块的时候则直接从淘宝NPM安装。</p><div class="titleX"><strong>查看CNPM版本</strong></div><br><span class="spaceY" style="width:100px;">$ cnpm -v</span> 查看cnpm的版本信息<br><br><div class="titleX"><strong>包的安装</strong></div><p><code>CNPM</code>支持 <code>npm</code> 除了 <code>publish</code> 之外的所有命令，而且这些命令的使用方式和<code>npm</code>完全一致。</p><p><span class="spaceY spaceL" style="width:160px;">$ cnpm install xxx</span> 安装指定包到当前路径(<code>局部安装</code>)<br><span class="spaceY spaceL" style="width:160px;">$ cnpm install -g xxx</span> 安装指定包到全局包安装路径(<code>全局安装</code>)</p><p>这里简单列出上面几个命令的执行演示。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ npm install cnpm -g --registry=https://registry.npm.taobao.org</span><br><span class="line">npm WARN deprecated socks@1.1.10: If using 2.x branch, please upgrade to at least 2.1.6 </span><br><span class="line">to avoid a serious bug with socket data flow and an import issue introduced <span class="keyword">in</span> 2.1.0</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/cnpm -&gt; /usr/<span class="built_in">local</span>/lib/node_modules/cnpm/bin/cnpm</span><br><span class="line">+ cnpm@6.0.0</span><br><span class="line">added 12 packages, removed 8 packages and updated 58 packages <span class="keyword">in</span> 29.841s</span><br><span class="line"></span><br><span class="line">wendingding$ cnpm -v</span><br><span class="line">cnpm@6.0.0 (/usr/<span class="built_in">local</span>/lib/node_modules/cnpm/lib/parse_argv.js)</span><br><span class="line">npm@6.4.1 (/usr/<span class="built_in">local</span>/lib/node_modules/cnpm/node_modules/npm/lib/npm.js)</span><br><span class="line">node@8.9.3 (/usr/<span class="built_in">local</span>/bin/node)</span><br><span class="line">npminstall@3.16.0 (/usr/<span class="built_in">local</span>/lib/node_modules/cnpm/node_modules/npminstall/lib/index.js)</span><br><span class="line">prefix=/usr/<span class="built_in">local</span> </span><br><span class="line">darwin x64 17.4.0 </span><br><span class="line">registry=https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line">wendingding$ cnpm install jquery</span><br><span class="line">✔ Installed 1 packages</span><br><span class="line">✔ Run 0 scripts</span><br><span class="line">✔ All packages installed (1 packages installed from npm registry, </span><br><span class="line">used 624ms(network 622ms), speed 660.5kB/s, json 1(5.19kB), tarball 405.64kB)</span><br><span class="line"></span><br><span class="line">dingding:cnpm wendingding$ cnpm install -g jquery</span><br><span class="line">Downloading jquery to /usr/<span class="built_in">local</span>/lib/node_modules/jquery_tmp</span><br><span class="line">Copying /usr/<span class="built_in">local</span>/lib/node_modules/jquery_tmp/_jquery@3.3.1@jquery </span><br><span class="line">to /usr/<span class="built_in">local</span>/lib/node_modules/jquery</span><br><span class="line">Installing jquery<span class="string">'s dependencies </span></span><br><span class="line"><span class="string">to /usr/local/lib/node_modules/jquery/node_modules</span></span><br><span class="line"><span class="string">All packages installed (used 4ms(network 2ms), speed 0B/s, json 0(0B), tarball 0B)</span></span><br></pre></td></tr></table></figure></p><div class="titleX"><strong>同步模块</strong></div><p><span class="spaceY" style="width:200px;">$ cnpm sync xxx</span> 同步指定的模块。</p><p><code>CNPM</code>还支持同步模块，只需要使用<code>sync</code>命令即可，下面列出同步模块命令的执行细节。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ cnpm sync jquery</span><br><span class="line">Start sync [<span class="string">"jquery"</span>].</span><br><span class="line">sync jquery, PUT https://registry.npm.taobao.org/jquery/sync?publish=<span class="literal">false</span>&amp;nodeps=<span class="literal">false</span></span><br><span class="line">logurl: https://npm.taobao.org/sync/jquery<span class="comment">#logid=6065624</span></span><br><span class="line">[2018-11-27 10:16:56] </span><br><span class="line">    user: anonymous, sync jquery worker start, 1 concurrency, </span><br><span class="line">    nodeps: <span class="literal">false</span>, publish: <span class="literal">false</span>, syncUpstreamFirst: <span class="literal">false</span></span><br><span class="line">[2018-11-27 10:16:56] ----------------- Syncing jquery -------------------</span><br><span class="line">[2018-11-27 10:16:56] </span><br><span class="line">  [c<span class="comment">#0] [jquery] package(https://r.cnpmjs.org/jquery) status: 200,</span></span><br><span class="line">  dist-tags: &#123;<span class="string">"beta"</span>:<span class="string">"3.3.1"</span>,<span class="string">"latest"</span>:<span class="string">"3.3.1"</span>&#125;, </span><br><span class="line">  time.modified: 2018-01-20T17:27:17.000Z, unpublished: null, start...</span><br><span class="line">[2018-11-27 10:16:56]   [jquery] found 0 missing star users</span><br><span class="line">[2018-11-27 10:16:56]   [jquery] all versions are exists</span><br><span class="line">[2018-11-27 10:16:56]   [jquery] no versions need to deleted</span><br><span class="line">[2018-11-27 10:16:56]   [jquery] all 383 npm users exists</span><br><span class="line">[2018-11-27 10:16:56] [c<span class="comment">#0] [jquery] synced success, 0 versions: </span></span><br><span class="line">[2018-11-27 10:16:56] ----------------- Synced jquery success -------------------</span><br><span class="line">[2018-11-27 10:16:56] [<span class="keyword">done</span>] Sync jquery package finished, 1 success, 0 fail</span><br><span class="line">Success: [ jquery ]</span><br><span class="line">Fail: [  ]</span><br><span class="line">Sync all packages <span class="keyword">done</span>, successed: [<span class="string">"jquery"</span>], failed: []</span><br></pre></td></tr></table></figure></p><h4 id="3-0-番外篇"><a href="#3-0-番外篇" class="headerlink" title="3.0 番外篇"></a>3.0 番外篇</h4><p>我们使用CNPM的主要原因在于它在处理包的时候速度更快，很多人认为它的可取之处仅在于使用了国内的镜像，其实就算不用国内的镜像，CNPM的安装速度相对NPM也要更快一些。这是因为<strong>CNPM在处理的时候会把一些包缓存到<code>node_module/.npminstall</code>目录下，再以符号链接的方式将依赖目录链接到其对应的路径，这样做的好处是相同版本的包在安装的过程中实际上只有一份实体</strong>。</p><p><code>CNPM</code>截止本文最新的版本<code>6.0.0</code>,在目录结构和依赖支持方面它的4.2以及4.3+版本是比较重要的一个分水岭。在4.2的版本里，它的目录结构和<code>NPM 2</code>保持一致，是嵌入式的结构。后来因为<code>NPM 3</code>的原因导致很多前端以及部分Node依赖在NPM 2下无法正常工作。</p><p>因此，在4.3版本中CNMP为前端开发者加入了扁平化的支持，即后期的版本中除按照嵌入式目录结构安装依赖外，还会顺便将计算得到的依赖(<strong>依赖</strong> 、<strong>依赖的依赖</strong>或者是<strong>依赖的特定版本</strong>)存放一份到node_moudles目录下，不过这也导致<strong style="color:#f00">node_moubles下目录成群···</strong></p><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://camo.githubusercontent.com/b674d29f60a0c9b6474843a70d305b7ab6c8da99/68747470733a2f2f7261772e6769746875622e636f6d2f636e7
      
    
    </summary>
    
    
      <category term="Node系列" scheme="https://weibo.com/u/3800117445/tags/Node%E7%B3%BB%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>Node系列-npm</title>
    <link href="https://weibo.com/u/3800117445/2018/11/24/Node%E7%B3%BB%E5%88%97-npm/"/>
    <id>https://weibo.com/u/3800117445/2018/11/24/Node系列-npm/</id>
    <published>2018-11-24T15:21:13.000Z</published>
    <updated>2018-11-27T01:09:52.627Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://npm.community/uploads/npm1/original/1X/ddff80661892358cd69fe28b6ca91718589a7aa0.png" style="width:100px"></p><div class="tip">本文输出Node中和包管理有关的基本内容，即npm的使用。</div><h4 id="1-0-简单介绍"><a href="#1-0-简单介绍" class="headerlink" title="1.0 简单介绍"></a>1.0 简单介绍</h4><p><a href="https://www.npmjs.com/" target="_blank" rel="noopener">npm</a>全称<code>Node packAge Manager</code>是<a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node</a>官方提供的<strong>包管理工具</strong>，下面列出包管理工具的功能边界。</p><blockquote><p>❏  注册机制<br>❏  文件存储<br>❏  上传下载<br>❏  依赖分析</p></blockquote><p>对于普通开发者而言包管理工具最主要的作用就是下载和安装(<code>Node</code>)包，前端开发中常用的包管理工具还有<a href="https://bower.io/" target="_blank" rel="noopener">Bower</a>，Bower的具体使用可以参考<a href="http://wendingding.com/2018/05/14/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%B3%BB%E5%88%97[01]%20%20Bower%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/" target="_blank" rel="noopener">Bower包管理工具的使用</a>。Node应用开发中类似的包管理工具还有<a href="https://github.com/cnpm/cnpm" target="_blank" rel="noopener">CNPM</a>以及<a href="https://yarn.bootcss.com/" target="_blank" rel="noopener">Yarn</a>等。</p><p>在<a href="https://www.npmjs.com/" target="_blank" rel="noopener">npm</a>网站上有数以万计的Node包，具体使用的时候我们可以在命令行窗口中通过执行npm相关的命令来下载和管理需要的(<code>Node</code>)包。npm的相关命令主要涉及包的<strong>搜索</strong>、<strong>下载&amp;&amp;安装</strong>、<strong>卸载</strong>以及<strong>更新</strong>等。</p><h4 id="2-0-基本命令"><a href="#2-0-基本命令" class="headerlink" title="2.0 基本命令"></a>2.0 基本命令</h4><div class="titleX"><strong>安装</strong></div><p>通常npm工具在安装Node.js环境(<a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node的安装直接到官网点击下载链接</a>)的时候会跟随<code>Node</code>一起安装，可以通过在命令行中输入下面的命令来查看安装是否成功。</p><p><span class="spaceY">$ node -v</span> 查看node的版本信息<br><span class="spaceY">$ npm  -v</span> 查看npm的版本信息，也可以使用<code>$npm -version</code>或者<code>$npm --v</code>指令。</p><p><strong>技巧</strong> 使用<code>$ npm version</code>可以查看更详细的信息。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">wendingding:npm wendingding$ npm -version</span><br><span class="line">5.5.1</span><br><span class="line"></span><br><span class="line">wendingding:npm wendingding$ npm version</span><br><span class="line">&#123; npm: <span class="string">'5.5.1'</span>,</span><br><span class="line">  ares: <span class="string">'1.10.1-DEV'</span>,</span><br><span class="line">  cldr: <span class="string">'31.0.1'</span>,</span><br><span class="line">  http_parser: <span class="string">'2.7.0'</span>,</span><br><span class="line">  icu: <span class="string">'59.1'</span>,</span><br><span class="line">  modules: <span class="string">'57'</span>,</span><br><span class="line">  nghttp2: <span class="string">'1.25.0'</span>,</span><br><span class="line">  node: <span class="string">'8.9.3'</span>,</span><br><span class="line">  openssl: <span class="string">'1.0.2n'</span>,</span><br><span class="line">  tz: <span class="string">'2017b'</span>,</span><br><span class="line">  unicode: <span class="string">'9.0'</span>,</span><br><span class="line">  uv: <span class="string">'1.15.0'</span>,</span><br><span class="line">  v8: <span class="string">'6.1.534.48'</span>,</span><br><span class="line">  zlib: <span class="string">'1.2.11'</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><div class="titleX"><strong>帮助</strong></div><p>在通过命令行工具来练习和学习的时候，建议总是从工具的帮助指令开始。</p><p><span class="spaceY">$ npm help</span>  查看node的使用帮助，也可以使用<code>$npm -h</code>或者<code>$npm --h</code>指令。</p><p>这里列出<code>help指令</code>的执行细节。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">wendingding:~ wendingding$ npm <span class="built_in">help</span></span><br><span class="line"></span><br><span class="line">Usage: npm &lt;<span class="built_in">command</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="built_in">where</span> &lt;<span class="built_in">command</span>&gt; is one of:</span><br><span class="line">    access, adduser, bin, bugs, c, cache, completion, config,</span><br><span class="line">    ddp, dedupe, deprecate, dist-tag, docs, doctor, edit,</span><br><span class="line">    explore, get, <span class="built_in">help</span>, <span class="built_in">help</span>-search, i, init, install,</span><br><span class="line">    install-test, it, link, list, ln, login, <span class="built_in">logout</span>, ls,</span><br><span class="line">    outdated, owner, pack, ping, prefix, profile, prune,</span><br><span class="line">    publish, rb, rebuild, repo, restart, root, run, run-script,</span><br><span class="line">    s, se, search, <span class="built_in">set</span>, shrinkwrap, star, stars, start, stop, t,</span><br><span class="line">    team, <span class="built_in">test</span>, token, tst, un, uninstall, unpublish, unstar,</span><br><span class="line">    up, update, v, version, view, whoami</span><br><span class="line"></span><br><span class="line">npm &lt;<span class="built_in">command</span>&gt; -h     quick <span class="built_in">help</span> on &lt;<span class="built_in">command</span>&gt;</span><br><span class="line">npm -l           display full usage info</span><br><span class="line">npm <span class="built_in">help</span> &lt;term&gt;  search <span class="keyword">for</span> <span class="built_in">help</span> on &lt;term&gt;</span><br><span class="line">npm <span class="built_in">help</span> npm     involved overview</span><br><span class="line"></span><br><span class="line">Specify configs <span class="keyword">in</span> the ini-formatted file:</span><br><span class="line">    /Users/文顶顶/.npmrc</span><br><span class="line">or on the <span class="built_in">command</span> line via: npm &lt;<span class="built_in">command</span>&gt; --key value</span><br><span class="line">Config info can be viewed via: npm <span class="built_in">help</span> config</span><br><span class="line"></span><br><span class="line">npm@5.5.1 /usr/<span class="built_in">local</span>/lib/node_modules/npm</span><br></pre></td></tr></table></figure></p><p>通过查看上面的帮助信息，我们可以知道npm的主要命令<code>where &lt;command&gt; is one of下面的列表项</code>以及这些命令的主要使用方式<code>npm &lt;command&gt;</code>。我们可以通过<code>npm &lt;command&gt; -h</code>的方式来学习某个特定命令的使用，下面给出示例。</p><p><span class="spaceY spaceL">$ npm init  -h</span>    查看init初始化命令的使用方式。<br><span class="spaceY spaceL">$ npm search  -h</span>  查看search搜索命令的使用方式。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wendingding:~ wendingding$ npm init -h</span><br><span class="line">npm init [--force|-f|--yes|-y]</span><br><span class="line">wendingding:~ wendingding$ npm search -h</span><br><span class="line">npm search [--long] [search terms ...]</span><br><span class="line"></span><br><span class="line">aliases: s, se, find</span><br></pre></td></tr></table></figure><p>通过命令行执行的结果我们清楚了<code>init</code>初始化指令后面还可以跟<code>--force或--yes</code>等指令，而<code>search</code>搜索指令后面可以跟<code>--long</code>指令(以更详细的方式显示搜索结果)且支持搜索多个关键词。<code>aliases:s , se , find</code>表明<code>search</code>指令可以使用<code>s , se 或者是find</code>来替换，它们的作用是等价的。</p><div class="titleX"><strong>搜索和查看包信息</strong></div><p>我们可以通过下面的搜索命令来搜索和查看<a href="https://www.npmjs.com/" target="_blank" rel="noopener">Node官方包仓库</a>中的包信息。</p><p><span class="spaceY spaceL">$ npm search xx</span>    搜索指定的包，使用<code>--long</code>可以查看更详细的信息。<br><span class="spaceY spaceL">$ npm view xxxx</span>             查看指定包所使用的<code>package.json</code>文件信息。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">wendingding:~ wendingding$ npm search jquery</span><br><span class="line">NAME                      | DESCRIPTION          | AUTHOR          | DATE       </span><br><span class="line">jquery                    | JavaScript library…  | =dmethvin…      | 2018-01-20 </span><br><span class="line">jquery-ui                 | A curated <span class="built_in">set</span> of…    | =scott.gonzalez… | 2016-09-14</span><br><span class="line">...省略剩下内容</span><br><span class="line"></span><br><span class="line">wendingding:~ wendingding$ npm search --long jquery</span><br><span class="line">NAME                      | DESCRIPTION          | AUTHOR          | DATE       </span><br><span class="line">jquery                    | JavaScript library   | =dmethvin =mgol | 2018-01-20 </span><br><span class="line">                          | <span class="keyword">for</span> DOM operations   | =scott.gonzalez |            </span><br><span class="line">                          |                      | =timmywil       |               </span><br><span class="line">jquery-ui                 | A curated <span class="built_in">set</span> of     | =scott.gonzalez | 2016-09-14 </span><br><span class="line">                          | user interface       | =jzaefferer     |            </span><br><span class="line">                          | interactions,        | =devongovett    |            </span><br><span class="line">                          | effects, widgets,    |                 |            </span><br><span class="line">                          | and themes built on  |                 |            </span><br><span class="line">                          | top of the jQuery    |                 |            </span><br><span class="line">                          | JavaScript Library.  |                 |            </span><br><span class="line">···省略剩下内容      </span><br><span class="line"></span><br><span class="line">wendingding:~ wendingding$ npm view jquery</span><br><span class="line">&#123; name: <span class="string">'jquery'</span>,</span><br><span class="line">  description: <span class="string">'JavaScript library for DOM operations'</span>,</span><br><span class="line">  <span class="string">'dist-tags'</span>: &#123; beta: <span class="string">'3.3.1'</span>, latest: <span class="string">'3.3.1'</span> &#125;,</span><br><span class="line">  versions: </span><br><span class="line">   [ <span class="string">'1.5.1'</span>，···<span class="string">'3.3.1'</span> ]</span><br><span class="line">  repository: &#123; <span class="built_in">type</span>: <span class="string">'git'</span>, url: <span class="string">'git+https://github.com/jquery/jquery.git'</span> &#125;,</span><br><span class="line">  readmeFilename: <span class="string">'README.md'</span>,</span><br><span class="line">  homepage: <span class="string">'https://jquery.com'</span>,</span><br><span class="line">  keywords: [ <span class="string">'jquery'</span>, <span class="string">'javascript'</span>, <span class="string">'browser'</span>, <span class="string">'library'</span> ],</span><br><span class="line">  bugs: &#123; url: <span class="string">'https://github.com/jquery/jquery/issues'</span> &#125;,</span><br><span class="line">  license: <span class="string">'MIT'</span>,</span><br><span class="line">  title: <span class="string">'jQuery'</span>,</span><br><span class="line">  version: <span class="string">'3.3.1'</span>,</span><br><span class="line">  main: <span class="string">'dist/jquery.js'</span>,</span><br><span class="line">  dependencies: &#123;&#125;,</span><br><span class="line">  devDependencies: &#123; ···省略··· &#125;</span><br><span class="line">  scripts: &#123; ···省略··· &#125;</span><br><span class="line">  commitplease: &#123; ···省略··· &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="tip"><strong>拓展</strong> 前面列出了以jquery为例执行搜索命令的细节，除使用<code>$ npm search &lt;pkg&gt;</code>命令来执行搜索外，使  用<code>$ npm find xx</code>或<code>$ npm s xx</code>或<code>$ npm se xx</code>命令也能达到同样的效果。</div><div class="titleX"><strong>初始化</strong></div><p><span class="spaceY spaceL">$ npm init </span>    初始化操作，用于生成描述文件。<br><span class="spaceY spaceL">$ npm init -y</span>    初始化操作，使用默认值自动生成描述文件。</p><p><code>init</code>指令用来生成项目的配置(描述)文件(<code>package.json</code>)。该文件中包含了项目的名称、版本、作者、包依赖关系等信息，每个Npm包都拥有自己的<code>package.json</code>文件。在进行初始化的时候，如果使用<code>-y</code>或者<code>--yes</code>选项那么系统将会使用默认值来自动的生成描述文件。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">wendingding:npm wendingding$ npm init --yes</span><br><span class="line">Wrote to /Users/文顶顶/Desktop/npm/package.json:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"npm"</span>,</span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="string">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">  <span class="string">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"jquery"</span>: <span class="string">"^3.3.1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"devDependencies"</span>: &#123;&#125;,</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"keywords"</span>: [],</span><br><span class="line">  <span class="string">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>列出<code>init</code>初始化命令在使用<code>-y或--yes选项</code>时，从当前目录中提取的默认值填充规则。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- name：当前目录名称</span><br><span class="line">- version：总是为<span class="number">1.0</span><span class="number">.0</span>版本</span><br><span class="line">- description：来自README的信息，或空字符串 <span class="string">""</span></span><br><span class="line">- main：总是为index.js文件</span><br><span class="line">- scripts：默认情况下会创建一个空test脚本</span><br><span class="line">- keywords：空数组[]</span><br><span class="line">- author：空字符串</span><br><span class="line">- license： ISC</span><br><span class="line">- bugs：当前目录中的信息（如果存在）</span><br><span class="line">- homepage：当前目录中的信息（如果存在）</span><br><span class="line">- dependencies：空对象，如果当前目录存在已安装的包则显示。</span><br><span class="line">- devDependencies：空对象。</span><br></pre></td></tr></table></figure><div class="titleX"><strong>包的安装和卸载</strong></div><p>在下载和安装相关Node包的时候，我们可以选择<strong>局部安装</strong>或<strong>全局安装</strong>，如果采用了全局安装的策略那么系统中所有的项目均能使用该包。</p><p><span class="spaceY spaceL">$ npm install </span>    安装配置文件中列出的所有依赖包。<br><span class="spaceY spaceL">$ npm install less</span>    安装指定的包到当前路径(<code>局部安装</code>)。<br><span class="spaceY spaceL">$ npm install -g less</span> 安装指定的包到全局包安装路径(<code>全局安装</code>)</p><p><code>install</code>命令会将指定的包安装在当前目录下的<code>node_modules</code>子文件夹中，安装好后在当前项目中(如果是node项目)可以通过require来进行加载。<code>-g</code>选项是global全局的意思，表示把指定的包安装在全局包的安装路径中(<code>/usr/local/lib/node_modules</code>)。</p><p>下面列出<code>less</code>的安装细节。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wendingding:npm wendingding$ npm install less</span><br><span class="line">+ less@3.8.1</span><br><span class="line">added 60 packages <span class="keyword">in</span> 12.456s</span><br><span class="line">wendingding:npm wendingding$ npm install -g less</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/lessc -&gt; /usr/<span class="built_in">local</span>/lib/node_modules/less/bin/lessc</span><br><span class="line">+ less@3.8.1</span><br><span class="line">added 60 packages <span class="keyword">in</span> 2.299s</span><br><span class="line">wendingding:npm wendingding$</span><br></pre></td></tr></table></figure><p><code>install</code> 命令同<code>i, isntall, add</code>等命令等价。<br><code>install</code> 命令的可选参数还有[–save-prod|–save-dev|–save-optional] [–save-exact] [–no-save]等。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--save     选项在安装包的时候会更新package.json文件的dependencies字段。</span><br><span class="line">--save-dev 选项在安装包的时候会更新package.json文件devDependencies字段(保存包名:版本信息)。</span><br></pre></td></tr></table></figure></p><p>如果我们需要把项目或系统中某些特定的Node模块移除，那么可以使用<code>uninstall</code>命令来卸载，该命令同<code>un, unlink, remove, rm, r</code>等命令等价。</p><p><span class="spaceY spaceL">$ npm uninstall less</span>    卸载当前项目中的指定包(<code>局部</code>)。<br><span class="spaceY spaceL">$ npm uninstall -g less</span> 卸载全局包安装路径下指定的包(<code>全局</code>)</p><p>下面列出<code>less</code>的卸载细节(如果是要卸载全局安装的包那么请使用-g选项)。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wendingding:npm wendingding$ npm remove less</span><br><span class="line">npm WARN saveError ENOENT:no such file or directory, open <span class="string">'/Users/文顶顶/npm/package.json'</span></span><br><span class="line">npm WARN enoent ENOENT:no such file or directory, open <span class="string">'/Users/文顶顶/npm/package.json'</span></span><br><span class="line">npm WARN npm No description</span><br><span class="line">removed 1 package <span class="keyword">in</span> 0.737s</span><br><span class="line"></span><br><span class="line">wendingding:npm wendingding$ npm remove -g less</span><br><span class="line">removed 60 packages <span class="keyword">in</span> 0.827s</span><br></pre></td></tr></table></figure></p><div class="titleX"><strong>更新</strong></div><p>我们可以通过<code>update</code>命令来执行更新操作，在进行更新的时候可以指定包名，也可以通过<code>-g</code>选项来指定要更新全局安装的包，<code>&lt;pkg&gt;</code>指代的是包的名称，譬如jsonfile或者jquery等。</p><p><span class="spaceY spaceL">$ npm update </span>      更新当前项目中所有的包。<br><span class="spaceY spaceL">$ npm update -g </span>   更新全局安装路径下所有的包。<br><span class="spaceY spaceL">$ npm update  pkg</span>      更新当前项目中安装的指定包。<br><span class="spaceY spaceL">$ npm update -g  pkg</span>   更新全局安装路径下安装的指定包。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">wendingding:npm wendingding$ npm list</span><br><span class="line">/Users/文顶顶/Desktop/npm</span><br><span class="line">└── (empty)</span><br><span class="line"></span><br><span class="line">wendingding:npm wendingding$ npm install jquery@3.1.0</span><br><span class="line">···省略内容</span><br><span class="line">+ jquery@3.1.0</span><br><span class="line">added 1 package <span class="keyword">in</span> 5.569s</span><br><span class="line"></span><br><span class="line">wendingding:npm wendingding$ npm update jquery</span><br><span class="line">···省略内容</span><br><span class="line"></span><br><span class="line">+ jquery@3.3.1</span><br><span class="line">updated 1 package <span class="keyword">in</span> 0.547s</span><br><span class="line"></span><br><span class="line">wendingding:npm wendingding$ npm list</span><br><span class="line">/Users/文顶顶/Desktop/npm</span><br><span class="line">└── jquery@3.3.1</span><br></pre></td></tr></table></figure><p>上面的命令行中，我们首先通过<code>$ npm list</code>命令列出当前项目中已经安装的Node模块，然后下载并安装了jQuery框架的3.1.0版本，继而通过<code>$ npm update jquery</code>指令来把jQuery更新到<code>jquery@3.3.1</code>最新版本。<code>update</code>命令也可以使用简写<code>up</code>来替代。</p><p><div class="titleX"><strong>其它常用命令</strong></div><br><span class="spaceY spaceL">$ npm run </span>       运行script字段定义的命令。<br><span class="spaceY spaceL">$ npm list </span>      列出当前项目中安装的所有包。<br><span class="spaceY spaceL">$ npm list -g</span>      列出系统中全局安装的所有包。<br><span class="spaceY spaceL">$ npm root -g</span>      列出系统中全局安装包的安装路径。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wendingding:npm wendingding$ npm root -g</span><br><span class="line">/usr/<span class="built_in">local</span>/lib/node_modules</span><br></pre></td></tr></table></figure><h4 id="3-0-番外篇"><a href="#3-0-番外篇" class="headerlink" title="3.0 番外篇"></a>3.0 番外篇</h4><p>npm工具最初由<a href="https://github.com/isaacs" target="_blank" rel="noopener">Isaac Z. Schlueter</a>(<code>艾萨克·施吕特</code>)开发，完全使用JavaScript实现。作者有说明实现npm项目的初衷，主要是当时考虑到模块管理问题的重要性，又因为其它平台如PHP的PEAR或Perl的CPAN等工具都存在诸多缺陷(<a href="https://github.com/nodejs/node-v0.x-archive/issues/5132#issuecomment-15432598" target="_blank" rel="noopener">点击查看作者实现npm的初衷</a>)，所以就自己动手实现了。</p><p><a href="https://github.com/isaacs" target="_blank" rel="noopener">Isaac Z. Schlueter</a>简介：npm作者 CEO ，Node.js的前BDFL，<a href="http://blog.izs.me" target="_blank" rel="noopener">Github主页</a>和<a href="http://blog.izs.me/" target="_blank" rel="noopener">个人博客</a>。</p><p class="titleX"> <strong>资料</strong> </p><p><a href="https://www.npmjs.com/" target="_blank" rel="noopener">npm官网</a><br><a href="https://docs.npmjs.com/" target="_blank" rel="noopener">npm文档</a><br><a href="https://github.com/npm/cli" target="_blank" rel="noopener">npm源码</a><br><a href="https://npm.community/" target="_blank" rel="noopener">npm讨论</a></p><p>截止日前，npm管理的模块(包)总量已经超出70万，下面给出和其他同类型工具的横向对比(<a href="http://www.modulecounts.com/" target="_blank" rel="noopener">数据来源</a>)。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/node_count.png?raw=true" style="width:500px"></p><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;https://npm.community/uploads/npm1/original/1X/ddff80661892358cd69fe28b6ca91718589a7aa0.png&quot; style=&quot;width:100px&quot;&gt;&lt;/p&gt;
&lt;div clas
      
    
    </summary>
    
    
      <category term="Node系列" scheme="https://weibo.com/u/3800117445/tags/Node%E7%B3%BB%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>Node系列-package</title>
    <link href="https://weibo.com/u/3800117445/2018/11/24/Node%E7%B3%BB%E5%88%97-package/"/>
    <id>https://weibo.com/u/3800117445/2018/11/24/Node系列-package/</id>
    <published>2018-11-24T15:20:13.000Z</published>
    <updated>2018-11-26T14:37:59.673Z</updated>
    
    <content type="html"><![CDATA[<div class="tip">本文输出Node中和包有关的基本内容。</div><h4 id="1-0-Node中的模块和包"><a href="#1-0-Node中的模块和包" class="headerlink" title="1.0 Node中的模块和包"></a>1.0 Node中的模块和包</h4><p><div style="background:#ddd;padding-left:20px"><strong>模块</strong></div><br>在Node中，<strong>以模块为单位来划分所有的功能。</strong></p><p>从某种角度来说，Node应用都由大量模块组成，每个模块都是一个JavaScript文件。Node提供了完成的模块加载机制，<code>模块</code>和<code>模块加载机制</code>这种设计让我们能够将应用程序划分成多个不同的部分，可以对这些部分进行协同管理，还能够——</p><ul><li>提高应用程序的开发效率</li><li>提高应用程序代码的可读性</li><li>减少应用程序的代码量(重用代码)</li></ul><p><div style="background:#ddd;padding-left:20px"><strong>包</strong></div><br>在Node中，<strong>通过包来对一组具有相互依赖关系的模块进行统一管理。</strong></p><p>Node中的包事实上所指代的是一个文件目录，该目录中主要包含以下内容：</p><blockquote><p>①  &nbsp;&nbsp;在<code>bin</code>子目录中存放二进制文件。<br>②  &nbsp;&nbsp;在<code>lib</code>子目录中存放JavaScript文件。<br>③  &nbsp;&nbsp;在<code>doc</code>子目录中存放与包使用相关的说明性文档。<br>④  &nbsp;&nbsp;在<code>dist</code>子目录中存放JavaScript文件(发布)。<br>⑤  &nbsp;&nbsp;在<code>test</code>子目录中存放用于对包进行单元测试的文件。<br>⑥  &nbsp;&nbsp;在包的根目录中存放包含用于描述包信息的<code>package.json</code>文件。</p></blockquote><p>这里列出典型的包的目录结构：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">//该目录结构通过使用$ npm install less命令安装并进入到less包文件目录获取。</span><br><span class="line">.</span><br><span class="line">├── CHANGELOG.md</span><br><span class="line">├── CONTRIBUTING.md</span><br><span class="line">├── Gruntfile.js</span><br><span class="line">├── LICENSE</span><br><span class="line">├── README.md</span><br><span class="line">├── appveyor.yml</span><br><span class="line">├── bin</span><br><span class="line">│   └── lessc</span><br><span class="line">├── bower.json</span><br><span class="line">├── browser.js</span><br><span class="line">├── dist</span><br><span class="line">│   ├── less.js</span><br><span class="line">│   └── less.min.js</span><br><span class="line">├── index.js</span><br><span class="line">├── lib</span><br><span class="line">│   ├── less</span><br><span class="line">│   ├── less-browser</span><br><span class="line">│   ├── less-node</span><br><span class="line">│   └── <span class="built_in">source</span>-map</span><br><span class="line">├── package.json</span><br><span class="line">└── <span class="built_in">test</span></span><br><span class="line">    ├── browser</span><br><span class="line">    ├── copy-bom.js</span><br><span class="line">    ├── css</span><br><span class="line">    ├── data</span><br><span class="line">    ├── import-module</span><br><span class="line">    ├── index.js</span><br><span class="line">    ├── less</span><br><span class="line">    ├── less-bom</span><br><span class="line">    ├── less-test.js</span><br><span class="line">    ├── modify-vars.js</span><br><span class="line">    ├── plugins</span><br><span class="line">    └── sourcemaps</span><br></pre></td></tr></table></figure></p><h4 id="2-0-package-json文件"><a href="#2-0-package-json文件" class="headerlink" title="2.0 package.json文件"></a>2.0 package.json文件</h4><p><strong><code>package.json文件</code></strong>用于对包进行描述，JSON格式文件。</p><blockquote><p><strong>package.json文件的主要字段</strong></p></blockquote><p><span class="spaceX" style="background:#195;color:#fff">name </span>包的名称。<br><span class="spaceX" style="background:#195;color:#fff">scripts </span>定义脚本命令。<br><span class="spaceX">main </span>包的主文件。<br><span class="spaceX" style="background:#195;color:#fff">version </span>包的版本号。<br><span class="spaceX">homepage </span>包的主页地址。<br><span class="spaceX">bugs </span>bug的提交地址，可能是url地址或邮箱地址。<br><span class="spaceX">author </span>作者信息(对象)，包含作者姓名(<code>name</code>)和主页(<code>url</code>)以及邮箱(<code>email</code>)等。<br><span class="spaceX">license </span>该包采用的开源协议，常见的有MIT、Apache 和GPL等。<br><span class="spaceX">keywords </span>用于搜索的关键字数组( <code>$ npm search xxx</code>)。<br><span class="spaceX">description </span>包描述信息，对包进行简单的说明。<br><span class="spaceX">repository </span>托管仓库相关的信息，通常包括仓库的类型(<code>type</code>)和托管地址(<code>url</code>)。<br><span class="spaceX" style="background:#195;color:#fff">dependencies </span>运行时需要依赖的包(对象类型：由包名和版本信息组成)。<br><span class="spaceX" style="background:#195;color:#fff">devDependencies </span>开发时需要依赖的包(对象类型：由包名和版本信息组成),上线时不会打包。</p><p>这里列出典型的json文件的内容：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">//备注：列出的是jQuery框架的package.josn文件,可通过$ npm install jquery安装</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"author"</span>: &#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"JS Foundation and other contributors"</span>,</span><br><span class="line">    <span class="attr">"url"</span>: <span class="string">"https://github.com/jquery/jquery/blob/3.3.1/AUTHORS.txt"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"bugs"</span>: &#123;</span><br><span class="line">    <span class="attr">"url"</span>: <span class="string">"https://github.com/jquery/jquery/issues"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"bundleDependencies"</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">"commitplease"</span>: &#123;</span><br><span class="line">    <span class="attr">"nohook"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"components"</span>: [</span><br><span class="line">      <span class="string">"Docs"</span>,</span><br><span class="line">      <span class="string">"Tests"</span>,</span><br><span class="line">      <span class="string">"Build"</span>,</span><br><span class="line">      <span class="string">"Support"</span>,</span><br><span class="line">      <span class="string">"Release"</span>,</span><br><span class="line">      <span class="string">"Core"</span>,</span><br><span class="line">      <span class="string">"Ajax"</span>,</span><br><span class="line">      <span class="string">"Attributes"</span>,</span><br><span class="line">      <span class="string">"Callbacks"</span>,</span><br><span class="line">      <span class="string">"CSS"</span>,</span><br><span class="line">      <span class="string">"Data"</span>,</span><br><span class="line">      <span class="string">"Deferred"</span>,</span><br><span class="line">      <span class="string">"Deprecated"</span>,</span><br><span class="line">      <span class="string">"Dimensions"</span>,</span><br><span class="line">      <span class="string">"Effects"</span>,</span><br><span class="line">      <span class="string">"Event"</span>,</span><br><span class="line">      <span class="string">"Manipulation"</span>,</span><br><span class="line">      <span class="string">"Offset"</span>,</span><br><span class="line">      <span class="string">"Queue"</span>,</span><br><span class="line">      <span class="string">"Selector"</span>,</span><br><span class="line">      <span class="string">"Serialize"</span>,</span><br><span class="line">      <span class="string">"Traversing"</span>,</span><br><span class="line">      <span class="string">"Wrap"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"markerPattern"</span>: <span class="string">"^((clos|fix|resolv)(e[sd]|ing))|^(refs?)"</span>,</span><br><span class="line">    <span class="attr">"ticketPattern"</span>: <span class="string">"^((Closes|Fixes) ([a-zA-Z]&#123;2,&#125;-)[0-9]+)|^(Refs? [^#])"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">"deprecated"</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"JavaScript library for DOM operations"</span>,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"babel-core"</span>: <span class="string">"7.0.0-beta.0"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-for-of"</span>: <span class="string">"7.0.0-beta.0"</span>,</span><br><span class="line">    <span class="attr">"commitplease"</span>: <span class="string">"2.7.10"</span>,</span><br><span class="line">    <span class="attr">"core-js"</span>: <span class="string">"2.4.1"</span>,</span><br><span class="line">    <span class="attr">"eslint-config-jquery"</span>: <span class="string">"1.0.1"</span>,</span><br><span class="line">    <span class="attr">"grunt"</span>: <span class="string">"1.0.1"</span>,</span><br><span class="line">    <span class="attr">"grunt-babel"</span>: <span class="string">"7.0.0"</span>,</span><br><span class="line">    <span class="attr">"grunt-cli"</span>: <span class="string">"1.2.0"</span>,</span><br><span class="line">    <span class="attr">"grunt-compare-size"</span>: <span class="string">"0.4.2"</span>,</span><br><span class="line">    <span class="attr">"grunt-contrib-uglify"</span>: <span class="string">"3.0.1"</span>,</span><br><span class="line">    <span class="attr">"grunt-contrib-watch"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">    <span class="attr">"grunt-eslint"</span>: <span class="string">"20.0.0"</span>,</span><br><span class="line">    <span class="attr">"grunt-git-authors"</span>: <span class="string">"3.2.0"</span>,</span><br><span class="line">    <span class="attr">"grunt-jsonlint"</span>: <span class="string">"1.1.0"</span>,</span><br><span class="line">    <span class="attr">"grunt-karma"</span>: <span class="string">"2.0.0"</span>,</span><br><span class="line">    <span class="attr">"grunt-newer"</span>: <span class="string">"1.3.0"</span>,</span><br><span class="line">    <span class="attr">"grunt-npmcopy"</span>: <span class="string">"0.1.0"</span>,</span><br><span class="line">    <span class="attr">"gzip-js"</span>: <span class="string">"0.3.2"</span>,</span><br><span class="line">    <span class="attr">"husky"</span>: <span class="string">"0.14.3"</span>,</span><br><span class="line">    <span class="attr">"insight"</span>: <span class="string">"0.8.4"</span>,</span><br><span class="line">    <span class="attr">"jsdom"</span>: <span class="string">"5.6.1"</span>,</span><br><span class="line">    <span class="attr">"karma"</span>: <span class="string">"1.7.0"</span>,</span><br><span class="line">    <span class="attr">"karma-browserstack-launcher"</span>: <span class="string">"1.3.0"</span>,</span><br><span class="line">    <span class="attr">"karma-chrome-launcher"</span>: <span class="string">"2.2.0"</span>,</span><br><span class="line">    <span class="attr">"karma-firefox-launcher"</span>: <span class="string">"1.0.1"</span>,</span><br><span class="line">    <span class="attr">"karma-qunit"</span>: <span class="string">"1.2.1"</span>,</span><br><span class="line">    <span class="attr">"load-grunt-tasks"</span>: <span class="string">"3.5.2"</span>,</span><br><span class="line">    <span class="attr">"native-promise-only"</span>: <span class="string">"0.8.1"</span>,</span><br><span class="line">    <span class="attr">"promises-aplus-tests"</span>: <span class="string">"2.1.2"</span>,</span><br><span class="line">    <span class="attr">"q"</span>: <span class="string">"1.5.0"</span>,</span><br><span class="line">    <span class="attr">"qunit-assert-step"</span>: <span class="string">"1.0.3"</span>,</span><br><span class="line">    <span class="attr">"qunitjs"</span>: <span class="string">"1.23.1"</span>,</span><br><span class="line">    <span class="attr">"raw-body"</span>: <span class="string">"2.2.0"</span>,</span><br><span class="line">    <span class="attr">"requirejs"</span>: <span class="string">"2.3.3"</span>,</span><br><span class="line">    <span class="attr">"sinon"</span>: <span class="string">"2.3.7"</span>,</span><br><span class="line">    <span class="attr">"sizzle"</span>: <span class="string">"2.3.3"</span>,</span><br><span class="line">    <span class="attr">"strip-json-comments"</span>: <span class="string">"2.0.1"</span>,</span><br><span class="line">    <span class="attr">"testswarm"</span>: <span class="string">"1.1.0"</span>,</span><br><span class="line">    <span class="attr">"uglify-js"</span>: <span class="string">"3.3.4"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"homepage"</span>: <span class="string">"https://jquery.com"</span>,</span><br><span class="line">  <span class="attr">"keywords"</span>: [</span><br><span class="line">    <span class="string">"jquery"</span>,</span><br><span class="line">    <span class="string">"javascript"</span>,</span><br><span class="line">    <span class="string">"browser"</span>,</span><br><span class="line">    <span class="string">"library"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"license"</span>: <span class="string">"MIT"</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"dist/jquery.js"</span>,</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"jquery"</span>,</span><br><span class="line">  <span class="attr">"repository"</span>: &#123;</span><br><span class="line">    <span class="attr">"type"</span>: <span class="string">"git"</span>,</span><br><span class="line">    <span class="attr">"url"</span>: <span class="string">"git+https://github.com/jquery/jquery.git"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"build"</span>: <span class="string">"npm install &amp;&amp; grunt"</span>,</span><br><span class="line">    <span class="attr">"commitmsg"</span>: <span class="string">"node node_modules/commitplease"</span>,</span><br><span class="line">    <span class="attr">"jenkins"</span>: <span class="string">"npm run test:browserless"</span>,</span><br><span class="line">    <span class="attr">"precommit"</span>: <span class="string">"grunt lint:newer qunit_fixture"</span>,</span><br><span class="line">    <span class="attr">"start"</span>: <span class="string">"grunt watch"</span>,</span><br><span class="line">    <span class="attr">"test"</span>: <span class="string">"grunt &amp;&amp; grunt test:slow &amp;&amp; grunt karma:main"</span>,</span><br><span class="line">    <span class="attr">"test:browser"</span>: <span class="string">"grunt &amp;&amp; grunt karma:main"</span>,</span><br><span class="line">    <span class="attr">"test:browserless"</span>: <span class="string">"grunt &amp;&amp; grunt test:slow"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"title"</span>: <span class="string">"jQuery"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"3.3.1"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;tip&quot;&gt;本文输出Node中和包有关的基本内容。&lt;/div&gt;

&lt;h4 id=&quot;1-0-Node中的模块和包&quot;&gt;&lt;a href=&quot;#1-0-Node中的模块和包&quot; class=&quot;headerlink&quot; title=&quot;1.0 Node中的模块和包&quot;&gt;&lt;/a&gt;
      
    
    </summary>
    
    
      <category term="Node系列" scheme="https://weibo.com/u/3800117445/tags/Node%E7%B3%BB%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>javaScript系列 [09]-javaScript和JSON (拓展)</title>
    <link href="https://weibo.com/u/3800117445/2018/11/15/javaScript%E7%B3%BB%E5%88%97%20%5B09%5D-javaScript%E5%92%8CJSON(%E6%89%A9%E5%B1%95)/"/>
    <id>https://weibo.com/u/3800117445/2018/11/15/javaScript系列 [09]-javaScript和JSON(扩展)/</id>
    <published>2018-11-15T00:20:13.000Z</published>
    <updated>2018-11-21T07:40:12.358Z</updated>
    
    <content type="html"><![CDATA[<div class="tip">本文输出JSON搜索和JSON转换相关的内容，是对前两篇文章的补充。</div><h3 id="JSON搜索"><a href="#JSON搜索" class="headerlink" title="JSON搜索"></a>JSON搜索</h3><p>在特定的开发场景中，如果服务器端返回的JSON数据异常复杂(可能超过上万行)，那么必然就有对JSON文档进行搜索的需求。在对JSON文档进行搜索的时候，建议使用专业的JSON搜索类库和工具来实现，这可以极大的简化JSON文档搜索的工作并降低工作难度。</p><p>JSON搜索的具体适用场景：<span style="color:#195">对于某次API调用，我们只需要其中的部分数据，这种情况我们就可以根据某个标准来对返回的JSON内容进行搜索和过滤。</span></p><p>本文将会先后介绍多款处理JSON搜索的类库(工具)，包括但不限于<strong><code>JSONPath</code></strong>、<strong><code>JSON Pointer</code></strong>、<strong><code>jq</code></strong>等，在对各种方案进行介绍的时候将会从<strong>方案的优缺点、具体的使用方式</strong>等角度切入，开发中可以根据实际的开发场景和各工具自身的特点来进行选择。</p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>工具001 → jq</strong></span></p><p><strong><code>jq</code></strong>&nbsp;&nbsp;&nbsp;&nbsp;是一个提供了命令行界面的JSON搜索工具。<br><strong><code>功能</code></strong> 可使用自身特定的查询语法来过滤JSON和截取数组，类似于JSON中的sed。<br><strong><code>生态</code></strong> 除命令行外，拥有优秀的基于Web的jq测试器，甚至Node社区还以npm模块形式发布了<a href="https://www.npmjs.com/package/jq-tutorial" target="_blank" rel="noopener">教程</a>。<br><strong><code>优势</code></strong></p><ul><li>提供丰富的搜索和过滤功能。</li><li>大多数编程语言都对jq提供良好的支持。</li><li>jq相关文档质量较高，且拥有友好的交互式教程。</li><li>拥有优秀的<a href="https://jqplay.org/" target="_blank" rel="noopener">在线测试工具</a>，能够对查询提供快速反馈。</li><li>在命令行中能够很好的与cURL以及管道操作等协同工作。</li><li>使用C语言编写的，没有运行时依赖，可运行在Linux，OS X和Windows等平台。</li></ul><p><strong><code>资料</code></strong> <a href="https://stedolan.github.io/jq/" target="_blank" rel="noopener">官网</a> 、<a href="https://github.com/stedolan/jq" target="_blank" rel="noopener">Github仓库</a> 、 <a href="http://manpages.ubuntu.com/manpages/bionic/man1/jq.1.html?_ga=2.163034492.1318091186.1542254580-1927231673.1542254580" target="_blank" rel="noopener">Ubuntu-jq手册</a> 、 <a href="http://hyperpolyglot.org/json" target="_blank" rel="noopener">Hyperpolyglot JSON工具</a>、<a href="https://github.com/FasterXML/jackson" target="_blank" rel="noopener">Jackson类库</a>、<a href="https://rubygems.org/gems/ruby-jq" target="_blank" rel="noopener">Ruby-jq gem</a><br><strong><code>语法</code></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">======基本语法======</span><br><span class="line">.     输出所有的文档内容。</span><br><span class="line">|     管道符，传递数据流。</span><br><span class="line">.key  输出指定key对应的部分文档。</span><br><span class="line">.[ ]  输出数组中指定索引对应的元素。</span><br><span class="line"></span><br><span class="line">======查询语法示例========</span><br><span class="line">.person[0]获取JSON文档person数组中的第一个元素。</span><br><span class="line">.person[-1]获取JSON文档person数组中的最后一个元素。</span><br><span class="line">.person[0:3]获取JSON文档person数组中的前面三个元素。</span><br><span class="line">.person[] | select (.age&gt;20 ) 获取JSON文档中满足要求(age &gt; 20)的所有数据。</span><br></pre></td></tr></table></figure></p><p><strong><code>安装</code></strong></p><ul><li>OSX系统 建议使用<a href="https://brew.sh/" target="_blank" rel="noopener">Homebrew</a>来安装，具体命令为：<code>$ brew install jq</code></li><li>windows系统 建议使用<a href="https://chocolatey.org/" target="_blank" rel="noopener">Chocolatey NuGet</a>来安装，具体命令为：<code>$ chocolatey install jq</code></li><li>当然也可以通过<code>git clone</code>仓库源码来进行安装，具体细节以及其它系统处理请参考<a href="https://stedolan.github.io/jq/download/" target="_blank" rel="noopener">Download jq</a></li></ul><p>这里给出OSX系统中通过命令行安装<code>jq</code>的具体细节和示例。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ brew install jq</span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Installing dependencies <span class="keyword">for</span> jq: oniguruma</span><br><span class="line">==&gt; Installing jq dependency: oniguruma</span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/oniguruma-6.8.2.high_sierra</span><br><span class="line"><span class="comment">######################################################################## 100.0%</span></span><br><span class="line">==&gt; Pouring oniguruma-6.8.2.high_sierra.bottle.tar.gz</span><br><span class="line">🍺  /usr/<span class="built_in">local</span>/Cellar/oniguruma/6.8.2: 17 files, 1.2MB</span><br><span class="line">==&gt; Installing jq</span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/jq-1.5_3.high_sierra.bottle</span><br><span class="line"><span class="comment">######################################################################## 100.0%</span></span><br><span class="line">==&gt; Pouring jq-1.5_3.high_sierra.bottle.tar.gz</span><br><span class="line">🍺  /usr/<span class="built_in">local</span>/Cellar/jq/1.5_3: 19 files, 946.6KB</span><br><span class="line"></span><br><span class="line">wendingding$ jq --version</span><br><span class="line">jq-1.5</span><br></pre></td></tr></table></figure></p><div class="tip">在安装jq的时候，如果命令行报<span style="color:red">Error: Failure while executing: git config –local –replace-all homebrew.private true</span>错误，可以尝试先执行<code>$ xcode-select --install</code>命令然后重新安装。在安装的时候如果总是卡在Updating Homebrew…可以<code>control + C</code>停止更新。</div><p><strong><code>工具(jq-tutorial)</code></strong></p><p><a href="https://www.npmjs.com/package/jq-tutorial" target="_blank" rel="noopener">jq-tutorial</a>是node社区以npm模块的形式发布的jq教程，是学习jq使用的一个比较好用的工具，这里简单列出该模块的安装和使用示例，并对命令进行简单的说明。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ npm search jq-tutorial</span><br><span class="line">NAME                      | DESCRIPTION          | AUTHOR          | DATE       </span><br><span class="line">jq-tutorial               | Exercises <span class="keyword">for</span>…       | =rjz            | 2016-09-29 </span><br><span class="line"></span><br><span class="line">wendingding$ npm install -g jq-tutorial</span><br><span class="line">npm WARN notice [SECURITY] lodash has the following vulnerability: 1 low. </span><br><span class="line">Go here <span class="keyword">for</span> more details: https://nodesecurity.io/advisories?search=lodash version=2.4.2 </span><br><span class="line">-Run `npm i npm@latest -g` to upgrade npm version, and <span class="keyword">then</span> `npm audit` to get more info.</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/jq-tutorial -&gt; /usr/<span class="built_in">local</span>/lib/node_modules/jq-tutorial/bin/jq-tutorial</span><br><span class="line">+ jq-tutorial@0.0.5</span><br><span class="line">added 4 packages <span class="keyword">in</span> 20.012s</span><br><span class="line"></span><br><span class="line">wendingding$ jq-tutorial </span><br><span class="line">Run jq-tutorial with one of the following:</span><br><span class="line">  * pick</span><br><span class="line">  * objects</span><br><span class="line">  * mapping</span><br><span class="line">  * filtering</span><br><span class="line">  * output</span><br><span class="line">  * reduce</span><br><span class="line"></span><br><span class="line">wendingding$ jq-tutorial pick</span><br><span class="line">Pick</span><br><span class="line">========================================</span><br><span class="line"><span class="comment">### Pick fields from an object</span></span><br><span class="line">`jq` retrieves named properties from objects by using `.` syntax:</span><br><span class="line">    $ <span class="built_in">echo</span> <span class="string">'&#123;"foo": &#123; "bar": "a value" &#125;&#125;'</span> | jq .foo</span><br><span class="line">Nested values are accessible as well:</span><br><span class="line">    $ <span class="built_in">echo</span> <span class="string">'&#123;"foo": &#123; "bar": "a value" &#125;&#125;'</span> | jq .foo.bar</span><br><span class="line"><span class="comment">### Pick elements from an array:</span></span><br><span class="line">Elements <span class="keyword">in</span> an array may be extracted by index:</span><br><span class="line">    $ <span class="built_in">echo</span> <span class="string">'["snap","crackle","pop"]'</span> | jq .[1]</span><br><span class="line">More than one index? No problem!</span><br><span class="line">    $ <span class="built_in">echo</span> <span class="string">'["snap","crackle","pop"]'</span> | jq .[1, 2]</span><br><span class="line">We can even extract *all* elements at once by omitting the indices:</span><br><span class="line">    $ <span class="built_in">echo</span> <span class="string">'["snap","crackle","pop"]'</span> | jq .[]</span><br><span class="line"><span class="built_in">type</span> <span class="string">"data?"</span> to see dataset or <span class="string">"help?"</span> <span class="keyword">for</span> more options</span><br><span class="line">--------------------------------</span><br><span class="line"></span><br><span class="line">Given:    <span class="string">'product'</span> (<span class="built_in">type</span> <span class="string">"data?"</span> to view)</span><br><span class="line">Challenge: Select the entire item (hint: don<span class="string">'t overthink this!):</span></span><br><span class="line"><span class="string">&gt;</span></span><br></pre></td></tr></table></figure></p><p><strong><code>工具(jqPlay)</code></strong></p><p><a href="https://jqplay.org/" target="_blank" rel="noopener">jqPlay</a>是一个基于web的jq在线测试游乐场，它提供了对JSON数据进行jq查询的基本功能，而且提供了简单的jq查询语法示例，能够对查询进行快速反馈。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/json_03.gif?raw=true"></p><p><strong>基本用法演示</strong></p><p>这里我先提供一个稍复杂的JSON数据,数据保存在<code>/JSON-Demo/data.json路径</code>(<a href="https://github.com/flowerField/Source/blob/master/Blog/data.json" target="_blank" rel="noopener">您可以点击此链接获取该数据</a>)。为了演示方便，这里我将会把该文档的数据部署为RESTful API，从而创建一个模拟的API服务。在具体的处理中，将使用到名为<a href="https://github.com/typicode/json-server" target="_blank" rel="noopener">json-server</a>的Node模块，下面列出具体的细节。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ <span class="built_in">pwd</span></span><br><span class="line">/Users/文顶顶/Desktop/JSON-Demo</span><br><span class="line"></span><br><span class="line">wendingding$ npm install -g json-server</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/json-server -&gt; /usr/<span class="built_in">local</span>/lib/node_modules/json-server/bin/index.js</span><br><span class="line">+ json-server@0.14.0</span><br><span class="line">added 223 packages <span class="keyword">in</span> 23.03s</span><br><span class="line"></span><br><span class="line">wendingding$ json-server -p 5000 ./data.json</span><br><span class="line"></span><br><span class="line">  \&#123;^_^&#125;/ hi!</span><br><span class="line"></span><br><span class="line">  Loading ./data.json</span><br><span class="line">  Done</span><br><span class="line"></span><br><span class="line">  Resources</span><br><span class="line">  http://localhost:5000/person</span><br><span class="line"></span><br><span class="line">  Home</span><br><span class="line">  http://localhost:5000</span><br><span class="line"></span><br><span class="line">  Type s + enter at any time to create a snapshot of the database</span><br><span class="line">GET /person 304 16.355 ms - -</span><br></pre></td></tr></table></figure><p>执行<code>$json-server -p 5000 ./data.json</code>命令之后，我们可以在浏览器中通过<a href="">http://localhost:5000/person</a>地址来访问JSON文档中的数据，下面是显示结果。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/json_04.png?raw=true"></p><p><strong>备注：</strong>如果经常需要通过浏览器访问和显示JSON数据，建议安装相应的JSON扩展插件，我电脑Chrome安装的是<a href="http://jsonhandle.sinaapp.com/" target="_blank" rel="noopener">JSON-handle</a>，同类型的还有<a href="https://github.com/gildas-lormeau/JSONView-for-Chrome/tree/master/WebContent" target="_blank" rel="noopener">JSONView</a>。</p><p>下面列出jq命令行工具的使用示例以及主要命令行的解读说明。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">'.'</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   169k      0 --:--:-- --:--:-- --:--:--  255k</span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"age"</span>: 18,</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"mitaoer"</span>,</span><br><span class="line">    <span class="string">"hasBrother"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">"email"</span>: <span class="string">"mitaoer@126.com"</span>,</span><br><span class="line">    <span class="string">"interest"</span>: [</span><br><span class="line">      <span class="string">"文学"</span>,</span><br><span class="line">      <span class="string">"音乐"</span>,</span><br><span class="line">      <span class="string">"绘画"</span>,</span><br><span class="line">      <span class="string">"IT"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"car"</span>: &#123;</span><br><span class="line">      <span class="string">"type"</span>: <span class="string">"英菲尼迪"</span>,</span><br><span class="line">      <span class="string">"number"</span>: <span class="string">"京A 000001"</span>,</span><br><span class="line">      <span class="string">"price"</span>: 200012.66</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"age"</span>: 28,</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"wendingding"</span>,</span><br><span class="line">    <span class="string">"hasBrother"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">"email"</span>: <span class="string">"wenidngding_ios@126.com"</span>,</span><br><span class="line">    <span class="string">"interest"</span>: [</span><br><span class="line">      <span class="string">"文学"</span>,</span><br><span class="line">      <span class="string">"音乐"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"car"</span>: &#123;</span><br><span class="line">      <span class="string">"type"</span>: <span class="string">"奥迪"</span>,</span><br><span class="line">      <span class="string">"number"</span>: <span class="string">"京A 000002"</span>,</span><br><span class="line">      <span class="string">"price"</span>: 200000.66</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"age"</span>: 23,</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"xiaxiaoxia"</span>,</span><br><span class="line">    <span class="string">"hasBrother"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">"email"</span>: <span class="string">"mitaoer@126.com"</span>,</span><br><span class="line">    <span class="string">"interest"</span>: [</span><br><span class="line">      <span class="string">"文学"</span>,</span><br><span class="line">      <span class="string">"IT"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"car"</span>: null</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"age"</span>: 24,</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"LiuY"</span>,</span><br><span class="line">    <span class="string">"hasBrother"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">"email"</span>: <span class="string">"LiuY@126.com"</span>,</span><br><span class="line">    <span class="string">"interest"</span>: [</span><br><span class="line">      <span class="string">"文学"</span>,</span><br><span class="line">      <span class="string">"音乐"</span>,</span><br><span class="line">      <span class="string">"绘画"</span>,</span><br><span class="line">      <span class="string">"IT"</span>,</span><br><span class="line">      <span class="string">"阅读"</span>,</span><br><span class="line">      <span class="string">"健身"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"car"</span>: &#123;</span><br><span class="line">      <span class="string">"type"</span>: <span class="string">"ATS"</span>,</span><br><span class="line">      <span class="string">"number"</span>: <span class="string">"京A 000003"</span>,</span><br><span class="line">      <span class="string">"price"</span>: 888888.66</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">'.[1]'</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   140k      0 --:--:-- --:--:-- --:--:--  255k</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"age"</span>: 28,</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"wendingding"</span>,</span><br><span class="line">  <span class="string">"hasBrother"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"email"</span>: <span class="string">"wenidngding_ios@126.com"</span>,</span><br><span class="line">  <span class="string">"interest"</span>: [</span><br><span class="line">    <span class="string">"文学"</span>,</span><br><span class="line">    <span class="string">"音乐"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"car"</span>: &#123;</span><br><span class="line">    <span class="string">"type"</span>: <span class="string">"奥迪"</span>,</span><br><span class="line">    <span class="string">"number"</span>: <span class="string">"京A 000002"</span>,</span><br><span class="line">    <span class="string">"price"</span>: 200000.66</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">'.[1].name'</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   171k      0 --:--:-- --:--:-- --:--:--  255k</span><br><span class="line"><span class="string">"wendingding"</span></span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">'.[1].email'</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   106k      0 --:--:-- --:--:-- --:--:--  127k</span><br><span class="line"><span class="string">"wenidngding_ios@126.com"</span></span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">'.[1] | &#123;name,age&#125;'</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   161k      0 --:--:-- --:--:-- --:--:--  204k</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"wendingding"</span>,</span><br><span class="line">  <span class="string">"age"</span>: 28</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">'.[1] | &#123;newName:.name,newAge:.age&#125;'</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   153k      0 --:--:-- --:--:-- --:--:--  204k</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"newName"</span>: <span class="string">"wendingding"</span>,</span><br><span class="line">  <span class="string">"newAge"</span>: 28</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">'.[] | select (.age &gt;=24)'</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   167k      0 --:--:-- --:--:-- --:--:--  255k</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"age"</span>: 28,</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"wendingding"</span>,</span><br><span class="line">  <span class="string">"hasBrother"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"email"</span>: <span class="string">"wenidngding_ios@126.com"</span>,</span><br><span class="line">  <span class="string">"interest"</span>: [</span><br><span class="line">    <span class="string">"文学"</span>,</span><br><span class="line">    <span class="string">"音乐"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"car"</span>: &#123;</span><br><span class="line">    <span class="string">"type"</span>: <span class="string">"奥迪"</span>,</span><br><span class="line">    <span class="string">"number"</span>: <span class="string">"京A 000002"</span>,</span><br><span class="line">    <span class="string">"price"</span>: 200000.66</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"age"</span>: 24,</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"LiuY"</span>,</span><br><span class="line">  <span class="string">"hasBrother"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"email"</span>: <span class="string">"LiuY@126.com"</span>,</span><br><span class="line">  <span class="string">"interest"</span>: [</span><br><span class="line">    <span class="string">"文学"</span>,</span><br><span class="line">    <span class="string">"音乐"</span>,</span><br><span class="line">    <span class="string">"绘画"</span>,</span><br><span class="line">    <span class="string">"IT"</span>,</span><br><span class="line">    <span class="string">"阅读"</span>,</span><br><span class="line">    <span class="string">"健身"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"car"</span>: &#123;</span><br><span class="line">    <span class="string">"type"</span>: <span class="string">"ATS"</span>,</span><br><span class="line">    <span class="string">"number"</span>: <span class="string">"京A 000003"</span>,</span><br><span class="line">    <span class="string">"price"</span>: 888888.66</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">'.[1,3] | &#123;name,email&#125;'</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   162k      0 --:--:-- --:--:-- --:--:--  255k</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"wendingding"</span>,</span><br><span class="line">  <span class="string">"email"</span>: <span class="string">"wenidngding_ios@126.com"</span></span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"LiuY"</span>,</span><br><span class="line">  <span class="string">"email"</span>: <span class="string">"LiuY@126.com"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">'.[1,3] | [&#123;name,email&#125;]'</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   165k      0 --:--:-- --:--:-- --:--:--  255k</span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"wendingding"</span>,</span><br><span class="line">    <span class="string">"email"</span>: <span class="string">"wenidngding_ios@126.com"</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"LiuY"</span>,</span><br><span class="line">    <span class="string">"email"</span>: <span class="string">"LiuY@126.com"</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line">wendingding$ touch test.json</span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">'.[1,3] | [&#123;name,email&#125;]'</span> &gt; test.json</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   143k      0 --:--:-- --:--:-- --:--:--  204k</span><br><span class="line">wendingding$ cat test.json </span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"wendingding"</span>,</span><br><span class="line">    <span class="string">"email"</span>: <span class="string">"wenidngding_ios@126.com"</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"LiuY"</span>,</span><br><span class="line">    <span class="string">"email"</span>: <span class="string">"LiuY@126.com"</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p><strong><code>主要命令说明[为方便阅读，命令行中的xxx均代表的是http://localhost:5000/person路径]</code></strong></p><p><code>$ curl xxx | jq &#39;.&#39;</code> 获取API返回的所有JSON数据。<br><code>$ curl xxx | jq &#39;.[1]&#39;</code> 获取JSON文档中person数组的第2个元素内容。<br><code>$ curl xxx | jq &#39;.[1].name&#39;</code> 获取JSON文档中person数组的第2个元素(对象)中的name属性值。<br><code>$ curl xxx | jq &#39;.[1] | {name,age}&#39;</code> 获取数组第2个元素(对象)的name和age键值对组成新对象。<br><code>$ curl xxx | jq &#39;.[1,3] | {name,email}&#39;</code> 获取数组第2和第4个元素中的name和email值组成对象。<br><code>$ curl xxx | jq &#39;.[] | select (.age &gt;=24)&#39;</code> 获取JSON文档中所有age属性值&gt;=24的对象元素集合。</p><p><strong><code>补充</code></strong> 如果需要在Node中使用jq,那么可以安装并使用require导入<a href="https://www.npmjs.com/package/node-jq" target="_blank" rel="noopener">node-jq</a>模块。</p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>工具002 → JSONPath</strong></span></p><p><strong><code>定位</code></strong> 是一款可用于对JSON文档进行搜索和数据提取操作类库。<br><strong><code>历史</code></strong> 由<a href="https://goessner.net" target="_blank" rel="noopener">Stefan Goessner</a>于2007年开发，最开始的版本使用JavaScript实现。<br><strong><code>功能</code></strong> 能够对JSON文档进行搜索和数据提取，它的查询语法基于<a href="http://www.w3school.com.cn/xpath/index.asp" target="_blank" rel="noopener">XPath</a>实现。<br><strong><code>生态</code></strong> JSONPath没有提供命令行操作实现，但提供了优秀的<a href="http://jsonpath.com/" target="_blank" rel="noopener">在线测试工具</a>和<a href="https://www.npmjs.com/package/jsonpath" target="_blank" rel="noopener">Node模块</a>。<br><strong><code>优势</code></strong></p><ul><li>具有丰富的查询语法。</li><li>查询语句可以返回文档中的多个元素。</li><li>大多数的主流平台都对JSONPath提供支持。</li><li>拥有很高的社区使用率，优秀的在线测试工具对开发者更友好。</li></ul><p><strong><code>资料</code></strong> <a href="https://www.npmjs.com/package/jsonpath" target="_blank" rel="noopener">jsonpath Node模块</a> 、<a href="http://jsonpath.com/" target="_blank" rel="noopener">在线测试网站</a> 、<a href="https://github.com/json-path/JsonPath" target="_blank" rel="noopener">Github仓库</a>、<a href="https://goessner.net/" target="_blank" rel="noopener">Stefan Goessner主页</a></p><table><thead><tr><th style="text-align:left">语法</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>$</code></td><td style="text-align:left">根节点</td></tr><tr><td style="text-align:left"><code>@</code></td><td style="text-align:left">当前节点的筛选器属性处理</td></tr><tr><td style="text-align:left"><code>*</code></td><td style="text-align:left">通配符，匹配任何属性名称</td></tr><tr><td style="text-align:left"><code>..</code></td><td style="text-align:left">通配符，匹配任意层次的节点</td></tr><tr><td style="text-align:left"><code>[]</code></td><td style="text-align:left">迭代器标示，同数组索引</td></tr><tr><td style="text-align:left"><code>[,]</code></td><td style="text-align:left">迭代器标示，迭代器多选</td></tr><tr><td style="text-align:left"><code>[start:end]</code></td><td style="text-align:left">数组切片运算符</td></tr><tr><td style="text-align:left"><code>[?(&lt;expression&gt;)]</code></td><td style="text-align:left">过滤表达式，求值必须为布尔值</td></tr></tbody></table><hr><p><strong><code>查询语法示例</code></strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//备注：参考的JSON数据为前文使用的data.json文件</span><br><span class="line">$                       获取整个JSON文档的内容</span><br><span class="line">$.person                获取JSON文档中person数组的内容</span><br><span class="line">$.person.length         获取JSON文档中person数组的长度(元素个数)</span><br><span class="line"></span><br><span class="line">$.person[0]             获取JSON文档中person数组第一个元素的内容</span><br><span class="line">$.person[:1]            获取JSON文档中person数组第一个元素的内容</span><br><span class="line">$.person[-1:]           获取JSON文档中person数组最后一个元素的内容</span><br><span class="line">$.person[(@.length-1)]  获取JSON文档中person数组最后一个元素的内容</span><br><span class="line"></span><br><span class="line">$.person[:2]            获取JSON文档中person数组前两个元素的内容</span><br><span class="line">$.person[0,3]           获取JSON文档中person数组第1和4第个元素的内容</span><br><span class="line">$.person[0::2]          获取JSON文档中person数组指定元素的内容(隔一个元素抽取)</span><br><span class="line">$.person[:2].name       获取JSON文档中person数组前两个元素中的name值</span><br><span class="line"></span><br><span class="line">$..name                 获取JSON文档中所有的name子元素内容</span><br><span class="line">$.person[?(@.age &gt;23)]  获取JSON文档中age值大于23的所有元素</span><br><span class="line">$.person[?(@.age &gt;23)].age  获取JSON文档中age值大于23的所有元素中的age值信息</span><br><span class="line">$.person[?(@.age &gt;20 &amp;&amp; @.interest.length == 2)].name 满足多个条件的筛选</span><br></pre></td></tr></table></figure></p><p><strong><code>工具(jsonpath在线测试网站)</code></strong></p><p>jsonpath提供了对应的<a href="http://jsonpath.com/" target="_blank" rel="noopener">在线测试网站</a>，给指定JSON文档输入对应的jsonpath查询语句能够快速看到最终效果。使用该测试工具来可以”重量级的”复杂JSON数据进行快速的筛选，输入查询语句后马上就能够在右侧看到查询后的结果。如果开发者原本不了解查询语法，那也可以通过该工具来快速的学习，下面给出简单的图示。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/json_06.png?raw=true"></p><div class="tip"><strong>注意</strong> <a href="https://jsonpath.org/" target="_blank" rel="noopener">jsonpath</a>在线测试工具在使用的时候，总是会把查询的结果保存到[ ]的结构中。</div><p><strong><code>工具(node模块jsonpath)</code></strong></p><p>JSONPath本身没有命令行工具，除了上面介绍的在线测试网站之外，我们还能在代码中使用node社区发布的<a href="https://www.npmjs.com/package/jsonpath" target="_blank" rel="noopener">jsonpath模块</a>实现JSON的搜索任务。下面给出一个简单的单元测试示例(列出源码和执行情况)。</p><p><strong>001 先列出单元测试相关的代码</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jsonpath-test.js文件内容</span></span><br><span class="line"><span class="keyword">var</span> unirest  = <span class="built_in">require</span>(<span class="string">"unirest"</span>);</span><br><span class="line"><span class="keyword">var</span> jsonPath = <span class="built_in">require</span>(<span class="string">"jsonpath"</span>);</span><br><span class="line"><span class="keyword">var</span> expect   = <span class="built_in">require</span>(<span class="string">"chai"</span>).expect;</span><br><span class="line"></span><br><span class="line">describe(<span class="string">"wendingding-test"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> request ;</span><br><span class="line">    beforeEach(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        request = unirest.get(<span class="string">"http://localhost:5000/person"</span>)</span><br><span class="line">        .header(<span class="string">"Accept"</span>,<span class="string">"application/json"</span>);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">"return 200 状态码"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            expect(response.statusCode).to.eql(<span class="number">200</span>);</span><br><span class="line">            expect(response.headers[<span class="string">"content-type"</span>])</span><br><span class="line">            .to.eql(<span class="string">"application/json; charset=utf-8"</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">"return 所有的JOSN数据"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            expect(response.body.length).to.eql(<span class="number">4</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">"return 所有的JOSN数据中第一个元素      -- $[1]"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> resultData = jsonPath.query(response.body,<span class="string">"$[1]"</span>);</span><br><span class="line">            expect(resultData[<span class="number">0</span>].name).to.eql(<span class="string">"wendingding"</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">"return 所有的JOSN数据中最后一个元素[1] -- $[-1:]"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> resultData = jsonPath.query(response.body,<span class="string">"$[-1:]"</span>);</span><br><span class="line">            expect(resultData[<span class="number">0</span>].email).to.eql(<span class="string">"LiuY@126.com"</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">"return 所有的JOSN数据中最后一个元素[2] -- $[(@.length-1)]"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123; </span><br><span class="line">            <span class="keyword">var</span> resultData = jsonPath.query(response.body,<span class="string">"$[(@.length-1)]"</span>);</span><br><span class="line">            expect(resultData[<span class="number">0</span>].email).to.eql(<span class="string">"LiuY@126.com"</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">"return 所有的JOSN数据中满足条件元素     -- $[?(@.age &gt;= 23)]"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> data = response.body;  </span><br><span class="line">            <span class="keyword">var</span> resultData = jsonPath.query(data,<span class="string">"$[?(@.age &gt;= 23)]"</span>);</span><br><span class="line">            <span class="comment">//console.log(resultData)</span></span><br><span class="line">            expect(resultData.length).to.eql(<span class="number">3</span>);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> ;i&lt;resultData.length;i++)</span><br><span class="line">            &#123;</span><br><span class="line">                expect(resultData[i].age).to.be.at.least(<span class="number">23</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><strong>002 列出代码的具体执行细节</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ <span class="built_in">pwd</span> </span><br><span class="line">/Users/文顶顶/Desktop/jsonPath-demo</span><br><span class="line">wendingding$ npm <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">&gt; jsonpath-demo@1.0.0 <span class="built_in">test</span> /Users/文顶顶/Desktop/jsonPath-demo</span><br><span class="line">&gt; mocha</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  wendingding-test</span><br><span class="line">    ✓ <span class="built_in">return</span> 200 状态码</span><br><span class="line">    ✓ <span class="built_in">return</span> 所有的JOSN数据</span><br><span class="line">    ✓ <span class="built_in">return</span> 所有的JOSN数据中第一个元素      -- $[1]</span><br><span class="line">    ✓ <span class="built_in">return</span> 所有的JOSN数据中最后一个元素[1] -- $[-1:]</span><br><span class="line">    ✓ <span class="built_in">return</span> 所有的JOSN数据中最后一个元素[2] -- $[(@.length-1)]</span><br><span class="line">    ✓ <span class="built_in">return</span> 所有的JOSN数据中满足条件元素    -- $[?(@.age &gt;= 23)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  6 passing (92ms)</span><br></pre></td></tr></table></figure></p><p><strong>003 代码说明</strong></p><p>〇 示例代码中使用了<a href="https://mochajs.org/" target="_blank" rel="noopener">Mocha</a>、<a href="http://unirest.io/" target="_blank" rel="noopener">Unirest</a>测试框架，jsonpath查询模块以及<a href="https://www.chaijs.com/" target="_blank" rel="noopener">Chai</a>模块中的断言结构。<br>① 示例代码中的每一个<code>it</code>就代表着一个测试用例。<br>② 示例代码中我们在Mocha的<code>beforeEach()方法</code>中对请求信息进行了配置。<br>③ 示例代码中在describe语句定义的范围内，每次执行测试用例之前都会先运行一次beforeEach方法。</p><p><strong>004 执行备注</strong></p><p>这里简单说明上面代码的执行环境和处理过程。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">[1]  在电脑中指定的路径创建文件夹，并通过命令行进入到该路径。</span><br><span class="line"></span><br><span class="line">$ mkdir JSON-TEST</span><br><span class="line">$ <span class="built_in">cd</span> JSON-TEST/</span><br><span class="line">$ <span class="built_in">pwd</span></span><br><span class="line">    /Users/文顶顶/Desktop/JSON-TEST</span><br><span class="line"></span><br><span class="line">[2] 初始化并安装必要的node模块。</span><br><span class="line"></span><br><span class="line">$ npm init  //默认回车即可</span><br><span class="line">$ npm install -g mocha</span><br><span class="line">$ npm install --save-dev mocha</span><br><span class="line">$ npm install --save-dev unirest</span><br><span class="line">$ npm install -save-dev jsonpath</span><br><span class="line">$ npm install --save-dev chai</span><br><span class="line"></span><br><span class="line">[3] 修改package.json文件中的scripts项为<span class="string">"test"</span>: <span class="string">"mocha"</span>。</span><br><span class="line"></span><br><span class="line">wendingding$ cat package.json </span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"json-test"</span>,</span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="string">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"mocha"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"chai"</span>: <span class="string">"^4.2.0"</span>,</span><br><span class="line">    <span class="string">"jsonpath"</span>: <span class="string">"^1.0.0"</span>,</span><br><span class="line">    <span class="string">"mocha"</span>: <span class="string">"^5.2.0"</span>,</span><br><span class="line">    <span class="string">"unirest"</span>: <span class="string">"^0.5.1"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[4] 在当前目录下创建<span class="built_in">test</span>文件夹，并在该文件夹中创建测试文件(此处命名为json-test.js)。</span><br><span class="line"></span><br><span class="line">$ mkdir <span class="built_in">test</span></span><br><span class="line">$ <span class="built_in">cd</span> <span class="built_in">test</span>/</span><br><span class="line">$ touch json-test.js</span><br><span class="line"></span><br><span class="line">[5] 编辑json-test.js文件的内容(前文已经给出),列出文件目录。</span><br><span class="line">.</span><br><span class="line">├── node_modules</span><br><span class="line">│   ├── JSONSelect</span><br><span class="line">│   ...省略</span><br><span class="line">│   ├── chai</span><br><span class="line">│   ├── jsonpath</span><br><span class="line">│   ├── mocha</span><br><span class="line">│   ├── unirest</span><br><span class="line">│   └── xtend</span><br><span class="line">├── package-lock.json</span><br><span class="line">├── package.json</span><br><span class="line">└── <span class="built_in">test</span></span><br><span class="line">    └── json-test.js</span><br><span class="line"></span><br><span class="line">[6] 执行测试。</span><br><span class="line"></span><br><span class="line">$ npm <span class="built_in">test</span></span><br></pre></td></tr></table></figure></p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>工具003 → JSON Pointer</strong></span></p><p><a href="https://tools.ietf.org/html/rfc6901" target="_blank" rel="noopener">JSON Pointer</a>本身是一项用于获取JSON文档中特定值的标准。JSON Pointer设计的主要目标在于支持JSON Schema标准中的$ref（请参考JSON进阶一文）。</p><p>目前，大多数的主流平台(包括<span style="color:#f09"><strong>Node\Ruby on Rails\Ptyhon\Java</strong></span>等)都已经包含JSON Pointer相关的类库。Java，Jackson已支持JSON Pointer查询语法，javaEE 8将提供原生支持；Node中则可以在社区中找到并使用<a href="https://www.npmjs.com/package/json-pointer" target="_blank" rel="noopener">json-pointer模块</a>来对JSON文档进行处理。</p><table><thead><tr><th style="text-align:left">语法</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>/data</code></td><td style="text-align:left">获取JSON文档中某个key对应的所有数据</td></tr><tr><td style="text-align:left"><code>/data/index</code></td><td style="text-align:left">获取指定索引对应的数据</td></tr><tr><td style="text-align:left"><code>/data/index/key</code></td><td style="text-align:left">获取指定索引对应的数据并通过key来取值</td></tr></tbody></table><p><a href="https://tools.ietf.org/html/rfc6901" target="_blank" rel="noopener">JSON Pointer</a>的查询语法简洁高效，其工作机制是以<code>/</code>来表示路径分隔，以<code>索引|下标</code>来获取指定的内容，索引总是从0开始。下面给出简短的查询语法示例：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//备注：参考的JSON数据为前文使用的data.json文件</span><br><span class="line">/person                 获取JSON文档中person的内容</span><br><span class="line">/person/0               获取JSON文档中person数组的第一项内容</span><br><span class="line">/person/0/name          获取JSON文档中person数组的第一项内容中的name值</span><br></pre></td></tr></table></figure></p><div class="tip"><strong>注意</strong> JSON Pointer标准中，查询操作的结果总只包含数据值而不会包含相关的键名。</div><p>这里将使用node社区的<a href="https://www.npmjs.com/package/json-pointer" target="_blank" rel="noopener">json-pointer</a>模块简单演示node平台中对JSON文档的处理。下面列出核心单元测试代码(在测试的时候需要先安装对应的模块)。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> expect = <span class="built_in">require</span>(<span class="string">"chai"</span>).expect;</span><br><span class="line"><span class="keyword">var</span> pointer = <span class="built_in">require</span>(<span class="string">"json-pointer"</span>);</span><br><span class="line"><span class="keyword">var</span> unirest = <span class="built_in">require</span>(<span class="string">"unirest"</span>);</span><br><span class="line"></span><br><span class="line">describe(<span class="string">"wendingding-test"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> request ;</span><br><span class="line">    beforeEach(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        request = unirest.get(<span class="string">"http://localhost:5000/person"</span>)</span><br><span class="line">        .header(<span class="string">"Accept"</span>,<span class="string">"application/json"</span>);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">"return 200 状态码"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            expect(response.statusCode).to.eql(<span class="number">200</span>);</span><br><span class="line">            expect(response.headers[<span class="string">"content-type"</span>])</span><br><span class="line">            .to.eql(<span class="string">"application/json; charset=utf-8"</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">"return 所有的JOSN数据"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            expect(response.body.length).to.eql(<span class="number">4</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">"return Person数组中的第一个元素 /person/0"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> resultData = pointer.get(response.body,<span class="string">"/0"</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"\n"</span>,resultData,<span class="string">"\n"</span>);</span><br><span class="line">            expect(resultData.name).to.eql(<span class="string">"mitaoer"</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">"return Person数组中的第三个元素中interest的值 /person/2/interest"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> resultData = pointer.get(response.body,<span class="string">"/2/interest"</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"\t"</span>,resultData);</span><br><span class="line">            expect(resultData.length).to.eql(<span class="number">2</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>简单列出执行情况：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ npm <span class="built_in">test</span></span><br><span class="line">&gt; json-pointer-demo@1.0.0 <span class="built_in">test</span> /Users/文顶顶/Desktop/JSON-Pointer</span><br><span class="line">&gt; mocha</span><br><span class="line"></span><br><span class="line">  wendingding-test</span><br><span class="line">    ✓ <span class="built_in">return</span> 200 状态码</span><br><span class="line">    ✓ <span class="built_in">return</span> 所有的JOSN数据</span><br><span class="line"></span><br><span class="line">      &#123; age: 18,</span><br><span class="line">        name: <span class="string">'mitaoer'</span>,</span><br><span class="line">        hasBrother: <span class="literal">true</span>,</span><br><span class="line">        email: <span class="string">'mitaoer@126.com'</span>,</span><br><span class="line">        interest: [ <span class="string">'文学'</span>, <span class="string">'音乐'</span>, <span class="string">'绘画'</span>, <span class="string">'IT'</span> ],</span><br><span class="line">        car: &#123; <span class="built_in">type</span>: <span class="string">'英菲尼迪'</span>, number: <span class="string">'京A 000001'</span>, price: 200012.66 &#125; </span><br><span class="line">      &#125; </span><br><span class="line">    ✓ <span class="built_in">return</span> Person数组中的第一个元素 /person/0</span><br><span class="line">    [ <span class="string">'文学'</span>, <span class="string">'IT'</span> ]</span><br><span class="line">    ✓ <span class="built_in">return</span> Person数组中的第三个元素中interest的值 /person/2/interest</span><br><span class="line"></span><br><span class="line">  4 passing (66ms)</span><br></pre></td></tr></table></figure></p><h3 id="JSON转换"><a href="#JSON转换" class="headerlink" title="JSON转换"></a>JSON转换</h3><h4 id="JSON-→-HTML结构-渲染"><a href="#JSON-→-HTML结构-渲染" class="headerlink" title="JSON → HTML结构(渲染)"></a>JSON → HTML结构(渲染)</h4><p>将JSON数据转换(处理)为HTML的操作我们应该都很熟悉，在前端开发和移动端开发领域中，这一部分的操作通常和网络请求紧密联系，业务流程基本都是先发请求获取服务器端返回的(JSON)数据，然后通过序列化的方法来对数据进行解析，也就是反序列化处理(通常是将JSON数据转换为编程语言中对应的数据结构比如数组或者是对象)，最终再根据得到的数据来更新UI。</p><p>现在前端开发中这都属于基本操作，甚至像Vue这样类似的框架中<code>数据绑定</code>已经是其最最基础的一部分了。虽然如此，为了文章的完整性，这里还是会简单介绍<code>Mustache</code>和<code>Handlebars</code>两个类库在JSON转换中的运用。</p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>Mustache</strong></span></p><p><strong><code>简介</code></strong> Mustache使用声明式模板来转换数据格。<br><strong><code>资料</code></strong> <a href="https://mustache.github.io/" target="_blank" rel="noopener">Mustache</a>、<a href="https://github.com/mustache/mustache.github.com" target="_blank" rel="noopener">Mustache Github</a>、<a href="http://mustache.github.io/mustache.5.html" target="_blank" rel="noopener">Mustache 5说明文档</a><br><strong><code>优势</code></strong> 使用模板可以从代码中抽取具体的数据信息，并将数据保存在外部的文件中，实现关注点分离。</p><p>接下来我将通过一个简短的示例来说明Mustache的语法以及其使用方式，<a href="https://github.com/flowerField/Source/blob/master/Blog/Tem-TEST.zip" target="_blank" rel="noopener">您可以点击该链接获取完整的项目内容</a>。为了对介绍Mustache的使用，这里我列出项目中的部分内容并做简要说明。</p><p>001 列出模板核心内容<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//备注：../Tem-TEST/src/index.mustache文件的核心内容</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">"tb"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>age<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>interest<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>car-type<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>car-number<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        &#123;&#123;#person&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;email&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;interest.1&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            &#123;&#123;#car&#125;&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;type&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;number&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            &#123;&#123;/car&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        &#123;&#123;/person&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>002 列出单元测试代码<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备注：../Tem-TEST/test/mustache-test.js文件内容</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">var</span> expect = <span class="built_in">require</span>(<span class="string">"chai"</span>).expect;</span><br><span class="line"><span class="keyword">var</span> jsonfile = <span class="built_in">require</span>(<span class="string">"jsonfile"</span>);</span><br><span class="line"><span class="keyword">var</span> mustache = <span class="built_in">require</span>(<span class="string">"mustache"</span>);</span><br><span class="line"></span><br><span class="line">describe(<span class="string">"wendingding-mustache-test"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//文件的目录结构：json文件路径 + 模板文件路径 + 目标文件路径</span></span><br><span class="line">    <span class="keyword">var</span> jsonFileFullPath     = __dirname + <span class="string">"/../src/data.json"</span>;</span><br><span class="line">    <span class="keyword">var</span> templateFileFullPath = __dirname + <span class="string">"/../src/index.mustache"</span>;</span><br><span class="line">    <span class="keyword">var</span> targetFileFunllPath  = __dirname + <span class="string">"/../src/index.html"</span>;</span><br><span class="line"></span><br><span class="line">    it(<span class="string">"JSON -&gt; HTML"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        jsonfile.readFile(jsonFileFullPath,<span class="function"><span class="keyword">function</span>(<span class="params">readJsonFileError,jsonData</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(!readJsonFileError)</span><br><span class="line">            &#123;</span><br><span class="line">                fs.readFile(templateFileFullPath,<span class="string">"utf8"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">readTemplateFileError,templateData</span>)</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(!readTemplateFileError)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">var</span> template = templateData.toString();</span><br><span class="line">                        <span class="keyword">var</span> html = mustache.render(template,jsonData);</span><br><span class="line"></span><br><span class="line">                        fs.writeFile(targetFileFunllPath, html,  <span class="function"><span class="keyword">function</span>(<span class="params">errorStatus</span>) </span>&#123;</span><br><span class="line">                            <span class="keyword">if</span> (!errorStatus) &#123;</span><br><span class="line">                                <span class="built_in">console</span>.log(<span class="string">"转换成功并保存为HTML文件！"</span>);</span><br><span class="line">                                done();</span><br><span class="line">                            &#125;<span class="keyword">else</span></span><br><span class="line">                            &#123;</span><br><span class="line">                                done(errorStatus);</span><br><span class="line">                            &#125;  </span><br><span class="line">                         &#125;); </span><br><span class="line">                    &#125;<span class="keyword">else</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        done(readTemplateFileError)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;<span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                done(readJsonFileError)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>通过<code>$ npm test</code>执行单元测试代码，将会执行JSON数组到HTML的转换，处理完毕后结果保存到index.html文件中，下面贴出该页面的效果图。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/json_07.png?raw=true"></p><blockquote><p><strong>Mustache模板工作机制</strong><br>❐  模板基于HTML,  Mustache使用JSON数据来解析标签。<br>❐  模板中的标签可以表示单个字段，使用<code>双大括号</code>的形式来包裹。<br>❐  模板中的区块都需要由<code>开始标签和结尾标签</code>组成，例如上例中的person。<br>❐  模板中的区块对应JSON数据中的数组或者是对象，例如上例中的person和car。<br>❐  模板中的区块可以为内部的标签定义上下文，比如car区块内部的type和number。</p></blockquote><p><strong><code>Mustache工具(命令行 &amp;&amp; 在线网站)</code></strong></p><p>Mustache除上面演示的使用方式之外，还能直接在命令行中使用，下面给出简短的使用示例。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(1) 全局安装Mustache模块。</span><br><span class="line">$ npm install -g mustache </span><br><span class="line"></span><br><span class="line">(2) 执行mustache命令转换。</span><br><span class="line">$ mustache /Users/文顶顶/Desktop/Tem-TEST/src/data.json /Users/文顶顶/Desktop/Tem-TEST/src/index.mustache &gt; target.html</span><br><span class="line"></span><br><span class="line">$ open target.html</span><br></pre></td></tr></table></figure></p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/json_08.png?raw=true"></p><p>这里再推荐一款好用的在线模板编辑器<a href="http://rowno.github.io/architect/" target="_blank" rel="noopener">Architect</a>，使用该工具可以有效的简化测试和开发模板的工作，当修改模板的时候，可以实时的看到渲染的结果。该网站支持多款主流模板引擎(包括<span style="color:#f09"><strong>doT.js、Dustjs、EJS、Handlebars.js、Hogan.js、Jade、Mustache、Nunjucks和Underscore.js等</strong></span>)的编辑和渲染，可以有效的加速开发和调试工作。</p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>Handlebars</strong></span></p><p><strong><code>简介</code></strong> <a href="http://handlebarsjs.com/" target="_blank" rel="noopener">Handlebars</a>是Mustache的扩展，使用hash或对象来渲染模板中的标签。<br><strong><code>资料</code></strong> <a href="http://handlebarsjs.com/" target="_blank" rel="noopener">Handlebars</a>、<a href="https://github.com/wycats/handlebars.js/" target="_blank" rel="noopener">Handlebars Github</a>、<a href="http://rowno.github.io/architect/" target="_blank" rel="noopener">Architect</a>、<a href="http://tryhandlebarsjs.com/" target="_blank" rel="noopener">在线测试网站</a>、<a href="https://www.npmjs.com/package/handlebars" target="_blank" rel="noopener">Handlebars的Node模块</a><br><strong><code>说明</code></strong> Handlebars与Mustache高度兼容，相对而言Handlebars自身增加了一些特性来增强转换操作。它们的差异主要在于Handlebars提供了<code>if</code>和<code>unless</code>等内联的辅助语句且允许开发者通过注册自定义辅助语义的方式来进行扩展，功能更加强大。</p><p><strong><code>优势</code></strong></p><ul><li>模板语言丰富，能满足大多数的转换需求。</li><li>拥有优秀的在线编辑和测试工具用起来更加方便。</li><li>采用声明式，但也支持在自定义辅助指令中编写逻辑代码。</li><li>因为拥有内置的条件逻辑，所以在渲染的时候几乎可以不用编写额外的处理代码。</li><li>跨平台的支持度很好，支持<code>JavaScript</code>、<code>Node.js</code>、<code>Java</code>和<code>Ruby on Rails</code>等平台。</li></ul><p>这里将简单介绍Handlebars在Node中的使用，并提供node和命令行两种执行示例供参考，更多的细节请自行参考其官网文档。</p><p><strong>001 列出模板文件的核心代码</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//备注(1)：/Users/文顶顶/Desktop/Handlebars-Test/index.hbs文件的核心内容</span><br><span class="line">//备注(2)：转换过程中使用的json数据为前文中的data.json文件</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">"tb"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>age<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>car-type<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>car-Other<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        &#123;&#123;#each person&#125;&#125;</span><br><span class="line">        &#123;&#123;#if car&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;email&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;car.type&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>号码：&#123;&#123;car.number&#125;&#125;  |  价格：&#123;&#123;car.price&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        &#123;&#123;/if&#125;&#125;</span><br><span class="line">        &#123;&#123;/each&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><strong>002 列出命令行执行的细节</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(1) 先通过命令行全局安装hb-interpolate模块</span><br><span class="line">$ npm install -g hb-interpolate</span><br><span class="line"></span><br><span class="line">(2) 执行渲染命令。</span><br><span class="line">$ hb-interpolate -j /Users/文顶顶/Desktop/Handlebars-Test/data.json -t  /Users/文顶顶/Desktop/Handlebars-Test/index.hbs &gt; target.html</span><br></pre></td></tr></table></figure></p><p><strong>说明</strong> 上面的命令行中<code>-j</code>表示后面跟的是json文件，<code>-t</code>表示后面跟的是模板文件，转换后的结果被输出并保存到target.html文件中。在模板文件中的<code>#each</code>表示遍历数组，<code>#if</code>是逻辑控制指令，在渲染的时候过滤了car为null的数据情况，浏览器打开target.html文件可以看到下面的显示结果。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/json_09.png?raw=true"></p><p><strong>003 Handlebars在Node中的使用</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备注：handlebars-test.js文件的内容</span></span><br><span class="line"><span class="comment">//001 导入node模板</span></span><br><span class="line"><span class="keyword">var</span> fs          = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">var</span> jsonfile    = <span class="built_in">require</span>(<span class="string">"jsonfile"</span>);</span><br><span class="line"><span class="keyword">var</span> handlebars  = <span class="built_in">require</span>(<span class="string">"handlebars"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//002 处理文件路径</span></span><br><span class="line"><span class="keyword">var</span> jsonFullPath     = __dirname + <span class="string">"/data.json"</span>;</span><br><span class="line"><span class="keyword">var</span> templateFullPath = __dirname + <span class="string">"/index.hbs"</span>;</span><br><span class="line"><span class="keyword">var</span> outPutFullPath  = __dirname + <span class="string">"/output.html"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//003 读取JSON文件的内容</span></span><br><span class="line">jsonfile.readFile(jsonFullPath,<span class="function"><span class="keyword">function</span>(<span class="params">readJsonError,jsonData</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!readJsonError)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//004 读取模板文件的内容</span></span><br><span class="line">        fs.readFile(templateFullPath,<span class="string">"utf8"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">readTemplateError,templateData</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(!readTemplateError)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//005 JSON数据 + 模板 = &gt; 渲染</span></span><br><span class="line">                <span class="keyword">var</span> template = handlebars.compile(templateData);</span><br><span class="line">                <span class="keyword">var</span> html = template(jsonData);</span><br><span class="line"></span><br><span class="line">                <span class="comment">//006 把渲染后的结果保存到指定文件中</span></span><br><span class="line">                fs.writeFile(outPutFullPath, html,  <span class="function"><span class="keyword">function</span>(<span class="params">errorStatus</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(! errorStatus)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">"渲染成功！请打开"</span>+outPutFullPath+<span class="string">"查看结果!"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><strong>说明</strong> 在指定文件目录中(我这里是<code>/Users/文顶顶/Desktop/Handlebars-Test</code>)创建handlebars-test.js文件，并编写上述对应的代码。通过命令行安装必要的Node模块，执行即可得到前文所示的图片结果。下面给出命令行执行的细节：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(1) 切换到当前目录</span><br><span class="line">$ <span class="built_in">cd</span> Handlebars-Test/</span><br><span class="line">$ <span class="built_in">pwd</span> </span><br><span class="line">/Users/文顶顶/Desktop/Handlebars-Test</span><br><span class="line"></span><br><span class="line">(2) 使用npm初始化并安装必要的Node模块。</span><br><span class="line">$ npm init</span><br><span class="line">$ npm install --save-dev jsonfile</span><br><span class="line">$ npm install --save-dev handlebars</span><br><span class="line"></span><br><span class="line">(3) 执行。</span><br><span class="line">$ node handlebars-test.js</span><br></pre></td></tr></table></figure></p><p><strong>补充</strong> Mustache和Handlebars除用来把JSON转换为HTML(渲染)之外，还能够对JSON数据本身的格式进行转换工作(主要是对JSON数据进行二次处理，譬如删减或结构调整等)，但Mustache在具体进行格式化的时候因为无法确定当前所处理的元素是否为数组或对象的最后一个元素，所以可能存在<span style="color:#f09">“无谓逗号”</span>的问题。Handlebars可以通过使用<code>#unless 和@last</code>的形式对”无谓逗号”的问题进行规避，具体的细节请参考其官方文档说明。另外，JSON格式转换的工具在Node环境中推荐使用<a href="https://www.npmjs.com/package/json2json" target="_blank" rel="noopener">Json2Json</a>和<a href="https://www.npmjs.com/package/jsonapter" target="_blank" rel="noopener">jsonapter</a>，也可以参考<a href="https://www.npmjs.com/package/json-patch" target="_blank" rel="noopener">JSON Patch</a>和<a href="https://www.npmjs.com/package/json-templater" target="_blank" rel="noopener">JSON-T</a>的实现，这里不再展开。</p><h4 id="JSON数据-←→-XML文档"><a href="#JSON数据-←→-XML文档" class="headerlink" title="JSON数据 ←→ XML文档"></a>JSON数据 ←→ XML文档</h4><p>最后简单介绍JSON数据和XML数据之间的相互转换，虽然这种场景通常可能很少出现(因为开发中常见的场景一般是对JSON或XML数据进行序列化或反序列化处理，JSON和XML两种数据格式之间直接相互转换的情况真的很少见)。</p><p><a href="https://www.xml.com/" target="_blank" rel="noopener">XML</a>全称<code>Extensible Markup Language</code>(可扩展标记语言)，主要流行于(1998~2008年)。同JSON类似，XML也能用于表示和传输数据，现在很多大公司的API都提供XML和JSON两种格式的数据响应。</p><p>XML数据和JSON数据的转换难易程度主要看XML文档的结构，如果文档中所有的数据都以XML元素和文本的方式保存那么转换为JSON数据是比较简单的，如果XML文档的元素上存在这大量的属性节点(<span style="color:#f09">早年的时候很多XML的设计人员把数据保存在XML的属性节点上，这样有助于减少文件体积和简化多平台之间的转换工作</span>)，那么这种转换就会比较困难。不过，好在我们可以使用很多现成的工具(譬如：Parker和<a href="http://www.jsonml.org/" target="_blank" rel="noopener">JsonML</a>以及<a href="http://badgerfish.ning.com/" target="_blank" rel="noopener">Badgerfish</a>等)来完成这种具体的转换工作。</p><p>对于上面这些工具的具体使用情况，大家可以自行了解。需要说明的是即便如此，这些工具仍然存在很大的局限性(譬如<code>文档不全</code>、<code>缺乏跨平台的支持</code>和<code>完整实现</code>以及<code>有损转换</code>等等)。所以，在实际的使用过程中其实可以考虑先把JSON|XML转换为当前编程语言中的数据结构形式，然后再转换成XML|JSON)。下面以JavaScript(Node)平台为例加以简单说明。</p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>XML文档 → JSON数据</strong></span></p><ul><li>先把XML数据解析为JavaScript中的对象|数组(<code>xml2js模块</code>)。</li><li>把JavaScript的对象|数组序列化为JSON格式的数据(<code>JSON.stringify方法</code>)。</li></ul><p>列出核心示例代码<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xmlFullPath      = __dirname + <span class="string">"/data.xml"</span>;</span><br><span class="line">fs.readFile(xmlFullPath,<span class="string">"utf8"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">readFileError,xmlData</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> parser = <span class="keyword">new</span> xml2js.Parser();</span><br><span class="line">    parser.parseString(xmlData,<span class="function"><span class="keyword">function</span>(<span class="params">error,xmlObj</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(xmlObj,<span class="literal">null</span>,<span class="number">2</span>));</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>JSON数据 → XML文档</strong></span></p><ul><li>先将JSON数据解析(反序列化)为JavaScript中的对象|数组数据(<code>eval函数或者是JSON.parse方法</code>)。</li><li>根据JavaScript数据来生成(marshaling)对应的XML文档(<code>xml2js模块</code>)</li></ul><p>这里列出json数据转换为xml数据的代码示例。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//001 导入node模板</span></span><br><span class="line"><span class="keyword">var</span> fs          = <span class="built_in">require</span>(<span class="string">"fs"</span>);</span><br><span class="line"><span class="keyword">var</span> xml2js      = <span class="built_in">require</span>(<span class="string">"xml2js"</span>);</span><br><span class="line"><span class="keyword">var</span> jsonfile    = <span class="built_in">require</span>(<span class="string">"jsonfile"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//002 处理文件路径</span></span><br><span class="line"><span class="keyword">var</span> jsonFullPath     = __dirname + <span class="string">"/data.json"</span>;</span><br><span class="line"><span class="keyword">var</span> xmlFullPath      = __dirname + <span class="string">"/data.xml"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//003 读取JSON文件的内容并解析为JavaScript对象(jsonData)</span></span><br><span class="line">jsonfile.readFile(jsonFullPath,<span class="function"><span class="keyword">function</span>(<span class="params">readJsonError,jsonData</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!readJsonError)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//004 创建并返回bulider实例对象</span></span><br><span class="line">        <span class="keyword">var</span> bulider = <span class="keyword">new</span> xml2js.Builder();</span><br><span class="line">        <span class="comment">//005 使用bulider对象将jsonData转换为xml格式的字符串</span></span><br><span class="line">        <span class="keyword">var</span> xml = bulider.buildObject(jsonData);</span><br><span class="line">        <span class="comment">//006 写文件操作(把最终的数据保存到指定的文件中)</span></span><br><span class="line">        fs.writeFile(xmlFullPath, xml,  <span class="function"><span class="keyword">function</span>(<span class="params">errorStatus</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(! errorStatus)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"json-&gt;XML 转换成功"</span>);</span><br><span class="line">                <span class="built_in">console</span>.log(xml);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>列出用于转换的初始json数据。<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"person"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"age"</span>: <span class="number">18</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"mitaoer"</span>,</span><br><span class="line">        <span class="attr">"hasBrother"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"email"</span>: <span class="string">"mitaoer@126.com"</span>,</span><br><span class="line">        <span class="attr">"car"</span>: &#123;</span><br><span class="line">          <span class="attr">"type"</span>: <span class="string">"英菲尼迪"</span>,</span><br><span class="line">          <span class="attr">"number"</span>: <span class="string">"京A 000001"</span>,</span><br><span class="line">          <span class="attr">"price"</span>: <span class="number">200012.66</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"age"</span>: <span class="number">28</span>,</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"wendingding"</span>,</span><br><span class="line">        <span class="attr">"hasBrother"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"email"</span>: <span class="string">"wenidngding_ios@126.com"</span>,</span><br><span class="line">        <span class="attr">"car"</span>: &#123;</span><br><span class="line">          <span class="attr">"type"</span>: <span class="string">"奥迪"</span>,</span><br><span class="line">          <span class="attr">"number"</span>: <span class="string">"京A 000002"</span>,</span><br><span class="line">          <span class="attr">"price"</span>: <span class="number">200000.66</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>列出最终输出的xml数据内容。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">person</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">age</span>&gt;</span>18<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>mitaoer<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hasBrother</span>&gt;</span>true<span class="tag">&lt;/<span class="name">hasBrother</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">email</span>&gt;</span>mitaoer@126.com<span class="tag">&lt;/<span class="name">email</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">car</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>英菲尼迪<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">number</span>&gt;</span>京A 000001<span class="tag">&lt;/<span class="name">number</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">price</span>&gt;</span>200012.66<span class="tag">&lt;/<span class="name">price</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">car</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">age</span>&gt;</span>28<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>wendingding<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hasBrother</span>&gt;</span>true<span class="tag">&lt;/<span class="name">hasBrother</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">email</span>&gt;</span>wenidngding_ios@126.com<span class="tag">&lt;/<span class="name">email</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">car</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>奥迪<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">number</span>&gt;</span>京A 000002<span class="tag">&lt;/<span class="name">number</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">price</span>&gt;</span>200000.66<span class="tag">&lt;/<span class="name">price</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">car</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">person</span>&gt;</span></span><br></pre></td></tr></table></figure></p><div class="tip">注意：如果JSON数据中存在数组这种结构那么使用xml2js模块的处理其实不甚理想，更新信息请参考<a href="https://www.npmjs.com/package/xml2js" target="_blank" rel="noopener">官方文档说明</a>。</div><div class="tip"><strong>后记</strong> ！ MD，这篇文章写了我好久中间一度放弃，玩了两天农药。好在，我终于完成了。</div><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;tip&quot;&gt;本文输出JSON搜索和JSON转换相关的内容，是对前两篇文章的补充。&lt;/div&gt;

&lt;h3 id=&quot;JSON搜索&quot;&gt;&lt;a href=&quot;#JSON搜索&quot; class=&quot;headerlink&quot; title=&quot;JSON搜索&quot;&gt;&lt;/a&gt;JSON搜索&lt;/h
      
    
    </summary>
    
    
      <category term="javaScript系列" scheme="https://weibo.com/u/3800117445/tags/javaScript%E7%B3%BB%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>javaScript系列 [08]-javaScript和JSON (进阶)</title>
    <link href="https://weibo.com/u/3800117445/2018/11/11/javaScript%E7%B3%BB%E5%88%97%20%5B08%5D-javaScript%E5%92%8CJSON(%E8%BF%9B%E9%98%B6)/"/>
    <id>https://weibo.com/u/3800117445/2018/11/11/javaScript系列 [08]-javaScript和JSON(进阶)/</id>
    <published>2018-11-11T00:20:13.000Z</published>
    <updated>2018-11-16T01:26:58.884Z</updated>
    
    <content type="html"><![CDATA[<div class="tip">在<a href="http://wendingding.com/2018/04/16/javaScript%E7%B3%BB%E5%88%97%20[05]-javaScript%E5%92%8CJSON/" target="_blank" rel="noopener">javaScript和JSON</a>这篇博文中已经对JSON的基础知识进行了系统的介绍，此文是JSON知识的<strong>进阶内容</strong>，本文输出和JSON有关的以下内容：</div><blockquote><p>❐  JSON核心<br>❐  JSON的校验(JSON Schema)</p></blockquote><h3 id="JSON核心"><a href="#JSON核心" class="headerlink" title="JSON核心"></a>JSON核心</h3><p>JSON是一种数据交换格式，是当前网络通信中使用的主流数据格式。</p><p><span style="color:#000">JSON本身并不局限(依赖)于某项特定的技术，非私有且可移植，几乎所有的现代编程语言(<code>javaScript</code> | <code>java</code> | <code>Ruby</code> | <code>C#</code> | <code>PHP</code> | <code>Object-C</code>等)和平台都支持对JSON数据的序列化和反序列化处理，JSON主要应用在<strong><code>网络通信的数据格式</code>、<code>Node用来存储项目元数据</code>、<code>Kafka类似的消息平台</code></strong>以及<strong><code>MongoDB等NoSQL数据库</code></strong>中。</span></p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>JSON流行的主要原因</strong></span></p><ul><li><strong>JavaScript语言的复兴和崛起</strong>。</li><li><strong>JSON自身数据结构的简洁和紧凑特性</strong>。</li><li><strong>基于JSON的RESTful API呈现大规模增长</strong>。</li><li><strong>Ecma国际和IETF相关的标准化工作让JSON获得行业认可</strong>。</li></ul><p>JSON的作者<a href="https://en.wikipedia.org/wiki/Douglas_Crockford" target="_blank" rel="noopener">Douglas Crockford</a>在创作时借鉴了JavaScript对象字面量的语法，也就是说JSON本身就是JavaScript对象字面量表示法的一个子集和JavaScript开发能够无缝融合，而JavaScript编程语言的复兴和崛起(<code>前端 + Node后端生态</code>)极大的推动了JSON的流行。</p><p>JSON的数据表示方式非常简洁，结构紧凑易于阅读而且其本身的结构与高级编程语言中的<code>对象|字典|数组</code>结构天然一致，与XML相比更适合面向对象的设计和开发。此外，JSON格式的文档通常比相同内容的XML文档更小，因此在进行网络传输和处理的时候更快、效率更高，JSON本身的这些特性加上相关技术环境的发展让它逐步替代XML成为互联网中主要的数据交换格式。 </p><p>近些年，基于JSON的RESTful API呈现大规模爆炸式增长，包括LinkedIn、Github、Twitter、Facebook、Tumblr和Amazon等公司都提供基于JSON的RESTful API(<strong><code>备注</code></strong> 相关API可以访问<a href="https://www.programmableweb.com" target="_blank" rel="noopener">programmableweb</a>查询)。</p><p>JSON的标准化(成为一项技术标准)，让JSON获得了行业内的认可，下面简单列出主要的标准化进程。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2001 年 JSON由Douglas Crockford提出。</span><br><span class="line">2006 年 JSON由IETF通过RFC 4627进行首次标准化。</span><br><span class="line">2013 年 Ecma国际通过ECMA 404 将JSON正式标准化。</span><br><span class="line">2014 年 Tim Bray发布了RFC 7158和RFC 7159作为原始标准的改进版本(主要修正了4627标准中的一些错误)。</span><br></pre></td></tr></table></figure></p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>JSON数值的类型</strong></span></p><p>JSON数值的类型主要指的是在JSON文档中，键值对冒号(:)后侧值的数据类型，主要包括：</p><ul><li><span style="color:#196"><strong>null</strong></span></li><li><span style="color:#196"><strong>数值</strong></span></li><li><span style="color:#196"><strong>对象</strong></span></li><li><span style="color:#196"><strong>数组</strong></span></li><li><span style="color:#196"><strong>字符串</strong></span></li><li><span style="color:#196"><strong>布尔值</strong></span></li></ul><p><strong><code>null</code></strong>是JSON中的一个特殊值，用来表示某个key(属性)没有值用作占位符，注意不能由引号括起来。</p><p><strong><code>数值</code></strong>遵循JavaScript双精度浮点数格式，支持指数形式，但仅支持十进制数不支持8进制和16进制数。</p><p><strong><code>对象</code></strong>由 { 和 } 把键值对(key-value)括起来，允许设置为空对象，可以内嵌在其他的对象或者是数组中。</p><p><strong><code>数组</code></strong>由 [ 和 ] 把元素括起来，允许设置为空数组且不限制类型，可以内嵌在其他的对象或者是数组中。</p><p><strong><code>字符串</code></strong>由包含在双引号间的N(&gt;=0)个Unicode字符组成可包含由转义字符，但<span style="color:#972">单引号字符串是非法的</span>。</p><p><strong><code>布尔值</code></strong>只存在true和false这两种值，且不能用引号把它们括起来，需注意JSON中没有为<strong>undefined</strong>值。</p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>More …</strong></span></p><p><strong>版本 ➤</strong>JSON的核心标准不会再有新的版本，适用”无版本”理念。</p><p><strong>类型 ➤</strong>JSON数据在文件系统中存储的标准文件类型为.json，IANA为JSON文档指定的MIME(媒体类型)为<span style="color:red">application/json</span>。</p><p><strong>缩进 ➤</strong>JSON的编码规范并不存在与JSON数据缩进相关的话题，主要因为JSON本身是一种序列化格式而非呈现格式，所以缩进对JSON本身而言意义不大，在优化JSON现实的时候，常见的缩进方案是两格缩进或四格缩进。</p><p><strong>工具 ➤</strong> </p><p>在线生成合法JSON文档的工具(1)  <a href="http://jsonmate.com" target="_blank" rel="noopener">JSONmate</a><br>在线生成合法JSON文档的工具(2)  <a href="https://jsoneditoronline.org" target="_blank" rel="noopener">JSON Editor Online</a><br>在线校验JSON文档是否合法的工具(1) <a href="http://json-schema.org" target="_blank" rel="noopener">JSON Schema</a><br>在线校验JSON文档是否合法的工具(2) <a href="http://jsonvalidate.com" target="_blank" rel="noopener">JSON Validate</a><br>快速生成大量测试JSON数据的工具推荐 <a href="https://www.json-generator.com" target="_blank" rel="noopener">JSON Generator</a><br>在线对复杂JSON数据格式化的工具推荐 <a href="http://tool.oschina.net/codeformat/json" target="_blank" rel="noopener">JSON 在线格式化</a></p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/json_01.png?raw=true"></p><div class="tip">创建|编辑JSON文件的时候，建议使用<a href="https://jsoneditoronline.org" target="_blank" rel="noopener">JSON Editor Online</a>在线工具，上图是其基本工作界面。</div><h3 id="JSON-Schema"><a href="#JSON-Schema" class="headerlink" title="JSON Schema"></a>JSON Schema</h3><p><a href="http://json-schema.org" target="_blank" rel="noopener">JSON Schema</a>是对JSON文档中的内容、结构和格式进行的声明，用于校验JSON文档。区别于普通的JSON校验工具，JSON Schema能够对JSON文档执行<strong>语法校验</strong>和严格的<strong>语义校验</strong>。<a href="http://json-schema.org" target="_blank" rel="noopener">JSON Schema</a>这种能够用于校验JSON文档内容和语义的工具能够有效提供服务的安全性，在消息系统中的应用能够确保数据格式的正确性，在API设计领域还能够帮助定义API协议等。</p><p><strong>建议</strong> 从零开始对JSON文档的内容进行声明非常麻烦也没有必要，建议先使用<a href="https://jsonschema.net" target="_blank" rel="noopener">JSONSchema.net网站</a>来根据已有的JSON文档生成对应的Schema文档，然后再根据具体的校验规则来逐步修缮。</p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>基本示例</strong></span></p><p>这里先给出一份简单的JSON文档和对该文档的JSON Schema描述，然后再介绍<code>JSON Schema的核心关键词</code>和具体规则。<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># 文件名 demo.json 注意该行不作为json文件的内容</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"wendingding"</span>,</span><br><span class="line">    <span class="attr">"age"</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="attr">"email"</span>: <span class="string">"wendingding_ios@126.com"</span>,</span><br><span class="line">    <span class="attr">"height"</span>: <span class="number">1.73</span>,</span><br><span class="line">    <span class="attr">"isGoodMan"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"tags"</span>: [</span><br><span class="line">        <span class="string">"javaScript"</span>,</span><br><span class="line">        <span class="string">"object-C"</span>,</span><br><span class="line">        <span class="string">"C++"</span>,</span><br><span class="line">        <span class="string">"swift"</span>,</span><br><span class="line">        <span class="string">"php"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"car"</span>: &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"A"</span>,</span><br><span class="line">        <span class="attr">"number"</span>: <span class="string">"粤A 66666"</span>,</span><br><span class="line">        <span class="attr">"price"</span>: <span class="number">21344.88</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"># 文件名 demo-schema.json 注意该行不作为json文件的内容</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"$schema"</span>: <span class="string">"http://json-schema.org/draft-07/schema#"</span>,</span><br><span class="line">  <span class="attr">"type"</span>: <span class="string">"object"</span>,</span><br><span class="line">  <span class="attr">"required"</span>: [<span class="string">"name"</span>,<span class="string">"age"</span>,<span class="string">"email"</span>,<span class="string">"height"</span>,<span class="string">"isGoodMan"</span>,<span class="string">"tags"</span>,<span class="string">"car"</span>],</span><br><span class="line">  <span class="attr">"properties"</span>: &#123;</span><br><span class="line">    <span class="attr">"name"</span>: &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"string"</span>,</span><br><span class="line">      <span class="attr">"examples"</span>: [ <span class="string">"wendingding"</span> ],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"age"</span>: &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"integer"</span>,</span><br><span class="line">      <span class="attr">"examples"</span>: [ <span class="number">18</span> ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"email"</span>: &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"string"</span>,</span><br><span class="line">      <span class="attr">"examples"</span>: [<span class="string">"wendingding_ios@126.com"</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"height"</span>: &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"number"</span>,</span><br><span class="line">      <span class="attr">"examples"</span>: [ <span class="number">1.73</span> ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"isGoodMan"</span>: &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"boolean"</span>,</span><br><span class="line">      <span class="attr">"examples"</span>: [ <span class="literal">true</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"tags"</span>: &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"array"</span>,</span><br><span class="line">      <span class="attr">"items"</span>: &#123;</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"string"</span>,</span><br><span class="line">        <span class="attr">"examples"</span>: [<span class="string">"javaScript"</span>, <span class="string">"object-C"</span>, <span class="string">"C++"</span>,<span class="string">"swift"</span>,<span class="string">"php"</span>]  </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"car"</span>: &#123;</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"object"</span>,</span><br><span class="line">      <span class="attr">"required"</span>: [<span class="string">"type"</span>,<span class="string">"number"</span>, <span class="string">"price"</span>],</span><br><span class="line">      <span class="attr">"properties"</span>: &#123;</span><br><span class="line">        <span class="attr">"type"</span>: &#123;</span><br><span class="line">          <span class="attr">"type"</span>: <span class="string">"string"</span>,</span><br><span class="line">          <span class="attr">"examples"</span>: [<span class="string">"A"</span>] </span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"number"</span>: &#123;</span><br><span class="line">          <span class="attr">"type"</span>: <span class="string">"string"</span>,</span><br><span class="line">          <span class="attr">"examples"</span>: [<span class="string">"粤A 66666"</span>]   </span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"price"</span>: &#123;</span><br><span class="line">          <span class="attr">"type"</span>: <span class="string">"number"</span>,</span><br><span class="line">          <span class="attr">"examples"</span>: [<span class="number">21344.88</span> ] </span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>推荐使用命令行工具的validate模块来使用Schema对准备好的JSON文档进行校验，列出执行细节：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ npm install -g ujs-jsonvalidate</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/validaten -&gt; /usr/<span class="built_in">local</span>/lib/node_modules/ujs-jsonvalidate/bin/validaten</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/validate -&gt; /usr/<span class="built_in">local</span>/lib/node_modules/ujs-jsonvalidate/bin/validate</span><br><span class="line">+ ujs-jsonvalidate@0.1.2</span><br><span class="line">added 4 packages <span class="keyword">in</span> 7.353s</span><br><span class="line">wendingding$ validate demo.json demo-schema.json </span><br><span class="line">JSON content <span class="keyword">in</span> file demo.json is valid</span><br></pre></td></tr></table></figure><p>因为在Schema文档中name字段是必要的，这里尝试删除demo.json文档中的<code>name:&quot;wendingding&quot;</code>部分，然后重新执行校验会发现提示错误信息。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ cat demo.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"age"</span>: 18,</span><br><span class="line">  <span class="string">"email"</span>: <span class="string">"wendingding_ios@126.com"</span>,</span><br><span class="line">  <span class="string">"height"</span>: 1.73,</span><br><span class="line">  <span class="string">"isGoodMan"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">"tags"</span>: [</span><br><span class="line">    <span class="string">"javaScript"</span>,</span><br><span class="line">    <span class="string">"object-C"</span>,</span><br><span class="line">    <span class="string">"C++"</span>,</span><br><span class="line">    <span class="string">"swift"</span>,</span><br><span class="line">    <span class="string">"php"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"car"</span>: &#123;</span><br><span class="line">    <span class="string">"type"</span>: <span class="string">"A"</span>,</span><br><span class="line">    <span class="string">"number"</span>: <span class="string">"粤A 66666"</span>,</span><br><span class="line">    <span class="string">"price"</span>: 21344.88</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">wendingding$ validate demo.json demo-schema.json </span><br><span class="line">Invalid: Missing required property: name</span><br><span class="line">JSON Schema element: /required/0</span><br><span class="line">JSON Content path:</span><br></pre></td></tr></table></figure></p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>核心关系词说明</strong></span></p><p><strong><code>type</code></strong> 声明对应字段的类型。<br><strong><code>pattern</code></strong> 使用正则表达式来限定字段的值。<br><strong><code>properties</code></strong> 声明对象中的字段，其中包含具体字段的type值等信息。<br><strong><code>$schema</code></strong> 声明遵循的<a href="http://json-schema.org" target="_blank" rel="noopener">JSON Schema</a>标准版本，校验文档时使用该版本的规则。</p><p><strong><code>items</code></strong> 如果字段是数组类型(array)，那么对数组元素的类型等进行限定。<br><strong><code>minimum | maximum</code></strong> 如果是数值类型(number)，那么限定其取值的范围。<br><strong><code>minItems | maxItems</code></strong> 用于校验数组成员的数目，设定最小数目和最大数目。<br><strong><code>examples</code></strong> 提供该字段对应值的示例，在创建schema文档的时候通常根据JSON模板文件的内容生成。<br><strong><code>enum</code></strong> 定义固定的枚举值来限制数组元素的取值，即数组的元素值只能是enum限定集合中的数据。</p><p><strong><code>additionalProperties</code></strong> 将该字段设置为false可以禁止JSON文档当前节点中出现额外的字段。<br><strong><code>required</code></strong> 该数组用于声明JSON文档中所有的必需字段，即必需包含这些字段，否则视为非法文档。<br><strong><code>dependencies</code></strong> 设置字段的依赖关系，即JSON文档中出现了某个字段的出现必须依赖某个特定字段。<br><strong><code>patternProperties</code></strong> 模式属性可以基于正则表达式来声明部分重复的字段名，如<code>^string[1-3]$</code>。</p><div class="tip"><strong>建议</strong> 在工作中如果需要对JSON数据进行严格的语法和语义校验，那么建议先使用典型的JSON文档利用<a href="http://json-schema.org" target="_blank" rel="noopener">JSON Schema在线工具</a>自动生成对应的Schema校验文件，然后再对该文件进行二次编辑，这样效率会更高一些。</div><p>这里给出<code>JSON Schema在线工具</code>的使用示例。<br><img src="https://github.com/flowerField/Source/blob/master/Blog/json_02.gif?raw=true"></p><p><strong>扩展</strong> 前文中在对JSON文档和对应Schema进行校验的时候，在命令行中使用的是<code>validate模块</code>，该模块是<a href="http://jsonvalidate.com" target="_blank" rel="noopener">JSON Validate</a>网站所对应的npm包，具体使用的是名为<a href="https://www.npmjs.com/package/ujs-jsonvalidate" target="_blank" rel="noopener">ujs-jsonvalidate</a>的处理器。此外，<a href="https://github.com/epoberezkin/ajv" target="_blank" rel="noopener">ajv</a>也是Node中优秀的一款JSON校验类库，它本身很简洁且兼容性很好，更多信息可以参考链接地址。</p><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;tip&quot;&gt;在&lt;a href=&quot;http://wendingding.com/2018/04/16/javaScript%E7%B3%BB%E5%88%97%20[05]-javaScript%E5%92%8CJSON/&quot; target=&quot;_blank&quot; r
      
    
    </summary>
    
    
      <category term="javaScript系列" scheme="https://weibo.com/u/3800117445/tags/javaScript%E7%B3%BB%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序实战[03]-衣橱商城首页功能实现</title>
    <link href="https://weibo.com/u/3800117445/2018/10/24/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AE%9E%E6%88%98%5B03%5D-%E8%A1%A3%E6%A9%B1%E5%95%86%E5%9F%8E%E9%A6%96%E9%A1%B5%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0/"/>
    <id>https://weibo.com/u/3800117445/2018/10/24/微信小程序实战[03]-衣橱商城首页功能实现/</id>
    <published>2018-10-24T10:30:39.000Z</published>
    <updated>2018-11-11T13:30:01.175Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本文简单说明衣橱商城首页界面的实现过程，包括对商城首页的结构分析、首页各个区域模块的数据处理以及模块化的抽取等内容。</p></blockquote><h3 id="1-0-最终实现效果"><a href="#1-0-最终实现效果" class="headerlink" title="1.0 最终实现效果"></a>1.0 最终实现效果</h3><p>这里先给出最终实现效果图，并贴出首页(<code>home/index.wxml</code>和<code>home/index.wxss</code>)文件中的代码结构。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx50.gif?raw=true"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//(1) home/index.wxml文件内容</span><br><span class="line"><span class="comment">&lt;!-- 000 引入模板文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">src</span>=<span class="string">'../../src/lib/template/bannerSwiper/bannerSwiper.wxml'</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">src</span>=<span class="string">'../../src/lib/template/timeLimit/timeLimit.wxml'</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">src</span>=<span class="string">'../../src/lib/template/hotCategory/hotCategory.wxml'</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">src</span>=<span class="string">'../../src/lib/template/mustBuy/mustBuy.wxml'</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">src</span>=<span class="string">'../../src/lib/template/weekly/weekly.wxml'</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 001 首页头部视图的处理 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">'bannerSwiperTemplate'</span> <span class="attr">data</span>=<span class="string">'&#123;&#123;banners&#125;&#125;'</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 002 首页我的订单等(自定义组件) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i-tabview</span> <span class="attr">itemArray</span>=<span class="string">'&#123;&#123; itemArray &#125;&#125;'</span>&gt;</span><span class="tag">&lt;/<span class="name">i-tabview</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 003 限时优惠模块 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">'timeLimitViewTemplate'</span> <span class="attr">data</span>=<span class="string">'&#123;&#123;timeLimitListData&#125;&#125;'</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 004 每周推荐模块 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">'weeklyViewTemplate'</span> <span class="attr">data</span>=<span class="string">'&#123;&#123;weeklyData&#125;&#125;'</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 005 必买爆品模块 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">'mustBuyTemplate'</span> <span class="attr">data</span>=<span class="string">'&#123;&#123;topListObj&#125;&#125;'</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 006 热门分类模块 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">'hotViewTemplate'</span> <span class="attr">data</span>=<span class="string">'&#123;&#123;hotListData&#125;&#125;'</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//(2) home/index.wxss文件内容</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 引入模板对应的样式文件 */</span></span><br><span class="line">@<span class="keyword">import</span> <span class="string">"../../src/lib/style/headerView.wxss"</span>;</span><br><span class="line">@<span class="keyword">import</span> <span class="string">"../../src/lib/template/timeLimit/timeLimit.wxss"</span>;</span><br><span class="line">@<span class="keyword">import</span> <span class="string">"../../src/lib/template/hotCategory/hotCategory.wxss"</span>;</span><br><span class="line">@<span class="keyword">import</span> <span class="string">"../../src/lib/template/mustBuy/mustBuy.wxss"</span>;</span><br><span class="line">@<span class="keyword">import</span> <span class="string">"../../src/lib/template/weekly/weekly.wxss"</span>;</span><br><span class="line">@<span class="keyword">import</span> <span class="string">"../../src/lib/template/bannerSwiper/bannerSwiper.wxss"</span>;</span><br></pre></td></tr></table></figure><p><strong>总结</strong> <strong>我们在做任何应用的时候，其实要做的无非两件事件，<span style="color:red">界面处理和业务逻辑处理</span></strong>。简单来说我们可以把任何的需求拆分成<code>UI界面效果</code>和<code>数据处理</code>两部分，通常UI界面效果需要根据特定的数据来实现，或者UI界面由数据进行驱动。如果还要再加一点能力，那也许就是拆分的能力了，即把大的模块拆分成一个个小的适合处理模块的能力。比如这个商城项目，我们首先把整个应用划分为<code>首页商品展示</code>、<code>购物车</code>、<code>订单和支付</code>等大的模块，然后每个大的模块中都包含一堆页面，这样就划分到具体页面的粒度了，如果页面相对来说比较复杂，那么还可以继续拆分。</p><p>这里我们需要实现首页这个模块，需要设计并实现首页的UI视图，该视图需要根据服务器端提供的数据来显示，下文将主要从<strong>UI界面的处理</strong>和<strong>服务器端数据</strong>处理两个维度来说明具体的实现过程。</p><h3 id="2-0-首页数据的处理"><a href="#2-0-首页数据的处理" class="headerlink" title="2.0 首页数据的处理"></a>2.0 首页数据的处理</h3><p>首页的数据处理相对简单，大概可以分成几个步骤。</p><blockquote><p>❏ 开通云开发功能创建环境并在文件存储模块保存图片资源<br>❏ 在数据库中创建界面中需要用到的数据集合，并把具体数据以记录的方式保存<br>❏ 在小程序前端js文件中通过调用云开发平台的API来对数据库中的数据进行操作<br>❏ 获取数据后通过调用this.setData方法来设置属性并重新渲染页面</p></blockquote><p>这里简单给出首页视图和需要用到数据之间的对应关系。<br><img src="https://github.com/flowerField/Source/blob/master/Blog/wx51.png?raw=true"></p><p>在实现首页的时候，我们可以把整个页面简单划分为：<code>(1) 顶部bannaer区域</code>、<code>(2) 订单|售后区域</code>、<code>(3) 限时优惠区域</code>、<code>(4) 每周推荐区域</code>、<code>(5) 必买爆品区域</code>以及<code>(6)热门分类</code>等6个模块。这些模块中除<code>订单|售后区域</code>使用之前封装的自定义组件传递itemArray数组外，其它模块的数据都需要通过和服务器端数据库进行通信来进行获取，其中部分数据在获取后可能还需要做额外的处理。这里贴出js文件中对应的业务逻辑处理相关代码。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/home/index.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    hotListData: [],</span><br><span class="line">    timeLimitListData:[],</span><br><span class="line">    banners: [],</span><br><span class="line">    itemArray: [</span><br><span class="line">      &#123;</span><br><span class="line">        srcImg: <span class="string">"../../../../src/img/order.png"</span>,</span><br><span class="line">        des: <span class="string">"我的订单"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        srcImg: <span class="string">"../../../../src/img/size.png"</span>,</span><br><span class="line">        des: <span class="string">"衣物尺寸"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        srcImg: <span class="string">"../../../../src/img/service.png"</span>,</span><br><span class="line">        des: <span class="string">"售后服务"</span></span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    weeklyData:[],</span><br><span class="line">    topListObj:&#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  onLoad: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//生命周期函数--监听页面加载</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>;  <span class="comment">//保存全局的this指针</span></span><br><span class="line">    wx.cloud.init();  <span class="comment">//初始化操作</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> db = wx.cloud.database(); <span class="comment">//连接数据库</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//000 获取数据库中banners中对应的数据</span></span><br><span class="line">    db.collection(<span class="string">"banners"</span>).get(&#123;</span><br><span class="line">      success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//请求成功那么就使用得到的数据来设置渲染界面</span></span><br><span class="line">        that.setData(&#123;</span><br><span class="line">          banners:res.data</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">PrefixInteger</span>(<span class="params">num, length</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> (<span class="built_in">Array</span>(length).join(<span class="string">'0'</span>) + num).slice(-length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//001 获取数据库中timeLimt中对应的数据</span></span><br><span class="line">    db.collection(<span class="string">"timeLimitList"</span>).doc(<span class="string">"5bcbf152b91567be916f95ce"</span>).get(&#123;</span><br><span class="line">      success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> data = res.data.timeLimitList</span><br><span class="line"></span><br><span class="line">        <span class="comment">//请求成功那么就使用得到的数据来设置渲染界面</span></span><br><span class="line">        that.setData(&#123;</span><br><span class="line">          timeLimitListData: data</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; data.length ; i++)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">         (<span class="function"><span class="keyword">function</span>(<span class="params">j</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">var</span> endTimeStr = data[j].end;</span><br><span class="line">           <span class="keyword">var</span> startTimeStr = data[j].start;</span><br><span class="line">           <span class="keyword">var</span> timer = <span class="string">'timeLimitListData['</span> + j + <span class="string">'].timer'</span></span><br><span class="line">           <span class="keyword">var</span> isStart = <span class="string">'timeLimitListData['</span> + j + <span class="string">'].isStart'</span></span><br><span class="line"></span><br><span class="line">           <span class="comment">//设置倒计时</span></span><br><span class="line">           setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">             <span class="keyword">var</span> resultIsStart = <span class="literal">true</span>;</span><br><span class="line">             <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime(); <span class="comment">//获取当前时间</span></span><br><span class="line">             <span class="keyword">var</span> end = <span class="keyword">new</span> <span class="built_in">Date</span>(endTimeStr).getTime(); <span class="comment">// //设置截止时间</span></span><br><span class="line">             <span class="keyword">var</span> start = <span class="keyword">new</span> <span class="built_in">Date</span>(startTimeStr).getTime(); <span class="comment">// //设置开始时间</span></span><br><span class="line"></span><br><span class="line">             <span class="keyword">if</span>(now - start &lt; <span class="number">0</span>) &#123;</span><br><span class="line">               resultIsStart = <span class="literal">false</span>;</span><br><span class="line">             &#125;</span><br><span class="line"></span><br><span class="line">             <span class="comment">//定义变量 d,h,m,s保存倒计时的时间</span></span><br><span class="line">             <span class="keyword">var</span> d, h, m, s, timeResult = <span class="string">"已结束"</span>;</span><br><span class="line">             <span class="keyword">var</span> leftTime = end - now;    <span class="comment">//计算时间差</span></span><br><span class="line">             <span class="keyword">if</span> (leftTime &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">               h = PrefixInteger(<span class="built_in">Math</span>.floor(leftTime / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> % <span class="number">24</span>), <span class="number">2</span>);</span><br><span class="line">               m = PrefixInteger(<span class="built_in">Math</span>.floor(leftTime / <span class="number">1000</span> / <span class="number">60</span> % <span class="number">60</span>), <span class="number">2</span>);</span><br><span class="line">               s = PrefixInteger(<span class="built_in">Math</span>.floor(leftTime / <span class="number">1000</span> % <span class="number">60</span>), <span class="number">2</span>);</span><br><span class="line">               timeResult = <span class="string">"距结束"</span> + h + <span class="string">":"</span> + m + <span class="string">":"</span> + s;</span><br><span class="line">             &#125;</span><br><span class="line"></span><br><span class="line">             that.setData(&#123;</span><br><span class="line">               [timer]: timeResult,</span><br><span class="line">               [isStart]: resultIsStart,</span><br><span class="line">             &#125;);</span><br><span class="line"></span><br><span class="line">           &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">         &#125;)(i)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//002 获取数据库中weeklyData中对应的数据</span></span><br><span class="line">    db.collection(<span class="string">"weeklyData"</span>).doc(<span class="string">"5bcaa4acb91567be916f204a"</span>).get(&#123;</span><br><span class="line">      success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//请求成功那么就使用得到的数据来设置渲染界面</span></span><br><span class="line">        that.setData(&#123;</span><br><span class="line">          weeklyData: res.data.weeklyData</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// console.log("---", res.data.weeklyData);</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//003 获取数据库中topList中对应的数据</span></span><br><span class="line">    db.collection(<span class="string">"topList"</span>).doc(<span class="string">"5bcae5eeb91567be916f3837"</span>).get(&#123;</span><br><span class="line">      success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//请求成功那么就使用得到的数据来设置渲染界面</span></span><br><span class="line">        that.setData(&#123;</span><br><span class="line">          topListObj: res.data,</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//004 获取数据库中hotList中对应的数据</span></span><br><span class="line">    db.collection(<span class="string">"hotList"</span>).doc(<span class="string">"5bcb3457b91567be916f5510"</span>).get(&#123;</span><br><span class="line">      success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//请求成功那么就使用得到的数据来设置渲染界面</span></span><br><span class="line">        that.setData(&#123;</span><br><span class="line">          hotListData: res.data.hotList,</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  onReady: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//生命周期函数--监听页面初次渲染完成</span></span><br><span class="line">  &#125;,</span><br><span class="line">  onShow: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//生命周期函数--监听页面显示</span></span><br><span class="line">  &#125;,</span><br><span class="line">  onHide: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//生命周期函数--监听页面隐藏</span></span><br><span class="line">  &#125;,</span><br><span class="line">  onUnload: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//生命周期函数--监听页面卸载</span></span><br><span class="line">  &#125;,</span><br><span class="line">  onPullDownRefresh: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//页面相关事件处理函数--监听用户下拉动作</span></span><br><span class="line">  &#125;,</span><br><span class="line">  onReachBottom: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//页面上拉触底事件的处理函数</span></span><br><span class="line">  &#125;,</span><br><span class="line">  onShareAppMessage: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//用户点击右上角分享</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><strong>代码说明</strong> 代码中在设置页面数据的时候调用的是<code>that.setData</code>方法，为什么不用<code>this.setData</code>呢？需要注意的是因为JavaScript语言本身的特性，导致<strong>success回调函数中this的指向跟页面中全局this不同</strong>，所以如果直接使用this来调用setData方法是不正确的。上面的代码中我们先把全局的this保存给that变量，然后当我们需要修改data属性中数据的时候都通过调用<code>that.setData</code>方法实现。还有一个注意点，就是在调用API访问数据库中数据的时候<span style="color:#195">一定要保证拥有对当前数据的操作权限</span>，切记。</p><h3 id="3-0-首页界面的处理"><a href="#3-0-首页界面的处理" class="headerlink" title="3.0 首页界面的处理"></a>3.0 首页界面的处理</h3><p>UI界面的处理其实也很简单，给出建议的处理流程：</p><blockquote><p>❏  <strong><code>拆分</code></strong> 根据最终效果图(高保真图片)来对UI整体界面进行拆分，拆分成更小的模块。<br>❏  <strong><code>标签</code></strong> 先分析每个模块(小的视图结构)需要用到的标签(组件)情况，写具体的标签。<br>❏  <strong><code>样式</code></strong> 根据最终效果图来为标签添加样式完成布局等操作，每个模块都进行处理，写样式。<br>❏  <strong><code>数据</code></strong> 使用js中对应的数据(可以是data中写好的数据 | 网络请求得到的数据)来完成数据填充。<br>❏  <strong><code>事件</code></strong> 如果当前视图拥有交互和事件，则还需给对应标签绑定事件并在js文件中进行逻辑处理。</p></blockquote><p>因为首页的UI界面本身比较复杂，所以这里我尝试以如下的方式进行拆分，再各个击破。<br><img src="https://github.com/flowerField/Source/blob/master/Blog/wx52.png?raw=true"></p><p>在前文中相信大家已经看到最终的时候我是把每个小的模块都抽取成了模板，然后在<code>home/index.wxml</code>和<code>home/index.wxss</code>文件中导入模板(模板的样式)，使用模板并传递参数来实现的。这是简单优化后的代码，我自己在实现的时候开始其实是把所有代码都写在一坨的，<strong>建议大家在开发的时候直接一步到位多使用模板和自定义组件的方式来组织代码</strong>，这样会更清晰，可读性也更好。</p><p>在所有的这些模块中，我个人认为<code>限时优惠模块</code>、<code>每周推荐模块</code>和<code>必买爆品模块</code>是稍微复杂一点的，其中最难处理的应该要数<code>限时优惠模块</code>，因为该模块中用到的组件相对较多，而且数据处理的js代码也会更多一些。该项目中所有的代码您都可以在我文末提供的源码中获取，所以这里就不一个劲的贴代码了。我仅仅指出比较复杂或者需要注意的地方。</p><p><strong>复杂UI界面和数据处理：</strong> 限时优惠的进度限时和倒计时处理、 每周推荐模块的UI处理等。</p><p>这里简单贴一下现在项目的文件结构吧。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">bogon:weapp wendingding$ tree -L 5</span><br><span class="line">.</span><br><span class="line">├── app.js</span><br><span class="line">├── app.json</span><br><span class="line">├── app.wxss</span><br><span class="line">├── pages</span><br><span class="line">│   ├── cart</span><br><span class="line">│   ├── category</span><br><span class="line">│   ├── home</span><br><span class="line">│   │   ├── index.js</span><br><span class="line">│   │   ├── index.json</span><br><span class="line">│   │   ├── index.wxml</span><br><span class="line">│   │   └── index.wxss</span><br><span class="line">│   └── mine</span><br><span class="line">├── project.config.json</span><br><span class="line">├── src</span><br><span class="line">│   ├── img</span><br><span class="line">│   │   ├── cart.png</span><br><span class="line">|   |   | ... 省略</span><br><span class="line">│   │   ├── size.png</span><br><span class="line">│   │   └── stayPayment.png</span><br><span class="line">│   └── lib</span><br><span class="line">│       ├── component</span><br><span class="line">│       │   ├── iview</span><br><span class="line">│       │   └── tabview</span><br><span class="line">│       │       ├── tabview.js</span><br><span class="line">│       │       ├── tabview.json</span><br><span class="line">│       │       ├── tabview.wxml</span><br><span class="line">│       │       └── tabview.wxss</span><br><span class="line">│       ├── style</span><br><span class="line">│       │   └── headerView.wxss</span><br><span class="line">│       └── template</span><br><span class="line">│           ├── bannerSwiper</span><br><span class="line">│           │   ├── bannerSwiper.wxml</span><br><span class="line">│           │   └── bannerSwiper.wxss</span><br><span class="line">│           ├── hotCategory</span><br><span class="line">│           │   ├── hotCategory.wxml</span><br><span class="line">│           │   └── hotCategory.wxss</span><br><span class="line">│           ├── mustBuy</span><br><span class="line">│           │   ├── mustBuy.wxml</span><br><span class="line">│           │   └── mustBuy.wxss</span><br><span class="line">│           ├── timeLimit</span><br><span class="line">│           │   ├── timeLimit.wxml</span><br><span class="line">│           │   └── timeLimit.wxss</span><br><span class="line">│           └── weekly</span><br><span class="line">│               ├── weekly.wxml</span><br><span class="line">│               └── weekly.wxss</span><br><span class="line">└── utils</span><br><span class="line">    └── util.js</span><br></pre></td></tr></table></figure></p><p><a href="https://github.com/flowerField/weapp-yichu" target="_blank" rel="noopener">点击获取项目源码仓库</a></p><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本文简单说明衣橱商城首页界面的实现过程，包括对商城首页的结构分析、首页各个区域模块的数据处理以及模块化的抽取等内容。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;1-0-最终实现效果&quot;&gt;&lt;a href=&quot;#1-0-最终实现效果&quot; class
      
    
    </summary>
    
    
      <category term="微信小程序序列" scheme="https://weibo.com/u/3800117445/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%8F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>javaScript系列 [07]-Date日期类型和定时器方法</title>
    <link href="https://weibo.com/u/3800117445/2018/10/22/javaScript%E7%B3%BB%E5%88%97%20%5B07%5D-%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B%E5%92%8C%E8%AE%A1%E6%97%B6%E5%99%A8/"/>
    <id>https://weibo.com/u/3800117445/2018/10/22/javaScript系列 [07]-日期类型和计时器/</id>
    <published>2018-10-22T05:41:37.000Z</published>
    <updated>2018-11-11T13:30:01.184Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本文介绍JavaScript语言中的<code>Date日期类型</code>，常见的日期格式处理方式以及计时器相关方法(主要包含<code>setInterval</code>以及<code>setTimeOut</code>)。</p></blockquote><p><span style="border:1px solid #000;padding:5px 20px;"><strong>倒计时实现</strong> </span></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div id=<span class="string">"timeID"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">var</span> endTimeStr = <span class="string">"2018/10/30 20:00:00"</span>;</span><br><span class="line">   <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.querySelector(<span class="string">"#timeID"</span>);</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">count</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//获取当前时间</span></span><br><span class="line">       <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">       <span class="comment">//获取截止时间</span></span><br><span class="line">       <span class="keyword">var</span> end = <span class="keyword">new</span> <span class="built_in">Date</span>(endTimeStr).getTime();</span><br><span class="line"></span><br><span class="line">       <span class="comment">//计算时间差</span></span><br><span class="line">       <span class="keyword">var</span> leftTime = end - now;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//定义变量 d,h,m,s保存倒计时的时间</span></span><br><span class="line">       <span class="keyword">var</span> d, h, m, s, timeResult = <span class="string">"已结束"</span>;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> (leftTime &gt;= <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">        d = <span class="built_in">Math</span>.floor(leftTime / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>);</span><br><span class="line">        h = <span class="built_in">Math</span>.floor(leftTime / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> % <span class="number">24</span>);</span><br><span class="line">        m = <span class="built_in">Math</span>.floor(leftTime / <span class="number">1000</span> / <span class="number">60</span> % <span class="number">60</span>);</span><br><span class="line">        s = <span class="built_in">Math</span>.floor(leftTime / <span class="number">1000</span> % <span class="number">60</span>);</span><br><span class="line">        timeResult=<span class="string">"距离结束的时间为："</span> + d + <span class="string">" 天 "</span> + h + <span class="string">" 小时 "</span> + m + <span class="string">" 分钟 "</span> + s + <span class="string">" 秒"</span></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//更新页面信息</span></span><br><span class="line">       oDiv.innerHTML = timeResult;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   setInterval(count,<span class="number">1000</span>);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure><p>这里给出实现的效果</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/date_01.gif?raw=true"></p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>数据填充 |  补零处理</strong> </span></p><p>我们在真实的开发场景中可能需要在对一些数据进行处理的时候进行<span style="color:#195">补零操作</span>。什么意思呢，譬如在上面实现倒计时效果的案例中如果我需要得到的倒计时效果是：<code>05天 04小时 27分钟 32秒</code>的格式，那么就需要在最后进行拼接之前再进行额外的格式化处理。</p><p>我们在显示一个数字的时候(<code>比如是5</code>)，那么想要呈现出的结果可以是<code>5</code>也可以是<code>05</code>，这里我们主要探讨后一种情况。这里给出三种具体的实现方案，推荐使用最后一种(更高效也更直接)。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//参数说明：</span></span><br><span class="line"><span class="comment">//第一个参数:num   要具体处理的数据</span></span><br><span class="line"><span class="comment">//第二个参数:length  目标数据的长度</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第一种实现方案</span></span><br><span class="line"><span class="comment">// function PrefixInteger(num, length) &#123;</span></span><br><span class="line"><span class="comment">//     return (num/Math.pow(10,length)).toFixed(length).substr(2);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种实现方案</span></span><br><span class="line"><span class="comment">// function PrefixInteger(num, length) &#123;</span></span><br><span class="line"><span class="comment">//     return ( "0000000000000000" + num ).substr( -length );</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第三种实现方案</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PrefixInteger</span>(<span class="params">num, length</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">Array</span>(length).join(<span class="string">'0'</span>) + num).slice(-length);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(PrefixInteger(<span class="number">4</span>, <span class="number">2</span>));       <span class="comment">//04</span></span><br><span class="line"><span class="built_in">console</span>.log(PrefixInteger(<span class="number">41</span>, <span class="number">10</span>));     <span class="comment">//0000000041</span></span><br></pre></td></tr></table></figure></p><p>如果前面示例程序中倒计时中具体的时间数值需要2位对齐，不够两位的补零，那么就可以考虑在最终拼接之前调用<code>PrefixInteger方法</code>并指定<code>length的值为2</code>来进行格式化操作。这里给出对具体时间进行格式化的调用代码和结果示例。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">d = PrefixInteger(<span class="built_in">Math</span>.floor(leftTime / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>),<span class="number">2</span>);</span><br><span class="line">h = PrefixInteger(<span class="built_in">Math</span>.floor(leftTime / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> % <span class="number">24</span>),<span class="number">2</span>);</span><br><span class="line">m = PrefixInteger(<span class="built_in">Math</span>.floor(leftTime / <span class="number">1000</span> / <span class="number">60</span> % <span class="number">60</span>),<span class="number">2</span>);</span><br><span class="line">s = PrefixInteger(<span class="built_in">Math</span>.floor(leftTime / <span class="number">1000</span> % <span class="number">60</span>),<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">timeResult = <span class="string">"距离结束的时间为："</span> + d + <span class="string">" 天 "</span> + h + <span class="string">" 小时 "</span> + m + <span class="string">" 分钟 "</span> + s + <span class="string">" 秒"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//timeResult的结果示例：距离结束的时间为：08 天 04 小时 27 分钟 07 秒</span></span><br></pre></td></tr></table></figure><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本文介绍JavaScript语言中的&lt;code&gt;Date日期类型&lt;/code&gt;，常见的日期格式处理方式以及计时器相关方法(主要包含&lt;code&gt;setInterval&lt;/code&gt;以及&lt;code&gt;setTimeOut&lt;/code&gt;)。&lt;/p&gt;
&lt;/b
      
    
    </summary>
    
    
      <category term="javaScript系列" scheme="https://weibo.com/u/3800117445/tags/javaScript%E7%B3%BB%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序实战[02]-衣橱商城云开发数据处理</title>
    <link href="https://weibo.com/u/3800117445/2018/10/19/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AE%9E%E6%88%98%5B02%5D-%E8%A1%A3%E6%A9%B1%E5%95%86%E5%9F%8E%E4%BA%91%E5%BC%80%E5%8F%91%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"/>
    <id>https://weibo.com/u/3800117445/2018/10/19/微信小程序实战[02]-衣橱商城云开发数据处理/</id>
    <published>2018-10-19T10:30:39.000Z</published>
    <updated>2018-11-11T13:30:01.336Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本文简单说明衣橱商城小程序开发过程中的服务器端和数据处理方式。</p></blockquote><h3 id="1-0-服务器端和数据处理方式说明"><a href="#1-0-服务器端和数据处理方式说明" class="headerlink" title="1.0 服务器端和数据处理方式说明"></a>1.0 服务器端和数据处理方式说明</h3><p>在做小程序开发的时候，基本都需要进行服务器端和数据的处理。</p><p>目前来看，服务器端的处理可以有两种方式，一种是自己搭建服务器来处理(可以使用<code>Node</code>、<code>Apache</code>等)也可以选择直接使用小程序开发工具中已经集成的<a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html" target="_blank" rel="noopener">云开发</a>来处理。</p><p>在<a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html" target="_blank" rel="noopener">小程序.云开发官方文档</a>中有如下描写。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">开发者在开发小程序、小游戏时，无需搭建服务器，即可使用云端能力。</span><br><span class="line">云开发为开发者提供完整的云端支持，弱化了后端和运维的概念，无需搭建服务器。</span><br><span class="line">只需要使用平台提供的 API 进行核心业务开发，即可实现快速上线和迭代，同时这与云服务相互兼容。</span><br></pre></td></tr></table></figure></p><p><strong>云开发提供3种基础能力支持</strong></p><blockquote><p>❏ <strong>云函数</strong> &nbsp;&nbsp;&nbsp;云端运行的代码，微信私有协议天然鉴权，只需编写业务逻辑代码<br>❏ <strong>数据库</strong> &nbsp;&nbsp;&nbsp;支持既能在小程序前端操作，也能在云函数中读写的 JSON 数据库<br>❏ <strong>文件存储</strong> 支持小程序前端直接上传/下载云端文件，在云开发控制台可视化管理</p></blockquote><div class="tip"> 使用云开发功能必须填写 AppID，且云开发能力从基础库 2.2.3 开始支持，需要考虑兼容性问题。APPID可以在登录微信公众平台后的设置 → 开发者设置中获取。</div><h3 id="2-0-开始使用云开发"><a href="#2-0-开始使用云开发" class="headerlink" title="2.0 开始使用云开发"></a>2.0 开始使用云开发</h3><p><strong>001 开通云开发功能</strong></p><p>当<code>使用APPID新建微信小程序项目</code>后，在开发者工具工具栏左侧，点击 “云开发” 按钮即可开通云开发。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx40.png?raw=true"></p><p><strong>002 创建云开发环境</strong></p><p>开通后我们能获得一套云开发环境，各个环境相互隔离，每个环境都包含独立的数据库实例、存储空间、云函数配置等资源。每个环境都有唯一的环境 ID 标识，初始创建的环境自动成为默认环境。</p><p>在创建开发环境的时候需要填写：<code>环境的名称</code>和<code>环境的ID</code>。其中<span style="color:#195">环境的ID 是在使用云服务时需要用到的全局唯一标识符，一经创建便不可修改</span>。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx41.png?raw=true"></p><div class="tip"><strong>注意</strong> 每个小程序帐号可免费创建两个环境，环境的ID可以直接使用系统默认生成的。在实际开发中，建议每一个正式环境都搭配一个测试环境，所有功能先在测试环境测试完毕后再上到正式环境。</div><p><strong>003 云开发控制台说明</strong></p><p>当云开发环境创建好之后，我们将能够看到如下图所示的功能界面。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx42.png?raw=true"></p><p>云开发控制台是管理云开发资源的地方，主要提供以下支持:</p><blockquote><p>❏ <strong>概览</strong>        &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;查看云开发的基础使用数据。<br>❏ <strong>云函数</strong>    &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;查看云函数列表、配置、日志和监控。<br>❏ <strong>数据库</strong>   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;管理数据库，支持对数据进行增删改查、管理索引和数据库访问权限等操作。<br>❏ <strong>统计分析</strong> &nbsp;&nbsp;查看云开发资源具体使用的统计信息，包括<code>API调用图表</code>以及<code>存储容量和CDN浏览</code>等。<br>❏ <strong>存储管理</strong>  &nbsp;&nbsp;管理存储空间，可用于保存图片等资源，支持创建文件夹、批量上传和删除等操作。<br>❏ <strong>用户管理</strong>  &nbsp;&nbsp;查看小程序用户的具体信息，包括<code>头像</code>、<code>昵称</code>、<code>城市</code>、<code>最后一次进入时间</code>等信息。</p></blockquote><h3 id="3-0-数据库和文件存储"><a href="#3-0-数据库和文件存储" class="headerlink" title="3.0 数据库和文件存储"></a>3.0 数据库和文件存储</h3><p><span style="border:1px solid #000;padding:5px 20px;"><strong>数据库说明</strong> </span></p><p>云开发环境为我们提供了一个 <code>JSON 数据库</code>，与典型的关系型数据库所不同的是<span style="color:#195">JSON数据库中的每条记录都是一个 JSON 格式的对象</span>。一个数据库可以有多个集合（相当于关系型数据中的表），集合可看做一个 JSON 数组，数组中的每个对象就是一条记录，记录的格式是 JSON 对象。<strong>[备注]</strong> 关于json相关知识点可以参考<a href="http://wendingding.com/2018/04/16/javaScript%E7%B3%BB%E5%88%97%20[05]-javaScript%E5%92%8CJSON/" target="_blank" rel="noopener">javaScript和JSON</a>这篇文章。</p><p><strong> ✧ 云开发环境中对数据库的操作</strong></p><p>云开发环境中的数据库对<span style="color:red"><strong>集合</strong></span>(相当于关系型数据库中的表)的操作主要有：<strong>添加集合</strong>、<strong>删除集合</strong>。</p><p>在添加集合的时候需要给集合设置一个名称，对某个特定集合的操作主要有：<code>添加记录</code>、<code>编辑记录</code>、<code>删除记录</code>等操作，每条记录中可以包含多个字段。其中记录就相当于是关系型数据库中的某一行，而字段则相当于是关系型数据库中的某一列。</p><p>在添加记录的时候支持手动创建也支持直接导入<code>json</code>或<code>csv</code>文件，因为小程序中需要使用到的数据通常都会比较大，所以建议在具体处理的时候选择直接导入文件会更方便一些。这里给出手动创建和导入json文件两种具体的操作示例。</p><p><strong><code>001 手动创建</code></strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(1) 新建集合</span><br><span class="line">(2) 添加记录</span><br><span class="line">(3) 添加字段，选择字段类型，设置值</span><br><span class="line">(4) 确定保存</span><br></pre></td></tr></table></figure></p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx43.gif?raw=true"></p><p><strong><code>002 直接导入</code></strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(1) 新建集合</span><br><span class="line">(2) 提前准备好json文件(动图中已提前准备好demo.json文件)</span><br><span class="line">(3) 导入文件，选择文件路径(导入)</span><br><span class="line">(4) 确定保存</span><br></pre></td></tr></table></figure></p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx44.gif?raw=true"></p><p><strong> ✧ 小程序端对数据库的操作</strong></p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx45.png?raw=true"></p><p>云开发环境中的数据库其主要作用是为前端的小程序应用提供具体的数据。</p><p>这部分主要介绍在具体写小程序代码时，如何连接到对应的数据库并通过代码的方式来对数据库中的数据进行操作。在小程序的js文件中我们可以通过直接调用云开发中数据库相关的API即可对数据库中的数据进行增删改查操作，更多的细节可以参考<a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/database.html" target="_blank" rel="noopener">官方文档</a>的说明。这里仅简单说明连接和操作数据库的基本流程并给出示例代码。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx46.png?raw=true"></p><p><strong>小程序端操作数据库的基本流程</strong></p><blockquote><p>① <strong>云能力初始化</strong><br>② <strong>获取数据库的引用</strong><br>③ <strong>获取数据库指定集合的引用</strong><br>④ <strong>调用相关API执行CRUD操作</strong></p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//001 初始化操作(云能力)</span></span><br><span class="line">wx.cloud.init();</span><br><span class="line"></span><br><span class="line"><span class="comment">//002 连接数据库</span></span><br><span class="line"><span class="keyword">const</span> db = wx.cloud.database();</span><br><span class="line"></span><br><span class="line"><span class="comment">//003 获取数据库中指定的集合并查询获取所有的内容返回</span></span><br><span class="line">db.collection(<span class="string">"banners"</span>).get(&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//004 请求成功的回调</span></span><br><span class="line">success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//打印查看返回的数据(默认已转换为js数据)</span></span><br><span class="line">    <span class="built_in">console</span>.log(res);  <span class="comment">//&#123;data:[...],errMsg:"collection.get.ok'"&#125;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>代码说明</strong></p><p>注意用到的<code>wx.cloud.init</code>和<code>wx.cloud.database</code>等方法都是小程序提供的系统API，您可以通过查看<a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-client-api/database/" target="_blank" rel="noopener">官方API文档</a>来学习这些方法的具体用法。上面的代码中我们首先进行了初始化操作，然后连接上了云开发环境中默认的数据库(<span style="color:#f39">如果存在多套开发环境那么需要通过给函数传递参数的方式来区分</span>)，之后通过<code>collection</code>方法获取默认数据库中<code>banners集合</code>的引用并调用get方法来获取集合中所有的数据。如果调用成功，那么在success回调函数中我们可以通过该回调的参数来获取具体的数据，该数据默认已完成了反序列处理。</p><div class="tip"><br>您在使用上面代码连接和管理数据库中数据的时候，如果操作失败很大可能是因为数据库中对应集合读写权限的问题。<br>在设置集合读写权限的时候，您需要根据具体的场景来处理，调试阶段建议设置为所有用户可读。<br><pre><br><div>数据中每个集合的读写权限有如下情况：</div><br><div>[1] 所有用户可读，仅创建者及管理员可写</div><br><div>[2] 仅创建者及管理员可读写</div><br><div>[3] 所有用户可读，仅管理员可写</div><br><div>[4] 仅管理员可读写</div></pre><br></div><p><strong> ✧ 数据库操作核心API简单说明</strong></p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx47.png?raw=true"></p><p><strong>注意</strong>  数据库API都是懒执行的，也就是说只有真实需要网络请求的 API 调用才会发起网络请求，其余如获 s取数据库、集合、记录的引用、在集合上构造查询条件等都不会触发网络请求。</p><p><strong>这里列出数据库操作中会触发网络请求的 API </strong><br><span class="propWX-green ">remove</span>       删除一个记录数据<br><span class="propWX-green ">update</span>       更新集合/记录数据<br><span class="propWX-green bg-red">set</span>       替换更新一个记录数据<br><span class="propWX-green bg-red">get</span>       获取集合/记录的数据<br><span class="propWX-green ">add</span>       在集合上添加新的记录<br><span class="propWX-green ">count</span>       统计查询语句对应的记录条数</p><p>假设我们在进行小程序开发的过程中，使用了云开发功能并在数据库中拥有名为<code>banners</code>的集合，在该集合中拥有多条记录，其中有一条记录的_id值为<code>W8mGeAIrVDZJFtFt</code>，这里给出一段对数据库中数据操作的示例代码。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//001 初始化操作(云能力)</span></span><br><span class="line">wx.cloud.init();</span><br><span class="line"></span><br><span class="line"><span class="comment">//002 连接数据库</span></span><br><span class="line"><span class="keyword">const</span> db = wx.cloud.database();</span><br><span class="line"></span><br><span class="line"><span class="comment">//演示[01] 查询数据库中指定集合的所有记录数据</span></span><br><span class="line">db.collection(<span class="string">"banners"</span>).get(&#123;</span><br><span class="line">  success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"集合数据"</span>,res.data);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//演示[02] 查询数据库中指定集合的特定记录的数据</span></span><br><span class="line">db.collection(<span class="string">"banners"</span>).doc(<span class="string">"W8mGeAIrVDZJFtFt"</span>).get(&#123;</span><br><span class="line">  success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"集合中某条记录的数据"</span>,res.data);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//演示[03] 查询数据库中指定集合的特定记录的数据并限定返回字段</span></span><br><span class="line">db.collection(<span class="string">"banners"</span>)</span><br><span class="line">  .doc(<span class="string">"W8mGeAIrVDZJFtFt"</span>)</span><br><span class="line">  .field(&#123;</span><br><span class="line">      id:<span class="literal">true</span></span><br><span class="line">  &#125;).get(&#123;</span><br><span class="line">  success: <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"限定字段"</span>, res.data);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//演示[04] 使用Promise风格的方式调用</span></span><br><span class="line">db.collection(<span class="string">'banners'</span>).doc(<span class="string">'W8mGeAIrVDZJFtFt'</span>).get().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Promise风格"</span>,res.data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>给出上面js代码的执行结果<br><img src="https://github.com/flowerField/Source/blob/master/Blog/wx48.png?raw=true"></p><div class="tip">说明：调用api的时候可以选择使用回调函数或Promise风格的方式。</div><p><span style="border:1px solid #000;padding:5px 20px;"><strong>文件存储说明</strong> </span></p><p>小程序的云开发环境<span style="color:#195">支持小程序前端对云端文件直接进行上传和下载的操作，且可以在云开发控制台对文件进行可视化的管理，支持对文件进行访问权限的控制</span>，使用简单而且非常的方便。</p><p>我们可以把项目中需要用到的图片等资源通过云开发控制台直接上传并保存到<strong><code>存储管理模块</code></strong>中，然后在项目中需要用到的地方(或者数据库的对应字段中)直接以URL路径的方式进行引用即可。</p><p>此外，存储管理模块还提供了小程序客户端以及后端对文件进行上传、下载、删除等操作的两组API，直接调用即可。这里简单列出小程序客户端中相关的API操作，更多细节请参考<a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-client-api/storage/" target="_blank" rel="noopener">官方文档</a>。</p><blockquote><p>❏ 上传文件  <code>uploadFile()</code><br>❏ 下载文件  <code>downloadFile()</code><br>❏ 删除文件  <code>deleteFile()</code><br>❏ 临时换链  <code>getTempFileURL()</code></p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//001 文件上传</span></span><br><span class="line"><span class="comment">//参数说明:</span></span><br><span class="line"><span class="comment">//success成功回调</span></span><br><span class="line"><span class="comment">//fail        失败回调</span></span><br><span class="line"><span class="comment">//complete结束回调</span></span><br><span class="line"><span class="comment">//cloudPath云存储路径String类型</span></span><br><span class="line"><span class="comment">//filePath要上传文件资源的路径String类型</span></span><br><span class="line"><span class="comment">//headerHTTP 请求 Header, header 中不能设置 RefererObject类型</span></span><br><span class="line">wx.cloud.uploadFile(&#123;</span><br><span class="line">  cloudPath: <span class="string">'/wendingding.png'</span>,</span><br><span class="line">  filePath: <span class="string">''</span>, <span class="comment">// 小程序临时文件路径</span></span><br><span class="line">  success: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// get resource ID</span></span><br><span class="line">    <span class="built_in">console</span>.log(res.fileID)</span><br><span class="line">  &#125;,</span><br><span class="line">  fail: <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// handle error</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//002 文件下载</span></span><br><span class="line"><span class="comment">//参数说明:</span></span><br><span class="line"><span class="comment">//fileID云文件 IDString类型</span></span><br><span class="line"><span class="comment">//success成功回调</span></span><br><span class="line"><span class="comment">//   tempFilePath临时文件路径    String类型</span></span><br><span class="line"><span class="comment">//   statusCode    返回的HTTP状态码Number类型</span></span><br><span class="line">wx.cloud.downloadFile(&#123;</span><br><span class="line">  fileID: <span class="string">'a7xzcb'</span>,</span><br><span class="line">  success: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// get temp file path</span></span><br><span class="line">    <span class="built_in">console</span>.log(res.tempFilePath)</span><br><span class="line">  &#125;,</span><br><span class="line">  fail: <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// handle error</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//003 文件删除</span></span><br><span class="line"><span class="comment">//参数说明:</span></span><br><span class="line"><span class="comment">//fileList云文件ID字符串数组</span></span><br><span class="line">wx.cloud.deleteFile(&#123;</span><br><span class="line">  fileList: [<span class="string">'a7xzcb'</span>],</span><br><span class="line">  success: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// handle success</span></span><br><span class="line">    <span class="built_in">console</span>.log(res.fileList)</span><br><span class="line">  &#125;,</span><br><span class="line">  fail: <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// handle error</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><div class="tip">说明：文件操作api的调用同样支持回调函数和Promise两种风格。</div><h3 id="4-0-衣橱商城中部分数据的处理"><a href="#4-0-衣橱商城中部分数据的处理" class="headerlink" title="4.0 衣橱商城中部分数据的处理"></a>4.0 衣橱商城中部分数据的处理</h3><p>前面的篇幅一直在介绍小程序中云开发平台相关的知识点，接下来我们回到衣橱商城这个实际的项目中，该小程序中的所有数据我都暂时直接使用云开发环境来处理。在项目中实际进行处理的时候，主要分成三部分内容。</p><p><strong>001 把项目中需要用到的图片等资源上传并保存到云开发环境的存储管理模块</strong>。支持批量上传，而可以自己创建|设置文件的具体路径，图片上传后点击详情能获取URL地址。</p><p><strong>002 根据项目的情况在云开发环境数据库中创建多个对应的数据集合并添加详细的信息(记录)</strong>。首页模块中需要的数据集合为：<code>banners</code>(顶部轮播图)、<code>hotList</code>(热门分类数据)、<code>timeLimitList</code>(限时优惠数据)、<code>topList</code>(热门商品数据)、<code>weeklyData</code>(每周推荐数据)。</p><p><strong>003 在小程序客户端通过调用对应的api来对数据库的数据进行操作</strong>。这里主要是在首页的javaScript文件(<code>home.js</code>)文件中调用api用来获取数据。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx49.gif?raw=true"></p><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本文简单说明衣橱商城小程序开发过程中的服务器端和数据处理方式。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;1-0-服务器端和数据处理方式说明&quot;&gt;&lt;a href=&quot;#1-0-服务器端和数据处理方式说明&quot; class=&quot;headerlink&quot;
      
    
    </summary>
    
    
      <category term="微信小程序序列" scheme="https://weibo.com/u/3800117445/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%8F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序实战[01]-衣橱商城结构和我的页面</title>
    <link href="https://weibo.com/u/3800117445/2018/10/18/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AE%9E%E6%88%98%5B01%5D-%E8%A1%A3%E6%A9%B1%E5%95%86%E5%9F%8E%E9%A1%B9%E7%9B%AE%E6%95%B4%E4%BD%93%E7%BB%93%E6%9E%84/"/>
    <id>https://weibo.com/u/3800117445/2018/10/18/微信小程序实战[01]-衣橱商城项目整体结构/</id>
    <published>2018-10-18T10:30:39.000Z</published>
    <updated>2018-11-11T13:30:01.381Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>因为需要完整的综合项目来贯穿小程序开发中的基础知识，所以我在自己使用的小程序清单中选择了一款优秀小程序(<code>MatchU码尚</code>)来进行实现和学习，项目中用到的数据和图片等资源有部分来源于此，该项目<code>仅做技术演示和个人学习使用</code>。本文先对该综合项目、开发小程序项目前期的准备工作进行说明，然后从零开始构建<code>&quot;衣橱定制商城小程序&quot;</code>，并完成tabbar栏和我的页面视图搭建。</p></blockquote><p><strong>说明</strong> 这是篇说明性博文，不会过多涉及项目的具体代码，该系列文章的源码您可以<a href="https://github.com/flowerField/weapp-yichu" target="_blank" rel="noopener">点击此处下载</a>。</p><p><strong>1.0 开发前准备</strong></p><p>[1] <a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener">官网注册微信小程序开发者账号</a>。<br>[2] <a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html" target="_blank" rel="noopener">官网注册并完善小程序基本信息后，下载微信开发者工具并安装</a>。<br>[3] <a href="">在电脑合适的位置新建空的项目目录，在设置-开发设置中获取APPID初始化项目</a>。</p><p><strong>2.0 项目的功能模块</strong></p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx35.png?raw=true"></p><p><strong>3.0 项目的初始化</strong></p><p>在使用微信开发者工具选择项目目录，输入appID（也可以使用测试的appID）后勾选<code>建立普通快速模板</code>，那么我们将得到一个最简单的项目，该项目的整体结构如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── app.js</span><br><span class="line">├── app.json</span><br><span class="line">├── app.wxss</span><br><span class="line">├── pages</span><br><span class="line">│   ├── index</span><br><span class="line">│   │   ├── index.js</span><br><span class="line">│   │   ├── index.wxml</span><br><span class="line">│   │   └── index.wxss</span><br><span class="line">│   └── logs</span><br><span class="line">│       ├── logs.js</span><br><span class="line">│       ├── logs.json</span><br><span class="line">│       ├── logs.wxml</span><br><span class="line">│       └── logs.wxss</span><br><span class="line">├── project.config.json</span><br><span class="line">└── utils</span><br><span class="line">    └── util.js</span><br></pre></td></tr></table></figure><p>对默认的项目结构进行调整。具体调整内容为:</p><pre><code>001 删除默认的两个页面 index 和 logs文件夹。 002 在pages文件夹中新建home、cart、mine和category文件夹并创建对应的pages页面(命名为index)。 003 在项目根目录下面新建src目录，该目录用于存放项目中需要用到的资源，并调整app.json文件的配置项。 004 在src目录下新建img目录用于存储项目中需要用到的图片资源，新建lib目录用于存放需要用到的第三方库和组件。</code></pre><p>调整后的项目文件结构如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── app.js</span><br><span class="line">├── app.json</span><br><span class="line">├── app.wxss</span><br><span class="line">├── pages</span><br><span class="line">│   ├── cart</span><br><span class="line">│   │   ├── index.js</span><br><span class="line">│   │   ├── index.json</span><br><span class="line">│   │   ├── index.wxml</span><br><span class="line">│   │   └── index.wxss</span><br><span class="line">│   ├── category</span><br><span class="line">│   │   ├── index.js</span><br><span class="line">│   │   ├── index.json</span><br><span class="line">│   │   ├── index.wxml</span><br><span class="line">│   │   └── index.wxss</span><br><span class="line">│   ├── home</span><br><span class="line">│   │   ├── index.js</span><br><span class="line">│   │   ├── index.json</span><br><span class="line">│   │   ├── index.wxml</span><br><span class="line">│   │   └── index.wxss</span><br><span class="line">│   └── mine</span><br><span class="line">│       ├── index.js</span><br><span class="line">│       ├── index.json</span><br><span class="line">│       ├── index.wxml</span><br><span class="line">│       └── index.wxss</span><br><span class="line">├── project.config.json</span><br><span class="line">├── src</span><br><span class="line">│   ├── img</span><br><span class="line">│   └── lib</span><br><span class="line">└── utils</span><br><span class="line">    └── util.js</span><br><span class="line"></span><br><span class="line">9 directories, 31 files</span><br></pre></td></tr></table></figure></p><p><strong>4.0 项目tabbar实现</strong></p><p>[1] 准备好项目tabbar部分需要的图标，存放到src/img目录下，这些图标可以在<a href="http://iconfont.cn/collections/detail?cid=918" target="_blank" rel="noopener">iconfont</a>网站获取。</p><p>[2] <code>对app.json</code>文件的字段进行配置，主要设置项目的导航背景、标题文字以及设置tabBar选项信息。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//app.json文件中的部分配置项</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"pages"</span>: [</span><br><span class="line">    <span class="string">"pages/home/index"</span>,</span><br><span class="line">     ...省略</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"window"</span>: &#123;</span><br><span class="line">    <span class="attr">"backgroundTextStyle"</span>: <span class="string">"light"</span>,</span><br><span class="line">    <span class="attr">"navigationBarBackgroundColor"</span>: <span class="string">"#110e1e"</span>,</span><br><span class="line">    <span class="attr">"navigationBarTitleText"</span>: <span class="string">"衣橱商城"</span>,</span><br><span class="line">    <span class="attr">"navigationBarTextStyle"</span>: <span class="string">"white"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"tabBar"</span>: &#123;</span><br><span class="line">    <span class="attr">"selectedColor"</span>: <span class="string">"#000000"</span>,</span><br><span class="line">    <span class="attr">"list"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"pagePath"</span>: <span class="string">"pages/home/index"</span>,</span><br><span class="line">        <span class="attr">"text"</span>: <span class="string">"首页"</span>,</span><br><span class="line">        <span class="attr">"iconPath"</span>: <span class="string">"src/img/home.png"</span>,</span><br><span class="line">        <span class="attr">"selectedIconPath"</span>: <span class="string">"src/img/homeSelected.png"</span></span><br><span class="line">      &#125;</span><br><span class="line">      ....省略</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx36.gif?raw=true"></p><p><strong>5.0 我的页面视图实现</strong></p><p>在项目的整体结构和tabbar选项卡配置好之后，先尝试实现<code>我的</code>页面视图。</p><p>先给出<code>我的</code>页面的整体界面实现效果。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx37.gif?raw=true"></p><p>因为该页面的布局相对来说比较简单，而且要处理的数据也相对较少，这里在页面中需要用到数据的地方我们先暂时使用假数据来代替，稍微后面一点的时候再进行具体的优化。通过观察上面的实现效果，我们可以把<code>我的</code>页面分解成几个组成部分，每个部分则采用不同的策略来进行实现。</p><blockquote><p>❏  <span style="color:#195"><strong>头部视图</strong></span><br>    采用小程序中的基础组件<code>text</code>、<code>image</code>、<code>view</code>等并设置样式来实现。</p><p>❏  <span style="color:#195"><strong>cell视图(多组)</strong></span><br>    采用第三方组件库来实现，这里使用到的是iview中的<code>cell</code>和<code>panel</code>以及<code>cell-group</code>组件。<br>    <strong>[步骤]</strong> 把第三方库下载并导入到项目中(<code>src/lib/iview</code>) → 在json文件中配置<code>usingComponents</code> → 在wxml中使用组件并设置属性。</p><p>❏  <span style="color:#195"><strong>待付款、已付款区域视图</strong></span><br>    因为该视图在首页中也有用到，所以这里考虑把这一块的视图封装成自定义组件来处理。<br>    <strong>[步骤]</strong> 自定义组件(<code>src/lib/tabview</code>) →  在json文件中配置 -&gt; 在wxml中使用自定义组件。</p></blockquote><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx39.png?raw=true"></p><p><strong><code>附录01: tabview自定义组件内部实现细节</code></strong><br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">001 自定义组件的基本操作</span><br><span class="line">    (1) 在项目的src/lib目录下新建tabview文件夹。</span><br><span class="line">    (2) 在<span class="selector-tag">tabview</span>目录下新建<span class="selector-tag">component</span>文件并命名为<span class="selector-tag">tabview</span>。</span><br><span class="line">    (3) 新建<span class="selector-tag">component</span>的时候会默认生成<span class="selector-tag">js</span>\<span class="selector-tag">wxml</span>\<span class="selector-tag">json</span>\<span class="selector-tag">wxss</span>四个文件，其中<span class="selector-tag">json</span>文件中已配置<span class="selector-tag">component</span>为<span class="selector-tag">true</span>.</span><br><span class="line">    (4) 在<span class="selector-tag">wxml</span>文件中编辑内容。</span><br><span class="line">    (5) 在<span class="selector-tag">wxss</span>文件中设置样式。</span><br><span class="line">    (6) 在<span class="selector-tag">js</span>文件中设置初始数据和事件方法。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">002 <span class="selector-tag">wxml</span>文件中的内容</span><br><span class="line">&lt;view class='content-view'&gt;</span><br><span class="line">    &lt;view class='content-view-cell' wx:for='&#123;&#123;itemArray&#125;&#125;'&gt;</span><br><span class="line">      &lt;image class='content-view-cell-img' src='&#123;&#123;item.srcImg&#125;&#125;'&gt;&lt;/image&gt;</span><br><span class="line">      &lt;text  class='content-view-cell-des'&gt;&#123;&#123;item.des&#125;&#125;&lt;/text&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">003 <span class="selector-tag">wxss</span>文件中的内容</span><br><span class="line"><span class="selector-class">.content-view</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">150</span>rpx;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content-view-cell</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">150</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">150</span>rpx;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content-view-cell-img</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">70</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">70</span>rpx;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">40</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content-view-cell-des</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">120</span>rpx;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">150</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">150</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">004 <span class="selector-tag">js</span>文件中内容</span><br><span class="line"><span class="selector-tag">Component</span>(&#123;</span><br><span class="line">  //设置自定义组件的属性列表</span><br><span class="line">  <span class="selector-tag">properties</span>: &#123;</span><br><span class="line">    <span class="attribute">itemArray</span>:&#123;</span><br><span class="line">      type:Array</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><strong><code>附录02: mine页面wxml文件内容</code></strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 001 头部视图区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'mine-info'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'mine-info-left'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'mine-info-left-name'</span>&gt;</span>&#123;&#123; userName &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span>  <span class="attr">class</span>=<span class="string">'mine-info-left-edit'</span> <span class="attr">src</span>=<span class="string">'../../src/img/edit.png'</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'mine-info-left-des'</span>&gt;</span>衣橱，定制您成功的起点。<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'mine-info-right'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">'&#123;&#123; userPic &#125;&#125;'</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 002 cell视图处理[第一组] --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i-panel</span> <span class="attr">title</span>=<span class="string">" "</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i-cell</span> <span class="attr">value</span>=<span class="string">'全部订单'</span> <span class="attr">title</span>=<span class="string">"我的订单"</span> <span class="attr">is-link</span> &gt;</span><span class="tag">&lt;/<span class="name">i-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">i-panel</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 003 自定义组件处理 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i-tabview</span> <span class="attr">itemArray</span>=<span class="string">'&#123;&#123;itemArray&#125;&#125;'</span>&gt;</span><span class="tag">&lt;/<span class="name">i-tabview</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 004 cell视图处理[第二组] --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">i-panel</span> <span class="attr">title</span>=<span class="string">" "</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i-cell-group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">i-cell</span>  <span class="attr">title</span>=<span class="string">"心意卡"</span> <span class="attr">is-link</span> &gt;</span><span class="tag">&lt;/<span class="name">i-cell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">i-cell</span>  <span class="attr">title</span>=<span class="string">"优惠券"</span> <span class="attr">is-link</span> &gt;</span><span class="tag">&lt;/<span class="name">i-cell</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">i-cell-group</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">i-panel</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 005 cell视图处理[都三组] --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i-panel</span> <span class="attr">title</span>=<span class="string">" "</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i-cell-group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">i-cell</span>  <span class="attr">title</span>=<span class="string">"我的地址"</span> <span class="attr">is-link</span> &gt;</span><span class="tag">&lt;/<span class="name">i-cell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">i-cell</span>  <span class="attr">title</span>=<span class="string">"我的尺寸"</span> <span class="attr">is-link</span> &gt;</span><span class="tag">&lt;/<span class="name">i-cell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">i-cell</span>  <span class="attr">title</span>=<span class="string">"关于我们"</span> <span class="attr">is-link</span> &gt;</span><span class="tag">&lt;/<span class="name">i-cell</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">i-cell-group</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">i-panel</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 006 退出功能模块 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'mine-logout'</span>&gt;</span>退出<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure></p><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;因为需要完整的综合项目来贯穿小程序开发中的基础知识，所以我在自己使用的小程序清单中选择了一款优秀小程序(&lt;code&gt;MatchU码尚&lt;/code&gt;)来进行实现和学习，项目中用到的数据和图片等资源有部分来源于此，该项目&lt;code&gt;仅做技术演示和个人学
      
    
    </summary>
    
    
      <category term="微信小程序序列" scheme="https://weibo.com/u/3800117445/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%8F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>网络编程系列 术语</title>
    <link href="https://weibo.com/u/3800117445/2018/10/16/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%B3%BB%E5%88%97-%E5%9F%BA%E6%9C%AC%E6%9C%AF%E8%AF%AD/"/>
    <id>https://weibo.com/u/3800117445/2018/10/16/网络编程系列-基本术语/</id>
    <published>2018-10-16T01:31:25.000Z</published>
    <updated>2018-11-11T13:30:01.390Z</updated>
    
    <content type="html"><![CDATA[<p><span class="item-class">Web</span> <code>World Wide Web</code>，万维网(<code>www</code>)。</p><p><span class="item-class">W3C</span> <code>World Wide Web Consortium</code>，万维网联盟。</p><p><span class="item-class">DOM</span> <code>Document Object Model</code>，文档对象模型。</p><p><span class="item-class">BOM</span> <code>Browser Object Model</code>，浏览器对象模型。</p><p><span class="item-class">js</span> <code>javaScript</code>，我们常说的 js 文件其实指的是JavaScript文件。</p><p><span class="item-class">HTML</span> <code>HyperText Markup Language</code>，超文本标记语言(Web技术的核心)。</p><p><span class="item-class">XML</span> <code>Extensible Markup Language</code>，可扩展标记语言(一种标准的数据格式)。</p><p><span class="item-class">CSS</span> <code>Cascading Style Sheets</code>，层叠样式表(用于给HTML或XML设置样式和布局的语言)。</p><p><span class="item-class">Api</span> <code>Application Programming Interface</code>，应用程序编程接口（一堆有用函数的名称）。</p><p><span class="item-class">HTTP</span> <code>HyperText Transfer Protocol</code>，超文本传协议(互联网中应用最广泛的的协议之一)。</p><p><span class="item-class">SSL</span> <code>Secure Sockets Layer</code>，安全套接层协议(对网络连接进行加密处理)。</p><p><span class="item-class">TLS</span> <code>Transport Layer Security</code>，安全传输层协议(同SSL，由记录协议和握手协议组成)。</p><p><span class="item-class">HTTPS</span> <code>HyperText Transfer Protocol over Secure Socket Layer</code>，<span style="color:#195"><strong>HTTPS = HTTP + SSL</strong></span>。</p><p><span class="item-class">URN</span> <code>Uniform Resource Name</code>，统一资源名称(唯一标识实体但无位置信息)。</p><p><span class="item-class">URL</span> <code>Uniform Resource Locator</code>，统一资源定位符(互联网资源的身份证，唯一标识)。</p><p><span class="item-class">URI</span> <code>Uniform Resource Identifier</code>，统一资源标识符(标识网络资源)，<span style="color:#195"><strong>URI = URN + URL</strong></span>。</p><p><span class="item-class">WXSS</span> <code>WeiXin Style sheets</code>，微信小程序中基于CSS扩展的样式语言。</p><p><span class="item-class">WXML</span> <code>WeiXin Markup Language</code>，微信小程序中专用的标记语言(类似HTML)。</p><p><span class="item-class">JSON</span> <code>JavaScript Object Notation</code>，JavaScript对象表示法，用于表示和传输数据。</p><p><span class="item-class">Ajax</span> <code>Asynchronous Javascript And XML</code>，异步JavaScript和XML用于异步请求和局部刷新。</p><p><span class="item-class">npm</span> <code>Node Package Manager</code>，基于Node.js的包管理和分发工具。</p><p><span class="item-class">LAMP</span> <code>Linux Apache MySQL 和 PHP/Python/Perl</code>，用于搭建Web服务器的开源软件。</p><p><span class="item-class">MAMP</span> <code>Mac Apache MySQL 和 PHP Server</code>，Mac中构建网站和搭建Web服务器的开源软件。</p><p><span class="item-class">WAMP</span> <code>Windows Apache MySQL 和 PHP Server</code>，用于构建网站和搭建Web服务器的开源软件。</p><p><span class="item-class">SPA</span> <code>Single Page Application</code>，单页应用程序，主要特点是轻量级请求和局部更新。</p><p><span class="item-class">ORM</span> <code>Object Relational Mapping</code>，对象关系映射(数据转换)。</p><p><span class="item-class">MEAN</span> <code>MongoDB Express Angular Node</code>，前端开发中常用的技术栈。</p><p><span class="item-class">MERN</span> <code>MongoDB Express React Node</code>，常用的技术栈，React为Facebook推出的前端框架。</p><p><span class="item-class">CRUD</span> <code>Create Read Update Delete</code>，对数据库的常规操作(<span style="color:#195">创建|添加、读取、更新和删除</span>)。</p><p><span class="item-class">BFC</span> <code>Block Formatting Context</code>，块级格式化上下文。</p><p><span class="item-class">OO</span> <code>Object Oriented</code>，面向对象。</p><p><span class="item-class">OOD</span> <code>Object Oriented Design</code>，面向对象设计。</p><p><span class="item-class">OOP</span> <code>Object Oriented Programming</code>，面向对象编程。</p><p><span class="item-class">OOA</span> <code>Object Oriented Analysis</code>，面向对象分析方法。</p><p><span class="item-class">UML</span> <code>Unified Modeling Language</code>，统一(标准)建模语言。</p><p><span class="item-class">NoSQL</span> <code>Not only SQL</code>，非关系型数据库，譬如<code>redis</code>，<code>memcache</code>，<code>MongoDb</code>等。</p><p><span class="item-class">REPL</span> <code>Request-Eval-Print-Loop</code>，读取-求值-输出-循环结构(Node解释器)。</p><p><span class="item-class">TDD</span> <code>Test-Driven Development</code>，测试驱动开发(用单元测试来驱动开发的一种策略)。</p><p><span class="item-class">BDD</span> <code>Behavior-Driven Development</code>，行为驱动开发(用验收标准来驱动开发的一种策略)。</p><p><span class="item-class">Mustache</span> 经典(重要 | 基础)的前端模板引擎，也指模板使用的那种无逻辑的模板语法。</p><p><span class="item-class">Handlebars</span> 经典(重要 | 基础)的前端模板引擎，同Mustache类似。</p><p><span class="item-class">JSON Schema</span> 表示对JSON文档的内容、结构和格式的声明，用于对JSON文档进行严格校验(语义)。</p><p><span class="item-class">MongoDB</span> MongoDB是一种NoSQL数据库，允许开发人员以文档(JSON)的形式存储数据。</p><p><span class="item-class">BSON</span> <code>Binary JSON</code> 二进制的JSON数据，用于序列化JSON文档的一种二进制数据格式。</p><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;span class=&quot;item-class&quot;&gt;Web&lt;/span&gt; &lt;code&gt;World Wide Web&lt;/code&gt;，万维网(&lt;code&gt;www&lt;/code&gt;)。&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;item-class&quot;&gt;W3C&lt;/span&gt; &lt;code&gt;W
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>微信小程序基础[13]-小程序中的基础组件(五)</title>
    <link href="https://weibo.com/u/3800117445/2018/10/14/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%8F%E5%88%97%5B13%5D-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%9A%84%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6(%E4%BA%94)/"/>
    <id>https://weibo.com/u/3800117445/2018/10/14/微信小程序序列[13]-小程序中的基础组件(五)/</id>
    <published>2018-10-14T10:36:08.000Z</published>
    <updated>2018-11-11T13:30:01.403Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本文介绍小程序中的基础组件，主要包括picker滚动选择器、checkbox多项选择器和progress进度条等组件的基本使用和综合示例。</p></blockquote><h4 id="1-0-progress组件"><a href="#1-0-progress组件" class="headerlink" title="1.0 progress组件"></a>1.0 progress组件</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/progress.html" target="_blank" rel="noopener">progress组件</a>就是进度条。</p><p><strong>这里列出progress组件的主要属性</strong></p><p><span class="propWX-green ">color</span>     进度条的颜色(activeColor)。<br><span class="propWX-green ">activeColor</span>     已执行的进度条的颜色。<br><span class="propWX-green ">backgroundColor</span>     尚未执行的进度条的颜色。<br><span class="propWX-green bg-red">percent</span>     百分比的数值，取值范围是0~100。<br><span class="propWX-green ">show-info</span>     在进度条的右侧是否显示百分比，布尔类型，默认值为false。<br><span class="propWX-green ">stroke-width</span>     进度条线的宽度，数值类型，默认值为6，单位是px。<br><span class="propWX-green ">active</span>     是否设置进度条从左到右的动画，布尔类型，默认值为false。<br><span class="propWX-green ">active-mode</span>     设置动画执行的方式，<code>backwards</code>表示 从头播放；<code>forwards</code>表示从上次结束点接着播放。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 默认的progress样式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">progress</span>&gt;</span><span class="tag">&lt;/<span class="name">progress</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- percent：进度值 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- color|activeColor：已完成部分的进度颜色 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- backgroundColor：  未完成部分的进度颜色--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">progress</span> <span class="attr">color</span>=<span class="string">'pink'</span> <span class="attr">percent</span>=<span class="string">'30'</span>&gt;</span><span class="tag">&lt;/<span class="name">progress</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">progress</span> <span class="attr">activeColor</span>=<span class="string">'#802314'</span> <span class="attr">percent</span>=<span class="string">'30'</span>&gt;</span><span class="tag">&lt;/<span class="name">progress</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">progress</span> <span class="attr">color</span>=<span class="string">'#195'</span> <span class="attr">percent</span>=<span class="string">'50'</span>&gt;</span><span class="tag">&lt;/<span class="name">progress</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">progress</span> <span class="attr">color</span>=<span class="string">'#195'</span> <span class="attr">percent</span>=<span class="string">'50'</span> <span class="attr">backgroundColor</span>=<span class="string">'#004'</span>&gt;</span><span class="tag">&lt;/<span class="name">progress</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- show-info：在进度条的右侧显示百分比 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">progress</span> <span class="attr">color</span>=<span class="string">'#195'</span> <span class="attr">percent</span>=<span class="string">'70'</span> <span class="attr">backgroundColor</span>=<span class="string">'#004'</span> <span class="attr">show-info</span>&gt;</span><span class="tag">&lt;/<span class="name">progress</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- stroke-width:设置进度条的宽度 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">progress</span> <span class="attr">color</span>=<span class="string">'#3504a5'</span> <span class="attr">percent</span>=<span class="string">'70'</span>  <span class="attr">show-info</span>  <span class="attr">stroke-width</span>=<span class="string">'20'</span> &gt;</span><span class="tag">&lt;/<span class="name">progress</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- active：是否开启动画效果 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- active-mode：动画模式，可选值有[backwards][forwards]--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">progress</span> <span class="attr">active</span> <span class="attr">color</span>=<span class="string">'#195'</span> <span class="attr">percent</span>=<span class="string">'70'</span> <span class="attr">show-info</span>  <span class="attr">stroke-width</span>=<span class="string">'20'</span> &gt;</span><span class="tag">&lt;/<span class="name">progress</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">progress</span>  <span class="attr">active</span> <span class="attr">active-mode</span>=<span class="string">'forwards'</span> <span class="attr">color</span>=<span class="string">'#195'</span> <span class="attr">percent</span>=<span class="string">'90'</span> <span class="attr">show-info</span>  <span class="attr">stroke-width</span>=<span class="string">'20'</span> &gt;</span><span class="tag">&lt;/<span class="name">progress</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx28.png?raw=true"></p><h4 id="2-0-多项选择器组件-checkbox-group-和-checkbox"><a href="#2-0-多项选择器组件-checkbox-group-和-checkbox" class="headerlink" title="2.0 多项选择器组件( checkbox-group 和 checkbox )"></a>2.0 多项选择器组件( checkbox-group 和 checkbox )</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/checkbox.html" target="_blank" rel="noopener">多项选择器组件</a>由<code>checkbox-group</code>和<code>checkbox</code>两个具体的组件构成，其中<code>checkbox组件</code>表示的是每一个的多选项目，而<code>checkbox-group</code>用来包裹住多个多选项目。通过观察和对比，我们可以发现多项选择器和单项选择器的结构和用法基本是一致的。</p><p><span style="border:1px solid #000;padding:0 10px;background:#F0FFFF"><strong>checkbox组件</strong></span><br><span class="propWX-green bg-red">value</span>     当前选项的值。<br><span class="propWX-green ">color</span>     选择框选中时的颜色。<br><span class="propWX-green ">disabled</span>     当前选择框是否被禁用，布尔类型，默认值为false。<br><span class="propWX-green ">checked</span>     当前选择框是否被选中，布尔类型，具有排它性会覆盖。</p><p><span style="border:1px solid #000;padding:0 10px;background:#F0FFFF"><strong>checkbox-group组件</strong></span><br><span class="propWX-green ">bindchange</span>    当选中项发生变化时触发<code>change事件</code>并执行绑定的方法，可通过事件对象来获取当前选中项的值<code>(事件对象.detail</code>)。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//001 wxml文件中的内容</span><br><span class="line"><span class="comment">&lt;!-- 演示checkbox的主要属性 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox-group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">value</span>=<span class="string">'韩寒'</span> <span class="attr">color</span>=<span class="string">'red'</span>&gt;</span>韩寒<span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">value</span>=<span class="string">'张爱玲'</span> <span class="attr">checked</span>&gt;</span>张爱玲<span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">value</span>=<span class="string">'余华'</span>&gt;</span>余华<span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">value</span>=<span class="string">'张悦然'</span>&gt;</span>张悦然<span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">value</span>=<span class="string">'钱钟书'</span> <span class="attr">disabled</span>&gt;</span>钱钟书<span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">checkbox-group</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>数据绑定<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 数据绑定 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox-group</span> <span class="attr">bindchange</span>=<span class="string">'changeClick'</span> <span class="attr">name</span>=<span class="string">'key'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">'&#123;&#123;dataArr&#125;&#125;'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">value</span>=<span class="string">'&#123;&#123;item.name&#125;&#125;'</span> <span class="attr">checked</span>=<span class="string">'&#123;&#123;item.isChecked&#125;&#125;'</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//002 wxss文件中的内容</span><br><span class="line"><span class="selector-tag">checkbox</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500</span>rpx;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">view</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">100</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//003 js文件中的内容</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    dataArr:[</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">"韩寒"</span>, <span class="attr">isChecked</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">"鲁迅"</span>, <span class="attr">isChecked</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">"余华"</span>, <span class="attr">isChecked</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">"冯唐"</span>, <span class="attr">isChecked</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  changeClick:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"多项选择框的值发生了变化--changeClick"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(e.detail);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>这里贴出上面代码的实现效果图。<br><img src="https://github.com/flowerField/Source/blob/master/Blog/wx29.gif?raw=true"></p><h4 id="3-0-picker组件-滚动选择器组件"><a href="#3-0-picker组件-滚动选择器组件" class="headerlink" title="3.0 picker组件(滚动选择器组件)"></a>3.0 picker组件(滚动选择器组件)</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/picker.html" target="_blank" rel="noopener">picker组件</a>是从页面底部弹出的滚动选择器组件，支持下面五种具体的选择器，通过mode属性的值来进行区分，如果没有设置mode属性，那么默认为普通选择器。</p><blockquote><p>❏  时间选择器(<code>time</code>)<br>❏  日期选择器(<code>date</code>)<br>❏  普通选择器(<code>selector</code>)<br>❏  省市区选择器(<code>region</code>)<br>❏  多列选择器(<code>multiSelector</code>)</p></blockquote><p>这里给出五种选择器均拥有的属性，对于特点选择器才拥有的属性，我们稍后单独说明。<br><span class="propWX-green ">mode</span>     picker组件的类型。<br><span class="propWX-green ">bindchange</span>     当value值改变时触发change事件。<br><span class="propWX-green ">bindcancel</span>     当点击取消选择的时候触发cancel事件。<br><span class="propWX-green ">disabled</span>         控制是否禁用、布尔类型的值，默认为false。</p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>001 普通选择器</strong> </span></p><p>在上面列出的是所有滚动选择器类型的组件都拥有的公共属性外，此外普通选择器还拥有<code>range</code>、<code>value</code>和<code>range-key</code>属性，其中range对应的数据可以是简单数组，也可以对象数组。下面列出普通选择器(<code>mode=selector</code> | 默认)组件的主要属性。并提供一个简短的demo演示。</p><p><span class="propWX-green bg-red">range</span>     可供选择的数据内容(<code>数组</code> | <code>对象数组</code>)。<br><span class="propWX-green bg-red">value</span>   表示默认选择的是可选数据中的第几项，索引从0开始。<br><span class="propWX-green ">range-key</span>     当可供选择的数据是对象数组时，通过该属性指定对象元素中作为具体显示内容的key。</p><p><strong><code>ex 普通选择器组件(默认)的代码示例</code></strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//001 wxml文件的内容</span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>普通数组<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">picker</span> <span class="attr">mode</span>=<span class="string">'selector'</span> <span class="attr">range</span>=<span class="string">'&#123;&#123; dataArray &#125;&#125;'</span> <span class="attr">value</span>=<span class="string">'&#123;&#123; dataArrayIndex &#125;&#125;'</span> <span class="attr">bindchange</span>=<span class="string">'changeClick1'</span>&gt;</span></span><br><span class="line">当前选择的是：&#123;&#123; dataArray[dataArrayIndex] &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">picker</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>对象数组<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">picker</span> <span class="attr">mode</span>=<span class="string">'selector'</span> <span class="attr">range</span>=<span class="string">'&#123;&#123; dataArrayObject &#125;&#125;'</span> <span class="attr">value</span>=<span class="string">'&#123;&#123; dataArrayObjectIndex &#125;&#125;'</span> <span class="attr">bindchange</span>=<span class="string">'changeClick2'</span> <span class="attr">range-key</span>=<span class="string">'name'</span>&gt;</span></span><br><span class="line">当前选择的是：&#123;&#123; dataArrayObject[dataArrayObjectIndex]["name"] &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">picker</span>&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//002 wxss文件的内容</span><br><span class="line"><span class="selector-tag">view</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">44</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">44</span>rpx;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200</span>rpx;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">20</span>rpx <span class="number">10</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//003 js文件的内容</span></span><br><span class="line"><span class="comment">// pages/picker/index.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    dataArray:[</span><br><span class="line">      <span class="string">"张三"</span>,</span><br><span class="line">      <span class="string">"李四"</span>,</span><br><span class="line">      <span class="string">"老王"</span></span><br><span class="line">    ],</span><br><span class="line">    dataArrayIndex:<span class="number">0</span>,</span><br><span class="line">    dataArrayObject: [</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">"文顶顶"</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">"沫子也"</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">"米桃儿"</span> &#125;</span><br><span class="line">    ],</span><br><span class="line">    dataArrayObjectIndex:<span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  changeClick1:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> index = e.detail.value;</span><br><span class="line">    <span class="keyword">this</span>.setData(&#123; <span class="attr">dataArrayIndex</span>: e.detail.value &#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Click1---"</span>, <span class="keyword">this</span>.data.dataArray[index]);</span><br><span class="line">  &#125;,</span><br><span class="line">  changeClick2: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> index = e.detail.value;</span><br><span class="line">    <span class="keyword">this</span>.setData(&#123; <span class="attr">dataArrayObjectIndex</span>: index &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Click2--"</span>, <span class="keyword">this</span>.data.dataArrayObject[index][<span class="string">"name"</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>这里给出上面代码运行情况的示意图。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx30.gif?raw=true"></p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>002 多列选择器</strong> </span></p><p>在使用picker组件的时候，如果<code>mode属性的值为multiSelector</code>那么表示这是一个多列选择器，多列选择器相对普通选择器而言相对复杂一些，因为它的数据源为<code>二维数组</code>,也就是数组中的每个元素都是数组(<span style="color:red">可以是普通数组也可以是对象数组</span>)。</p><p><strong>多列选择器的主要属性</strong></p><p><span class="propWX-green ">value</span>         表示默认选择的是可选数据中的第几项，索引从0开始。<br><span class="propWX-green bg-red">range</span>     可供选择的数据内容(<code>普通数组</code> | <code>对象数组</code>构成的二维数组)。<br><span class="propWX-green ">range-key</span>     当数据是<code>二维对象数组</code>时，指定对象元素中作为显示内容的key。<br><span class="propWX-green ">bindcolumnchange</span>     某列值改变时触发，其中<code>column 表示列数，</code>value` 表示变更值的下标。</p><p><strong><code>ex 多列选择器组件(mode=multiSelector)的代码示例</code></strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//001 wxml文件中的内容</span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>二维数组(普通数组)<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">picker</span> <span class="attr">mode</span>=<span class="string">'multiSelector'</span> <span class="attr">range</span>=<span class="string">'&#123;&#123; multiArray &#125;&#125;'</span> <span class="attr">bindchange</span>=<span class="string">'changeClick1'</span>&gt;</span></span><br><span class="line"></span><br><span class="line">当前选择的是：&#123;&#123;multiArray[0][multiIndex[0]]&#125;&#125;,&#123;&#123;multiArray[1][multiIndex[1]]&#125;&#125;,&#123;&#123;multiArray[2][multiIndex[2]]&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">picker</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>二维数组(对象数组)<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">picker</span> <span class="attr">mode</span>=<span class="string">'multiSelector'</span> <span class="attr">range</span>=<span class="string">'&#123;&#123; multiArrayObject &#125;&#125;'</span> <span class="attr">range-key</span>=<span class="string">'&#123;&#123; key &#125;&#125;'</span> <span class="attr">bindchange</span>=<span class="string">'changeClick2'</span>&gt;</span></span><br><span class="line"></span><br><span class="line">当前选择的是：&#123;&#123;multiArrayObject[0][multiObjectIndex[0]][key]&#125;&#125;,&#123;&#123;multiArrayObject[1][multiObjectIndex[1]][key]&#125;&#125;,&#123;&#123;multiArrayObject[2][multiObjectIndex[2]][key]&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">picker</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//002 wxss文件中的内容</span><br><span class="line"><span class="selector-tag">view</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">44</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">44</span>rpx;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400</span>rpx;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">50</span>rpx <span class="number">10</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//003 js文件中的数据和对应的方法</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  data:&#123;</span><br><span class="line">    key: <span class="string">"name"</span>,</span><br><span class="line">    multiArray:[</span><br><span class="line">      [<span class="string">"作家"</span>,<span class="string">"导演"</span>],</span><br><span class="line">      [<span class="string">"韩寒"</span>, <span class="string">"龙应台"</span>, <span class="string">"余华"</span>,<span class="string">"张艺谋"</span>],</span><br><span class="line">      [<span class="string">"他的国"</span>,<span class="string">"目送"</span>, <span class="string">"兄弟"</span>, <span class="string">"活着"</span>,<span class="string">"英雄"</span>],</span><br><span class="line">    ],</span><br><span class="line">    multiIndex:[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],</span><br><span class="line">    multiObjectIndex: [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">    multiArrayObject: [</span><br><span class="line">      [</span><br><span class="line">        &#123;<span class="attr">name</span>:<span class="string">"作家"</span>,<span class="attr">id</span>:<span class="number">0</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>:<span class="string">"导演"</span>,<span class="attr">id</span>:<span class="number">1</span>&#125;</span><br><span class="line">      ],</span><br><span class="line">      [</span><br><span class="line">        &#123;<span class="attr">name</span>:<span class="string">"韩寒"</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>:<span class="string">"龙应台"</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>:<span class="string">"余华"</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>:<span class="string">"张艺谋"</span>&#125;</span><br><span class="line">       ],</span><br><span class="line">      [</span><br><span class="line">        &#123;<span class="attr">name</span>:<span class="string">"他的国"</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>:<span class="string">"目送"</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>:<span class="string">"活着"</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>:<span class="string">"英雄"</span>&#125;</span><br><span class="line">      ],</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  changeClick1:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取事件对象中的数据</span></span><br><span class="line">    <span class="keyword">var</span> indexArr = e.detail.value;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"changeClick1--"</span>,indexArr);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//打印输出</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"选择的数据为："</span> + <span class="keyword">this</span>.data.multiArray[<span class="number">0</span>][indexArr[<span class="number">0</span>]] + <span class="string">","</span> + <span class="keyword">this</span>.data.multiArray[<span class="number">1</span>][indexArr[<span class="number">1</span>]] +<span class="string">","</span> + <span class="keyword">this</span>.data.multiArray[<span class="number">2</span>][indexArr[<span class="number">2</span>]])</span><br><span class="line"></span><br><span class="line">    <span class="comment">//更新数据</span></span><br><span class="line">    <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">      multiIndex:indexArr</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  changeClick2:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> indexArr = e.detail.value;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"changeClick1--"</span>, indexArr);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"选择的数据为："</span> + <span class="keyword">this</span>.data.multiArrayObject[<span class="number">0</span>][indexArr[<span class="number">0</span>]][<span class="string">"name"</span>] + <span class="string">","</span> + <span class="keyword">this</span>.data.multiArrayObject[<span class="number">1</span>][indexArr[<span class="number">1</span>]][<span class="string">"name"</span>] + <span class="string">","</span> + <span class="keyword">this</span>.data.multiArrayObject[<span class="number">2</span>][indexArr[<span class="number">2</span>]][<span class="string">"name"</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">      multiObjectIndex: indexArr</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>这里给出上面代码运行情况的示意图。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx32.gif?raw=true"></p><p><strong>说明</strong> 上面的代码中演示了多列选择器的基本使用，并且提供了数据源是<code>普通二维数组 以及</code>每个元素是对象数组这种特殊二维数组`两种情况的使用做对照，需要特别注意的是如果二维对象数组，那么必须通过range-key来指定显示的具体内容。</p><p>另外在上面的演示代码中，提供的案例里面并没有<span style="color:red">数据联动</span>的需求。如果在进行多列选择的时候数据需要联动那么我们的数据源以及代码设计可能会更复杂一些，下面给出一个稍微复杂点的示例。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//001 wxml文件中的内容</span><br><span class="line"><span class="tag">&lt;<span class="name">picker</span> <span class="attr">mode</span>=<span class="string">"multiSelector"</span> <span class="attr">bindchange</span>=<span class="string">"bindMultiPickerChange"</span> <span class="attr">bindcolumnchange</span>=<span class="string">"bindMultiPickerColumnChange"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123;multiIndex&#125;&#125;"</span> <span class="attr">range</span>=<span class="string">"&#123;&#123;multiArray&#125;&#125;"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      当前选择：&#123;&#123;multiArray[0][multiIndex[0]]&#125;&#125;，&#123;&#123;multiArray[1][multiIndex[1]]&#125;&#125;，&#123;&#123;multiArray[2][multiIndex[2]]&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">picker</span>&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line"></span><br><span class="line">  data: &#123;</span><br><span class="line">    multiArray: [</span><br><span class="line">        [<span class="string">'作家'</span>, <span class="string">'导演'</span>],</span><br><span class="line">        [<span class="string">'莫言'</span>, <span class="string">'韩寒'</span>, <span class="string">'冯唐'</span>, <span class="string">'鲁迅'</span>, <span class="string">'张爱玲'</span>],</span><br><span class="line">        [<span class="string">'红高粱家族'</span>, <span class="string">'蛙'</span>, <span class="string">'酒国'</span>,<span class="string">'丰臀肥乳'</span>]</span><br><span class="line">    ],</span><br><span class="line">    multiIndex: [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">    bindMultiPickerChange: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.setData(&#123; <span class="attr">multiIndex</span>: e.detail.value &#125;)</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'picker发送选择改变，携带值为'</span>, e.detail.value)</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    bindMultiPickerColumnChange: <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'修改的列为'</span>, e.detail.column, <span class="string">'，对应的值为'</span>, e.detail.value);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//001 字面量方式创建对象</span></span><br><span class="line">      <span class="keyword">var</span> data = &#123;</span><br><span class="line">        multiArray: <span class="keyword">this</span>.data.multiArray,</span><br><span class="line">        multiIndex: <span class="keyword">this</span>.data.multiIndex</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//002 获取当前选择的数据(数组)</span></span><br><span class="line">      data.multiIndex[e.detail.column] = e.detail.value;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//003 设置数据联动</span></span><br><span class="line">      <span class="keyword">switch</span> (e.detail.column) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">          <span class="keyword">switch</span> (data.multiIndex[<span class="number">0</span>]) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">              data.multiArray[<span class="number">1</span>] = [<span class="string">'莫言'</span>, <span class="string">'韩寒'</span>, <span class="string">'冯唐'</span>, <span class="string">'鲁迅'</span>, <span class="string">'张爱玲'</span>];</span><br><span class="line">              data.multiArray[<span class="number">2</span>] = [<span class="string">'红高粱家族'</span>, <span class="string">'蛙'</span>, <span class="string">'酒国'</span>, <span class="string">'丰臀肥乳'</span>];</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">              data.multiArray[<span class="number">1</span>] = [<span class="string">'张艺谋'</span>, <span class="string">'贾樟柯'</span>, <span class="string">'韩寒'</span>];</span><br><span class="line">              data.multiArray[<span class="number">2</span>] = [<span class="string">'英雄'</span>, <span class="string">'活着'</span>,<span class="string">'红高粱'</span>,<span class="string">'大红灯笼高高挂'</span>];</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          data.multiIndex[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">          data.multiIndex[<span class="number">2</span>] = <span class="number">0</span>;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">          <span class="keyword">switch</span> (data.multiIndex[<span class="number">0</span>]) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">              <span class="keyword">switch</span> (data.multiIndex[<span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                  data.multiArray[<span class="number">2</span>] = [<span class="string">'红高粱家族'</span>, <span class="string">'蛙'</span>, <span class="string">'酒国'</span>, <span class="string">'丰臀肥乳'</span>];</span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                  data.multiArray[<span class="number">2</span>] = [<span class="string">'三重门'</span>,<span class="string">'一座城池'</span>,<span class="string">'零下一度'</span>,<span class="string">'他的国'</span>,<span class="string">'杂的文'</span>];</span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                  data.multiArray[<span class="number">2</span>] = [<span class="string">'女神一号'</span>, <span class="string">'18岁请给我一个姑娘'</span>,<span class="string">'三十六大'</span>];</span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                  data.multiArray[<span class="number">2</span>] = [<span class="string">'朝花夕拾'</span>, <span class="string">'彷徨'</span>, <span class="string">'呐喊'</span>];</span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                  data.multiArray[<span class="number">2</span>] = [<span class="string">'红玫瑰与白玫瑰'</span>, <span class="string">'倾城之恋'</span>, <span class="string">'色戒'</span>, <span class="string">'半生缘'</span>];</span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">              <span class="keyword">switch</span> (data.multiIndex[<span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                  data.multiArray[<span class="number">2</span>] = [<span class="string">'英雄'</span>, <span class="string">'活着'</span>, <span class="string">'红高粱'</span>, <span class="string">'大红灯笼高高挂'</span>];</span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                  data.multiArray[<span class="number">2</span>] = [<span class="string">'小武'</span>, <span class="string">'三峡好人'</span>,<span class="string">'天注定'</span>,<span class="string">'江湖儿女'</span>];</span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                  data.multiArray[<span class="number">2</span>] = [<span class="string">'平凡之路'</span>, <span class="string">'乘风破浪'</span>];</span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          data.multiIndex[<span class="number">2</span>] = <span class="number">0</span>;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.setData(data);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>这里给出上面代码运行情况的示意图。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx33.gif?raw=true"></p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>003 时间选择器</strong> </span></p><p>时间选择器应该picker组件最简单的一种类型了，当<code>mode属性值为time的时候</code>呈现出来的就是时间选择器，从页面底部滚出的时间选择器可以帮助我们来选择并设置具体的时间(<code>几点几分</code>)。这里先列出主要的属性，再给出一个简短的代码示例。</p><p><span class="propWX-green bg-red">value</span>       表示选中的时间，格式为”hh:mm”。<br><span class="propWX-green ">end</span>         表示有效时间范围的结尾，限定结束时间。<br><span class="propWX-green ">start</span>       表示有效时间范围的开始，限定开始时间。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//001 wxml文件中的内容</span><br><span class="line"><span class="tag">&lt;<span class="name">picker</span> <span class="attr">mode</span>=<span class="string">"time"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123;time&#125;&#125;"</span> <span class="attr">bindchange</span>=<span class="string">"timeChangeClick"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"picker"</span>&gt;</span></span><br><span class="line">      当前选择: &#123;&#123;time&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">picker</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//002 js文件中的内容</span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    time:'12:00'</span><br><span class="line">  &#125;,</span><br><span class="line">  timeChangeClick:function(e)&#123;</span><br><span class="line">    console.log("timeChangeClick--",e.detail);</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      time: e.detail.value</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><span style="border:1px solid #000;padding:5px 20px;"><strong>004 日期选择器</strong> </span></p><p>当picker组件的<code>mode属性值为date</code>的时候，底部弹出的是日期选择器。</p><p><strong>日期选择器的主要属性</strong></p><p><span class="propWX-green ">value</span>       表示选中的日期，格式为<code>&quot;YYYY-MM-DD&quot;</code>。<br><span class="propWX-green ">end</span>         表示有效日期范围的结束，字符串格式为”YYYY-MM-DD”。<br><span class="propWX-green ">start</span>       表示有效日期范围的开始，字符串格式为”YYYY-MM-DD”。<br><span class="propWX-green bg-red">fields</span>      可取的有效值有 year(年),month(月),day(天)三种，表示选择器的粒度。</p><p><strong><code>ex：日期选择器的代码示例</code></strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//001 wxml文件中的内容</span><br><span class="line"><span class="tag">&lt;<span class="name">picker</span> <span class="attr">mode</span>=<span class="string">"date"</span> <span class="attr">value</span>=<span class="string">"&#123;&#123;date&#125;&#125;"</span> <span class="attr">start</span>=<span class="string">"1900-00-01"</span> <span class="attr">end</span>=<span class="string">"2018-10-16"</span> <span class="attr">bindchange</span>=<span class="string">"dateChangeClick"</span>&gt;</span></span><br><span class="line">      当前选择的是: &#123;&#123;date&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">picker</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//002 js文件中的内容</span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    date:"2015-07-17"</span><br><span class="line">  &#125;,</span><br><span class="line">  dateChangeClick:function(e)&#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      date:e.detail.value</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>这里给出上面代码运行情况的示意图。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx34.gif?raw=true"></p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>005 省市区选择器</strong> </span></p><p>省市区选择器常用于商城类应用的地址管理模块，比如要新建地址或者是编辑地址的时候。当picker组件的<code>mode属性值为region</code>的时候，底部弹出的是省市区选择器。省市区选择器在使用的时候本身也比较简单，主要关注<code>value</code>和<code>custom-item</code>属性和<code>bindchange</code>事件即可。</p><p><span class="propWX-green ">value</span>               表示选中的省市区，默认选中每一列的第一个值。<br><span class="propWX-green ">custom-item</span>         我们可以通过该属性来为每一列的顶部添加一个自定义的项。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//001 wxml文件的内容</span><br><span class="line"><span class="tag">&lt;<span class="name">picker</span></span></span><br><span class="line"><span class="tag"><span class="attr">mode</span>=<span class="string">"region"</span></span></span><br><span class="line"><span class="tag"><span class="attr">value</span>=<span class="string">"&#123;&#123;region&#125;&#125;"</span></span></span><br><span class="line"><span class="tag"><span class="attr">custom-item</span>=<span class="string">"&#123;&#123;customItem&#125;&#125;"</span></span></span><br><span class="line"><span class="tag"><span class="attr">bindchange</span>=<span class="string">"regionChangeClick"</span></span></span><br><span class="line"><span class="tag"> &gt;</span></span><br><span class="line">  &#123;&#123;region[0]&#125;&#125;，&#123;&#123;region[1]&#125;&#125;，&#123;&#123;region[2]&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">picker</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//002 js文件的内容</span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    region: ['广东省', '广州市', '天河区'],</span><br><span class="line">    customItem:"All"</span><br><span class="line">  &#125;,</span><br><span class="line">  regionChangeClick:function(e)&#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      region:e.detail.value</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本文介绍小程序中的基础组件，主要包括picker滚动选择器、checkbox多项选择器和progress进度条等组件的基本使用和综合示例。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;1-0-progress组件&quot;&gt;&lt;a href=&quot;#1-
      
    
    </summary>
    
    
      <category term="微信小程序序列" scheme="https://weibo.com/u/3800117445/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%8F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>jQuery系列 [11]-jQuery框架源码解读[插件]</title>
    <link href="https://weibo.com/u/3800117445/2018/10/12/jQuery%E7%B3%BB%E5%88%97%20%5B11%5D-jQuery%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB%5B%E6%8F%92%E4%BB%B6%5D/"/>
    <id>https://weibo.com/u/3800117445/2018/10/12/jQuery系列 [11]-jQuery框架源码解读[插件]/</id>
    <published>2018-10-12T08:28:47.000Z</published>
    <updated>2018-11-11T13:30:01.193Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>这篇文章将主要介绍jQuery框架的插件机制，包括但不限于<code>jQuery.extend</code>和<code>jQuery.fn.extend</code>方法的设计和使用，JavaScript体系中的常用概念以及jQuery插件的使用等。</p></blockquote><h3 id="1-0-源码解读"><a href="#1-0-源码解读" class="headerlink" title="1.0 源码解读"></a>1.0 源码解读</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br></pre></td><td class="code"><pre><span class="line">jQuery.extend = jQuery.fn.extend = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">//声明一堆的变量length 为实参的个数</span></span><br><span class="line"><span class="keyword">var</span> options, name, src, copy, copyIsArray, clone,</span><br><span class="line">target = <span class="built_in">arguments</span>[ <span class="number">0</span> ] || &#123;&#125;,</span><br><span class="line">i = <span class="number">1</span>,</span><br><span class="line">length = <span class="built_in">arguments</span>.length,</span><br><span class="line">deep = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Handle a deep copy situation</span></span><br><span class="line"><span class="keyword">if</span> ( <span class="keyword">typeof</span> target === <span class="string">"boolean"</span> ) &#123;</span><br><span class="line">deep = target;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Skip the boolean and the target</span></span><br><span class="line">target = <span class="built_in">arguments</span>[ i ] || &#123;&#125;;</span><br><span class="line">i++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Handle case when target is a string or something (possible in deep copy)</span></span><br><span class="line"><span class="keyword">if</span> ( <span class="keyword">typeof</span> target !== <span class="string">"object"</span> &amp;&amp; !isFunction( target ) ) &#123;</span><br><span class="line">target = &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Extend jQuery itself if only one argument is passed</span></span><br><span class="line"><span class="keyword">if</span> ( i === length ) &#123;</span><br><span class="line">target = <span class="keyword">this</span>;</span><br><span class="line">i--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ( ; i &lt; length; i++ ) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Only deal with non-null/undefined values</span></span><br><span class="line"><span class="keyword">if</span> ( ( options = <span class="built_in">arguments</span>[ i ] ) != <span class="literal">null</span> ) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Extend the base object</span></span><br><span class="line"><span class="keyword">for</span> ( name <span class="keyword">in</span> options ) &#123;</span><br><span class="line">src = target[ name ];</span><br><span class="line">copy = options[ name ];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Prevent never-ending loop</span></span><br><span class="line"><span class="keyword">if</span> ( target === copy ) &#123;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Recurse if we're merging plain objects or arrays</span></span><br><span class="line"><span class="keyword">if</span> ( deep &amp;&amp; copy &amp;&amp; ( jQuery.isPlainObject( copy ) ||</span><br><span class="line">( copyIsArray = <span class="built_in">Array</span>.isArray( copy ) ) ) ) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ( copyIsArray ) &#123;</span><br><span class="line">copyIsArray = <span class="literal">false</span>;</span><br><span class="line">clone = src &amp;&amp; <span class="built_in">Array</span>.isArray( src ) ? src : [];</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">clone = src &amp;&amp; jQuery.isPlainObject( src ) ? src : &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Never move original objects, clone them</span></span><br><span class="line">target[ name ] = jQuery.extend( deep, clone, copy );</span><br><span class="line"></span><br><span class="line"><span class="comment">// Don't bring in undefined values</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> ( copy !== <span class="literal">undefined</span> ) &#123;</span><br><span class="line">target[ name ] = copy;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Return the modified object</span></span><br><span class="line"><span class="keyword">return</span> target;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//为jQuery添加一堆工具方法,对象参数中所有的成员都将直接添加在jQuery函数身上成为jQuery的静态方法</span></span><br><span class="line">jQuery.extend( &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Unique for each copy of jQuery on the page</span></span><br><span class="line"><span class="comment">// 简单测试下得到的结果是：jQuery33104605303773584173</span></span><br><span class="line"><span class="comment">// 确保页面中的jQuery副本是唯一的，（jQuery + 版本号 + 随机数） =&gt; 格式处理</span></span><br><span class="line">expando: <span class="string">"jQuery"</span> + ( version + <span class="built_in">Math</span>.random() ).replace( <span class="regexp">/\D/g</span>, <span class="string">""</span> ),</span><br><span class="line"></span><br><span class="line"><span class="comment">// Assume jQuery is ready without the ready module</span></span><br><span class="line"><span class="comment">// 是否已经准备就绪</span></span><br><span class="line">isReady: <span class="literal">true</span>,</span><br><span class="line"><span class="comment">//错误处理方法：根据传入的消息创建一个错误对象并抛出异常</span></span><br><span class="line">error: <span class="function"><span class="keyword">function</span>(<span class="params"> msg </span>) </span>&#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>( msg );</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//空函数</span></span><br><span class="line">noop: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">//用于判断指定参数是否是一个纯粹的对象</span></span><br><span class="line"><span class="comment">//所谓"纯粹的对象"，就是该对象是通过"&#123;&#125;"或"new Object"创建的 .排除了数组、自定义构造函数创建的对象以及函数等类型</span></span><br><span class="line">isPlainObject: <span class="function"><span class="keyword">function</span>(<span class="params"> obj </span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> proto, Ctor;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Detect obvious negatives</span></span><br><span class="line"><span class="comment">// Use toString instead of jQuery.type to catch host objects</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//如果参数为null | undefined 或者在调用Object.prototype.toString.call(参数)的时候得到的结果不是[object Object]则直接返回false</span></span><br><span class="line"><span class="keyword">if</span> ( !obj || toString.call( obj ) !== <span class="string">"[object Object]"</span> ) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取当前对象的原型对象，其实是调用了Object.getPrototypeOf(参数) 方法</span></span><br><span class="line">proto = getProto( obj );</span><br><span class="line"></span><br><span class="line"><span class="comment">// Objects with no prototype (e.g., `Object.create( null )`) are plain</span></span><br><span class="line"><span class="comment">//监测 没有原型对象的最纯净的对象 例如使用Object.create( null )创建的对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ( !proto ) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Objects with prototype are plain iff they were constructed by a global Object function</span></span><br><span class="line"><span class="comment">//如果原型对象上拥有constructor属性(前一句的结果为true) 那么就返回proto.constructor的值</span></span><br><span class="line"><span class="comment">//如果原型对象是Object.prototype 那么Object.prototype.constructor ==&gt; ƒ Object() &#123; [native code] &#125;</span></span><br><span class="line">Ctor = hasOwn.call( proto, <span class="string">"constructor"</span> ) &amp;&amp; proto.constructor;</span><br><span class="line"></span><br><span class="line"><span class="comment">//检查Ctor是否是函数 且函数字符串是否全等于function Object() &#123; [native code] &#125;</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">typeof</span> Ctor === <span class="string">"function"</span> &amp;&amp; fnToString.call( Ctor ) === ObjectFunctionString;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">//用于判断指定参数是否是一个空对象</span></span><br><span class="line"><span class="comment">//所谓"空对象"，即不包括任何可枚举(自定义)的属性。简而言之，就是该对象没有属性可以通过for...in迭代。</span></span><br><span class="line">isEmptyObject: <span class="function"><span class="keyword">function</span>(<span class="params"> obj </span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable no-unused-vars */</span></span><br><span class="line"><span class="comment">// See https://github.com/eslint/eslint/issues/6125</span></span><br><span class="line"><span class="keyword">var</span> name;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ( name <span class="keyword">in</span> obj ) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// Evaluates a script in a global context</span></span><br><span class="line"><span class="comment">//用于全局性地执行一段JavaScript代码,内部调用DOMEval方法实现</span></span><br><span class="line"><span class="comment">//其作用与常规的JavaScript eval()函数相似。区别自傲与jQuery.globalEval()执行代码的作用域为全局作用域。</span></span><br><span class="line">        <span class="comment">//使用示例：$.globalEval( "var a =1" ); 该行代码将在全局作用域中定义变量a</span></span><br><span class="line">globalEval: <span class="function"><span class="keyword">function</span>(<span class="params"> code </span>) </span>&#123;</span><br><span class="line">DOMEval( code );</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">//常用的迭代方法，可以用来遍历数组|对象|jQ实例对象(伪数组)</span></span><br><span class="line"><span class="comment">//该方法同$("xxx").each() 方法保持一致</span></span><br><span class="line"><span class="comment">//第一个参数：要遍历的对象| 数组 | jQ实例对象</span></span><br><span class="line">each: <span class="function"><span class="keyword">function</span>(<span class="params"> obj, callback </span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> length, i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果参数是伪数组那么使用普通的for循环来进行遍历</span></span><br><span class="line"><span class="keyword">if</span> ( isArrayLike( obj ) ) &#123;</span><br><span class="line">length = obj.length;</span><br><span class="line"><span class="keyword">for</span> ( ; i &lt; length; i++ ) &#123;</span><br><span class="line"><span class="comment">//调用回到函数，把当前的value值绑定给函数的this [each方法的回调函数中this--&gt; value值]</span></span><br><span class="line"><span class="comment">//把当前循环的key和value值(这里是i和obj[i])作为参数传递给callback回调函数</span></span><br><span class="line"><span class="comment">//检查回调函数的返回值，如果返回的是false，那么就退出循环</span></span><br><span class="line"><span class="keyword">if</span> ( callback.call( obj[ i ], i, obj[ i ] ) === <span class="literal">false</span> ) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//如果是普通的对象那么使用for..in循环来进行遍历</span></span><br><span class="line"><span class="keyword">for</span> ( i <span class="keyword">in</span> obj ) &#123;</span><br><span class="line"><span class="comment">//同上面的代码保持一致</span></span><br><span class="line"><span class="keyword">if</span> ( callback.call( obj[ i ], i, obj[ i ] ) === <span class="literal">false</span> ) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//把遍历的对象返回,链式编程的代码风格</span></span><br><span class="line"><span class="keyword">return</span> obj;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// Support: Android &lt;=4.0 only</span></span><br><span class="line"><span class="comment">// 工具方法，用于清空字符串前面或者是后面的N个空格</span></span><br><span class="line"><span class="comment">// 在ES5中js提供了原生的trim方法来清除字符串前后的1个或多个空格</span></span><br><span class="line"><span class="comment">// 这里主要是通过正则表达式去进行匹配，把匹配到的内容替换为空字符串""</span></span><br><span class="line">trim: <span class="function"><span class="keyword">function</span>(<span class="params"> text </span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> text == <span class="literal">null</span> ?</span><br><span class="line"><span class="string">""</span> :</span><br><span class="line">( text + <span class="string">""</span> ).replace( rtrim, <span class="string">""</span> );</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// results is for internal usage only</span></span><br><span class="line"><span class="comment">// 结果仅共内部使用</span></span><br><span class="line"><span class="comment">// 该函数用于将一个类数组对象(伪数组)转换为真正的数组对象</span></span><br><span class="line"><span class="comment">// 所谓"类数组对象"就是一个常规的Object对象，但它和数组对象非常相似：具备length属性，并以0、1、2、3……等数字作为属性名。</span></span><br><span class="line">makeArray: <span class="function"><span class="keyword">function</span>(<span class="params"> arr, results </span>) </span>&#123;</span><br><span class="line"><span class="comment">// 初始化ret为空数组</span></span><br><span class="line"><span class="keyword">var</span> ret = results || [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ( arr != <span class="literal">null</span> ) &#123;</span><br><span class="line"><span class="comment">//检查传入的参数是否是伪数组</span></span><br><span class="line"><span class="keyword">if</span> ( isArrayLike( <span class="built_in">Object</span>( arr ) ) ) &#123;</span><br><span class="line"><span class="comment">//如果是伪数组，那么合并ret和arr 并返回</span></span><br><span class="line"><span class="comment">//如果arr是字符串那么jQuery.merge(ret,[arr]) ，否则jQuery.merge(ret,arr)</span></span><br><span class="line">jQuery.merge( ret,</span><br><span class="line"><span class="keyword">typeof</span> arr === <span class="string">"string"</span> ?</span><br><span class="line">[ arr ] : arr</span><br><span class="line">);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//如果参数不是伪数组，那么直接把arr中的每个数据都添加到新的数组中</span></span><br><span class="line"><span class="comment">//push.call( ret, arr ) 就是是 [].push.call(ret,arr) =&gt; [].push(arr)</span></span><br><span class="line">push.call( ret, arr );</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//返回处理完的数组对象</span></span><br><span class="line"><span class="keyword">return</span> ret;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 该方法用于在数组中搜索指定的值，并返回其索引值。如果数组中不存在该值，则返回 -1。</span></span><br><span class="line"><span class="comment">// 第一个参数 用于查找的值</span></span><br><span class="line"><span class="comment">// 第二个参数 指定被查找的数组</span></span><br><span class="line"><span class="comment">// 第三个参数 指定从数组的指定索引位置开始查找，默认为 0</span></span><br><span class="line">        <span class="comment">// 如果数组中存在多个相同的值，则以查找到的第一个值的索引为准</span></span><br><span class="line"><span class="comment">// 使用示例：$.inArray("文顶顶",["demoA","demoB","wendingding.com","文顶顶","demoC","end"],4)</span></span><br><span class="line"><span class="comment">// 上面的代码表示从数组中索引为4的位置开始查找"文顶顶"这个元素项，返回的结果为-1，最后一个参数不传递则返回3</span></span><br><span class="line">inArray: <span class="function"><span class="keyword">function</span>(<span class="params"> elem, arr, i </span>) </span>&#123;</span><br><span class="line"><span class="comment">//如果参数是null或undefined那么直接返回-1</span></span><br><span class="line"><span class="comment">//否则通过调用indexOf方法实现 indexOf.call( arr, elem, i ) =&gt; arr.indexOf(elem,i)</span></span><br><span class="line"><span class="keyword">return</span> arr == <span class="literal">null</span> ? <span class="number">-1</span> : indexOf.call( arr, elem, i );</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// Support: Android &lt;=4.0 only, PhantomJS 1 only</span></span><br><span class="line"><span class="comment">// push.apply(_, arraylike) throws on ancient WebKit</span></span><br><span class="line"><span class="comment">//该方法用于合并两个数组</span></span><br><span class="line">merge: <span class="function"><span class="keyword">function</span>(<span class="params"> first, second </span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> len = +second.length,</span><br><span class="line">j = <span class="number">0</span>,</span><br><span class="line">i = first.length;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ( ; j &lt; len; j++ ) &#123;</span><br><span class="line"><span class="comment">//通过普通的for循环来遍历第二个数组</span></span><br><span class="line"><span class="comment">//把第二个数组的元素依次追加在第一个数组的后面</span></span><br><span class="line">first[ i++ ] = second[ j ];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//更新数组的长度值</span></span><br><span class="line">first.length = i;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> first;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 过滤函数用于过滤数组</span></span><br><span class="line"><span class="comment">// 参数1 待过滤的数组</span></span><br><span class="line"><span class="comment">// 参数2 过滤数组的具体函数</span></span><br><span class="line"><span class="comment">// 参数3 布尔类型的值</span></span><br><span class="line"><span class="comment">// 为true则函数返回数组中由过滤函数返回 true 的元素</span></span><br><span class="line"><span class="comment">//      为false则函数返回数组中由过滤函数返回false的元素</span></span><br><span class="line">grep: <span class="function"><span class="keyword">function</span>(<span class="params"> elems, callback, invert </span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化一堆的变量</span></span><br><span class="line"><span class="keyword">var</span> callbackInverse,</span><br><span class="line">matches = [],   <span class="comment">//空数组</span></span><br><span class="line">i = <span class="number">0</span>,<span class="comment">//索引值为0</span></span><br><span class="line">length = elems.length,<span class="comment">//待过滤数组的长度</span></span><br><span class="line">callbackExpect = !invert;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Go through the array, only saving the items</span></span><br><span class="line"><span class="comment">// that pass the validator function</span></span><br><span class="line"><span class="keyword">for</span> ( ; i &lt; length; i++ ) &#123;</span><br><span class="line"><span class="comment">//每循环一次就把当前的元素和对应的索引传递给回调函数，并保存回调函数的返回值取反</span></span><br><span class="line">callbackInverse = !callback( elems[ i ], i );</span><br><span class="line"><span class="keyword">if</span> ( callbackInverse !== callbackExpect ) &#123;</span><br><span class="line"><span class="comment">//把过滤后的元素收集保存到新的数组中</span></span><br><span class="line">matches.push( elems[ i ] );</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//返回过滤后得到的数据，是一个新的数组</span></span><br><span class="line"><span class="keyword">return</span> matches;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// arg is for internal usage only</span></span><br><span class="line"><span class="comment">// arg仅用于内部使用的情况</span></span><br><span class="line"><span class="comment">// 数组映射方法( 将一个数组中的元素转换到另一个数组中 )</span></span><br><span class="line"><span class="comment">// 参数1 ：待处理的数组</span></span><br><span class="line"><span class="comment">// 参数2 : 具体的处理函数</span></span><br><span class="line"><span class="comment">// 参数3 : arg</span></span><br><span class="line">map: <span class="function"><span class="keyword">function</span>(<span class="params"> elems, callback, arg </span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化一堆的变量</span></span><br><span class="line"><span class="keyword">var</span> length, value,</span><br><span class="line">i = <span class="number">0</span>,<span class="comment">//索引值为0</span></span><br><span class="line">ret = [];<span class="comment">//ret为空的数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Go through the array, translating each of the items to their new values</span></span><br><span class="line"><span class="comment">// 遍历数组把数组中的每一项都转换为一个新的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//检查是否是伪数组</span></span><br><span class="line"><span class="keyword">if</span> ( isArrayLike( elems ) ) &#123;</span><br><span class="line">length = elems.length;<span class="comment">//获取待处理的伪数组的长度</span></span><br><span class="line"><span class="keyword">for</span> ( ; i &lt; length; i++ ) &#123;</span><br><span class="line"><span class="comment">//循环，每循环一次就调用处理函数并把当前的key和value值作为参数传递进去</span></span><br><span class="line"><span class="comment">//收集回调函数的返回值</span></span><br><span class="line">value = callback( elems[ i ], i, arg );</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果回调函数的范返回值不为空，那么就把该返回值添加到数组中并最终返回</span></span><br><span class="line"><span class="keyword">if</span> ( value != <span class="literal">null</span> ) &#123;</span><br><span class="line">ret.push( value );</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Go through every key on the object,</span></span><br><span class="line"><span class="comment">//如果是普通的对象，那么就使用for...in循环来进行遍历</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">for</span> ( i <span class="keyword">in</span> elems ) &#123;</span><br><span class="line">value = callback( elems[ i ], i, arg );</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ( value != <span class="literal">null</span> ) &#123;</span><br><span class="line">ret.push( value );</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Flatten any nested arrays</span></span><br><span class="line"><span class="comment">// 等价于 [].concat(ret) 问题：为什么不直接范湖ret数组呢？</span></span><br><span class="line"><span class="keyword">return</span> concat.apply( [], ret );</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// A global GUID counter for objects</span></span><br><span class="line"><span class="comment">// 全局的GUID计数器</span></span><br><span class="line">guid: <span class="number">1</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// jQuery.support is not used in Core but other projects attach their</span></span><br><span class="line"><span class="comment">// properties to it so it needs to exist.</span></span><br><span class="line">        <span class="comment">// 就是个空对象 &#123;&#125; 不在核心中使用，但其他项目将它们的属性附加到它，因此它需要存在。</span></span><br><span class="line">support: support</span><br><span class="line">&#125; );</span><br></pre></td></tr></table></figure><h3 id="2-0-jQuery框架的插件处理机制"><a href="#2-0-jQuery框架的插件处理机制" class="headerlink" title="2.0 jQuery框架的插件处理机制"></a>2.0 jQuery框架的插件处理机制</h3><p>jQuery框架中上面列出的这几百行代码主要做了两件事情。</p><blockquote><p>❏ 在jQuery的基础上拓展了<code>jQuery.extend</code>方法和<code>jQuery.fn.extend</code>方法。<br>❏ 调用<code>jQuery.extend</code>方法来为jQuery批量的添加一堆的静态方法(如<code>map</code>和<code>grep</code>等)。</p></blockquote><p><span style="border:1px solid #000;padding:5px 20px;"><strong>jQuery插件方法的实现</strong></span></p><p>jQuery官方框架中在实现<code>jQuery.extend</code>和<code>jQuery.fn.extend</code>这两个方法的时候用了接近80行代码，具体的实现细节比较复杂，这里给出一个简易版本来帮助大家理解这两个方法都做了什么事情。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">jQuery.extend = jQuery.fn.extend = <span class="function"><span class="keyword">function</span> (<span class="params">objT</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//遍历参数对象，获取对象中的每个成员添加在jQuery或者是jQuery.fn对象。</span></span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> objT)</span><br><span class="line"> &#123;</span><br><span class="line">     <span class="comment">// 过滤掉原型对象的成员，如果仅仅只处理函数还可以对参数的类型进行判断</span></span><br><span class="line"> <span class="keyword">if</span> (<span class="built_in">Object</span>.hasOwnProperty(key))</span><br><span class="line"> &#123;</span><br><span class="line">     <span class="comment">//this的值由函数的调用方式决定</span></span><br><span class="line">    <span class="keyword">this</span>[key] = objT[key];</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br><span class="line">     &#125;;</span><br></pre></td></tr></table></figure><p><img src="https://github.com/flowerField/Source/blob/master/Blog/jq_03.png?raw=true"></p><p>其实简单点说，这两个的方法的功能就是把传递给他们的参数(对象类型)中的所有成员都添加到对应的对象中(<span style="color:#195">如果是jQuery.fn.extend方法，那么就添加到jQuery的原型对象身上作为原型成员来使用，如果是jQuery.extend方法，则直接添加到jQuery身上作为静态方法来使用</span>)。</p><p>在这两个方法的实现中巧妙利用了this指向的对象由函数调用方式决定这一特点，做到<code>jQuery.extend = jQuery.fn.extend</code>。也因此，虽然在<code>jQuery.extend方法</code>和<code>jQuery.fn.extend方法</code>的函数体相同，但由于内部使用了this的缘故，所以在单独调用这两个方法的时候它们是区分处理的。</p><p><span style="border:1px solid #000;padding:5px 20px;"><strong>jQuery插件方法的调用</strong></span></p><p>这里给出上面代码中jQuery.extend()调用的简化版本。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">jQuery.extend(&#123;</span><br><span class="line">    <span class="comment">//判断指定参数是否是一个纯粹的对象</span></span><br><span class="line">    isPlainObject:<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;&#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断指定参数是否是一个空的对象</span></span><br><span class="line">    isEmptyObject:<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;&#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//迭代方法，用来遍历对象、数组和伪数组</span></span><br><span class="line">    each:<span class="function"><span class="keyword">function</span>(<span class="params"> obj, callback</span>)</span>&#123;&#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//清除字符串前后的N个空格，同ES5中字符串的trim方法</span></span><br><span class="line">    trim:<span class="function"><span class="keyword">function</span>(<span class="params">text</span>)</span>&#123;&#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//把伪数组对象转换为数组</span></span><br><span class="line">    makeArray：<span class="function"><span class="keyword">function</span>(<span class="params">arr, results </span>)</span>&#123;&#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//该方法用于在数组中搜索指定的值，并返回其索引值。</span></span><br><span class="line">    inArray:<span class="function"><span class="keyword">function</span>(<span class="params">elem, arr, i</span>) </span>&#123;&#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//该方法用于合并两个数组</span></span><br><span class="line">    merge:<span class="function"><span class="keyword">function</span>(<span class="params">first, second </span>)</span>&#123;&#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">//这是一个过滤函数，主要用于过滤数组</span></span><br><span class="line">    grep: <span class="function"><span class="keyword">function</span>(<span class="params"> elems, callback, invert </span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//数组映射方法，把一个数组中的元素转换到另一个数组中</span></span><br><span class="line">    map:<span class="function"><span class="keyword">function</span>(<span class="params"> elems, callback, arg </span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><code>jQuery.extend() 和jQuery.fn.extend()</code>这两个方法在jQuery框架中被大量使用，绝大多数的方法均通过调用者两个函数来添加到jQuery身上或者是jQuery的原型对象身上，这种为jQuery和jQuery原型对象拓展方法(功能)的机制被称为<strong>插件机制</strong>。jQuery框架的官方团队维护了一个<a href="https://plugins.jquery.com/" target="_blank" rel="noopener">jQuery官方插件列表</a>，我们可以在使用jQuery的基础上通过引入对应的jQuery插件来快速实现特定的功能。当然，除jQuery官方团队维护的插件之外，我们还能在互联网上找到很多其它开发人员为jQuery写的一些优秀插件，在具体的开发中可以根据项目的需求来综合评估是否直接使用jQuery插件来实现。</p><p>总体来说，jQuery的插件实现是比较简单的。如果你想要自己写一个jQuery插件，那么只需要创建一个新的js文件，该文件推荐命名为<code>jQuery.xx.js</code>的形式。然后在js代码中通过调用<code>jQuery.extend() 和jQuery.fn.extend()</code>方法来拓展功能即可。</p><div class="tip">常见的插件实现形式是：把对应的代码包裹到闭包中，然后传递jQuery对象。</div><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;这篇文章将主要介绍jQuery框架的插件机制，包括但不限于&lt;code&gt;jQuery.extend&lt;/code&gt;和&lt;code&gt;jQuery.fn.extend&lt;/code&gt;方法的设计和使用，JavaScript体系中的常用概念以及jQuery插件的使
      
    
    </summary>
    
    
      <category term="jQuery框架系列" scheme="https://weibo.com/u/3800117445/tags/jQuery%E6%A1%86%E6%9E%B6%E7%B3%BB%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序基础[12]-小程序中的基础组件(四)</title>
    <link href="https://weibo.com/u/3800117445/2018/10/08/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%8F%E5%88%97%5B12%5D-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%9A%84%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6(%E5%9B%9B)/"/>
    <id>https://weibo.com/u/3800117445/2018/10/08/微信小程序序列[12]-小程序中的基础组件(四)/</id>
    <published>2018-10-07T16:00:09.000Z</published>
    <updated>2018-11-11T13:30:01.323Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本文介绍小程序中的基础组件，主要包括form表单、radio和label等组件的基本使用和综合示例。</p></blockquote><h4 id="1-0-form表单组件"><a href="#1-0-form表单组件" class="headerlink" title="1.0 form表单组件"></a>1.0 form表单组件</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/form.html" target="_blank" rel="noopener">form表单组件</a>在小程序开发中常用于收集和获取用户输入(选择)的数据，属于表单类组件，小程序本身的特点决定了我们在对页面进行操作的时候无法像前端开发中那样可以用DOM或一些选择器引擎框架来处理。因此，在特定的场景中form表单组件就成为了必要的几乎也是唯一的选择，它能够将组件内用户输入的<code>switch</code>、<code>input</code>、 <code>checkbox</code>、<code>slider</code>、<code>radio</code>和<code>picker</code>等组件的信息提交，通过触发绑定事件在回调函数的事件对象参数来获取对应的数据。</p><p><strong>这里列出form表单组件的主要属性</strong></p><p><span class="propWX-green bg-red">bindreset</span>     form表单重置时会触发reset事件。<br><span class="propWX-green bg-red">bindsubmit</span>     form表单提交时会触发submit事件。<br><span class="propWX-green ">report-submit</span>     是否返回 formId ，用于发送模板消息，布尔类型，默认值为false。</p><p>在使用的<a href="https://developers.weixin.qq.com/miniprogram/dev/component/form.html" target="_blank" rel="noopener">form表单组件</a>的时候需要注意，表单组件的<code>submit</code>和<code>reset</code>事件触发的方式比较特殊，需要和整个表单组件中<code>formType 为 submit 或 reset</code>的 <a href="https://developers.weixin.qq.com/miniprogram/dev/component/button.html" target="_blank" rel="noopener">button组件</a> 相关联。</p><p>也就是说，当form组件内部包含的拥有formType属性且其值为submit的button组件被点击时，才会触发并执行form组件中<code>bindsubmit</code>事件绑定的回调函数，表示要提交整个表单中的数据。这时，我们可以通过在回调函数中事件对象的detail属性来获取这些数据。</p><div class="tip"><br>form组件内部其他表单类型组件的数据在提交的时候总是要以键值对(<code>key-value</code>)的方式进行处理，所以需要给每个表单类型的组件设置name属性来确定其key值。<br></div><h4 id="2-0-单项选择器组件-radio-group-和-radio"><a href="#2-0-单项选择器组件-radio-group-和-radio" class="headerlink" title="2.0 单项选择器组件( radio-group 和 radio )"></a>2.0 单项选择器组件( radio-group 和 radio )</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/radio.html" target="_blank" rel="noopener">单项选择器组件</a>其实由<code>radio-group</code>和<code>radio</code>两个具体的组件构成。</p><p><code>radio组件</code>表示的是每一个的单选项目，而<code>radio-group</code>用来包裹住多个单选项目。</p><p><span style="border:1px solid #000;padding:0 10px;background:#FFE7BA"><strong>radio组件</strong></span><br><span class="propWX-green ">color</span>     radio选中的颜色。<br><span class="propWX-green bg-red">value</span>     当前radio选项的值。<br><span class="propWX-green ">disabled</span>     当前radio选项是否被禁用，布尔类型，默认值为false。<br><span class="propWX-green ">checked</span>     当前radio是否被选中，布尔类型，具有排它性会覆盖。</p><p><span style="border:1px solid #000;padding:0 10px;background:#FFE7BA"><strong>radio-group组件</strong></span><br><span class="propWX-green ">bindchange</span>    当选中项发生变化时触发<code>change事件</code>并执行绑定的方法，可通过事件对象来获取当前选中项的值<code>(事件对象.detail</code>)。</p><h4 id="3-0-label组件"><a href="#3-0-label组件" class="headerlink" title="3.0 label组件"></a>3.0 label组件</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/label.html" target="_blank" rel="noopener">label组件</a>主要用来改进表单组件的可用性。在label组件中拥有唯一的for属性，通过该属性可以找到对应的id，或者将其他的组件放在该标签下，当点击时对应的组件会被触发。</p><p><span class="propWX-green ">for</span>     该属性值对应为绑定组件的id。</p><p><strong>注意</strong> label组件中for属性的优先级高于内部组件，内部有多个组件的时候默认触发第一个。目前可以绑定的组件有主要有：<code>button</code>组件, <code>checkbox</code>组件, <code>radio</code>组件和 <code>switch</code>组件。</p><p><strong>label组件的使用示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">style</span>=<span class="string">'width:100%;height:500rpx;background:#239120'</span> <span class="attr">for</span>=<span class="string">'testID'</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox-group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">value</span>=<span class="string">'韩寒'</span>&gt;</span>韩寒<span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">value</span>=<span class="string">'白百何'</span>&gt;</span>白百何<span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">checkbox-group</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">radio-group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">radio</span> <span class="attr">id</span>=<span class="string">'testID'</span> <span class="attr">value</span>=<span class="string">'男'</span>&gt;</span>男<span class="tag">&lt;/<span class="name">radio</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">radio</span> <span class="attr">value</span>=<span class="string">'女'</span>&gt;</span>女<span class="tag">&lt;/<span class="name">radio</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">radio-group</span>&gt;</span></span><br><span class="line"></span><br><span class="line">我是label中的内容</span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx28.gif?raw=true"></p><h4 id="4-0-多种组件使用的综合案例"><a href="#4-0-多种组件使用的综合案例" class="headerlink" title="4.0 多种组件使用的综合案例"></a>4.0 多种组件使用的综合案例</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//001 wxml文件的内容</span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">bindsubmit</span>=<span class="string">'submitClick'</span> <span class="attr">bindreset</span>=<span class="string">'resetClick'</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">'请输入用户名'</span> <span class="attr">name</span>=<span class="string">'username'</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">'请输入密码'</span> <span class="attr">name</span>=<span class="string">'password'</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">radio-group</span> <span class="attr">name</span>=<span class="string">'director'</span>  <span class="attr">bindchange</span>=<span class="string">"radioChange"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span>请选择导演<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">bindtap</span>=<span class="string">'labClick'</span> <span class="attr">wx:key</span>=<span class="string">'index'</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;dataArray&#125;&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">radio</span> <span class="attr">value</span>=<span class="string">"&#123;&#123;item.name&#125;&#125;"</span> <span class="attr">checked</span>=<span class="string">"&#123;&#123;item.checked&#125;&#125;"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">disabled</span>=<span class="string">'&#123;&#123;item.disabled&#125;&#125;'</span> <span class="attr">color</span>=<span class="string">'&#123;&#123;item.color&#125;&#125;'</span>/&gt;</span> &#123;&#123;item.name&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 注意：此处使用label和block都可以，但是不能把wx:for等指令直接用在radio组件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">radio-group</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">size</span>=<span class="string">'mini'</span> <span class="attr">formType</span>=<span class="string">'submit'</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">size</span>=<span class="string">'mini'</span> <span class="attr">formType</span>=<span class="string">'reset'</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//002 wxss文件的内容</span><br><span class="line"><span class="selector-tag">input</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">10</span>rpx <span class="number">10</span>rpx;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">view</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20</span>rpx <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">radio-group</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">40</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">30</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//003 js文件的内容</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  data:&#123;</span><br><span class="line">    dataArray:[</span><br><span class="line">      &#123;<span class="attr">name</span>: <span class="string">'黄渤'</span>, <span class="attr">color</span>:<span class="string">"red"</span> &#125;,</span><br><span class="line">      &#123;<span class="attr">name</span>: <span class="string">'徐峥'</span>, <span class="attr">checked</span>: <span class="string">'true'</span> &#125;,</span><br><span class="line">      &#123;<span class="attr">name</span>: <span class="string">'韩寒'</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">name</span>: <span class="string">'吴京'</span>, <span class="attr">disabled</span>:<span class="literal">true</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  labClick:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"labClick+++"</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  submitClick:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"表单组件提交事件---submitClick"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(e.detail.value);</span><br><span class="line">  &#125;,</span><br><span class="line">  resetClick:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"表单组件重置事件---resetClick"</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  radioChange:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"redio-group中的选中项发生变化--radioChange"</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(e.detail);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>这里贴出上面代码的实现效果图。<br><img src="https://github.com/flowerField/Source/blob/master/Blog/wx27.gif?raw=true"></p><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本文介绍小程序中的基础组件，主要包括form表单、radio和label等组件的基本使用和综合示例。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;1-0-form表单组件&quot;&gt;&lt;a href=&quot;#1-0-form表单组件&quot; class=&quot;he
      
    
    </summary>
    
    
      <category term="微信小程序序列" scheme="https://weibo.com/u/3800117445/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%8F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序基础[11]-小程序中的基础组件(三)</title>
    <link href="https://weibo.com/u/3800117445/2018/10/07/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%8F%E5%88%97%5B11%5D-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%9A%84%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6(%E4%B8%89)/"/>
    <id>https://weibo.com/u/3800117445/2018/10/07/微信小程序序列[11]-小程序中的基础组件(三)/</id>
    <published>2018-10-06T16:00:09.000Z</published>
    <updated>2018-11-11T13:30:01.300Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本文介绍小程序中的基础组件，主要包括swiper、scroll-view等组件的基本使用和综合示例。</p></blockquote><h4 id="1-0-swiper组件"><a href="#1-0-swiper组件" class="headerlink" title="1.0 swiper组件"></a>1.0 swiper组件</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html" target="_blank" rel="noopener">swiper组件</a>是小程序中使用频次最高的组件之一，属于视图容器类组件，它通过对自身属性进行简单配置就可以实现在前端开发中要写很多代码才能完成的轮播图效果。</p><p>随手截取几个小程序中swiper组件的使用情况，给出贴图。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx22.png?raw=true"></p><p><strong>这里列出swiper组件的主要属性</strong></p><p><span class="propWX-green bg-red">autoplay</span>    是否自动切换，布尔类型，默认值为false。<br><span class="propWX-green ">circular</span>    是否采用衔接滑动，布尔类型，默认值为false。<br><span class="propWX-green bg-red">duration</span>    控制滑块的动画时间，数值类型，默认值为500，单位是毫秒。<br><span class="propWX-green bg-red">interval</span>    控制自动切换的时间间隔，数值类型，默认值为5000，单位是毫秒。<br><span class="propWX-green ">vertical</span>    控制滑块是否为纵向，布尔类型，默认值为false，设置为true表示纵向。</p><p><span class="propWX-green ">indicator-color</span>显示面板指示点的默认颜色。<br><span class="propWX-green ">indicator-active-color</span>当前选中(显示)的面板指示点的颜色。<br><span class="propWX-green bg-red">indicator-dots</span>    是否显示面板指示点，布尔类型，默认值为false表示不显示。</p><p><span class="propWX-green ">current</span>当前所在滑块的索引(<code>index</code>)，数值类型，默认值为0，可以指定。<br><span class="propWX-green ">display-multiple-items</span> 能够同时显示的滑块数量，数值类型，默认能同时只能显示1个滑块。<br><span class="propWX-green ">bindchange</span> 当滑块的current改变时会触发该事件并执行绑定的方法，事件类型。<br><span class="propWX-green ">bindanimationfinish</span> 当滑块动画结束的时候会触发该事件并执行绑定的方法，事件类型。</p><p><strong>备注001</strong> 该组件中其它的诸如<code>previous-margin</code>（前边距）| <code>next-margin</code>（后边距） | <code>skip-hidden-item-layout</code>（是否跳过未布局滑块）|<code>current-item-id</code>（当前滑块所在的item-id）等不常用属性请自行查阅<a href="https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html" target="_blank" rel="noopener">官方文档</a>。</p><p><strong>备注002</strong> <span style="color:red">swiper-item</span> 该组件可以且仅可放置在<swiper>组件中，宽高自动设置为100%。</swiper></p><div class="tip"><strong>注意</strong> 在swiper组件中仅可以直接放置swiper-item组件，否则会导致未定义的行为。如果需要配合使用wx:for等指令那么可以使用<code>block</code>标签来进行包裹。</div><p><strong>这里我们以”花点时间的店”这个小程序的轮播图</strong>的实现为例给出示例代码<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//001 wxml文件中的代码</span><br><span class="line"><span class="tag">&lt;<span class="name">swiper</span> <span class="attr">indicator-dots</span>=<span class="string">"&#123;&#123;indicatorDots&#125;&#125;"</span> <span class="attr">autoplay</span> <span class="attr">interval</span>=<span class="string">"&#123;&#123;interval&#125;&#125;"</span></span></span><br><span class="line"><span class="tag">   <span class="attr">duration</span>=<span class="string">"&#123;&#123;duration&#125;&#125;"</span> <span class="attr">circular</span>  <span class="attr">indicator-active-color</span>=<span class="string">"&#123;&#123;activeColor&#125;&#125;"</span></span></span><br><span class="line"><span class="tag">   <span class="attr">bindanimationfinish</span>=<span class="string">'animationFinish'</span> <span class="attr">bindchange</span>=<span class="string">'currentIndexChange'</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;dataArray&#125;&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">"&#123;&#123;item&#125;&#125;"</span> <span class="attr">class</span>=<span class="string">"slide-image"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//注释：</span><br><span class="line">//indicator-dots 该属性控制显示面板知识点</span><br><span class="line">//interval：动画自动切换的时间，这里设置为3000</span><br><span class="line">//duration：滑块动画的时间，这里设置为500，其实默认就是500(可以不用设置)</span><br><span class="line">//circular：使用衔接动画，个人感觉这样效果更好一些，不会跳转到开头重新开始</span><br><span class="line">//indicator-active-color:给当前滑块的面板知识点设置为红色以区分</span><br><span class="line">//bindanimationfinish: 注册了动画执行完毕后的事件，对应js文件中的animationFinish方法</span><br><span class="line">//bindchange:注册了当前滑块切换的事件，对应js文件中的currentIndexChange方法</span><br></pre></td></tr></table></figure></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//002 wxss文件中的样式设置</span><br><span class="line"><span class="selector-tag">swiper</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">750</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">750</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.slide-image</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">750</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">750</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//003 js文件中的代码</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    activeColor:<span class="string">"red"</span>,</span><br><span class="line">    interval:<span class="number">3000</span>,</span><br><span class="line">    duration:<span class="number">500</span>,</span><br><span class="line">    indicatorDots:<span class="literal">true</span>,</span><br><span class="line">    dataArray:[</span><br><span class="line">      <span class="string">"https://github.com/flowerField/Source/blob/master/Blog/flower001.jpg?raw=true"</span>,</span><br><span class="line">      <span class="string">"https://github.com/flowerField/Source/blob/master/Blog/flower002.jpg?raw=true"</span>,</span><br><span class="line">      <span class="string">"https://github.com/flowerField/Source/blob/master/Blog/flower003.jpg?raw=true"</span>,</span><br><span class="line">      <span class="string">"https://github.com/flowerField/Source/blob/master/Blog/flower004.jpg?raw=true"</span>,</span><br><span class="line">      <span class="string">"https://github.com/flowerField/Source/blob/master/Blog/flower005.jpg?raw=true"</span>,</span><br><span class="line">      <span class="string">"https://github.com/flowerField/Source/blob/master/Blog/flower006.jpg?raw=true"</span>,</span><br><span class="line">      <span class="string">"https://github.com/flowerField/Source/blob/master/Blog/flower007.jpg?raw=true"</span>,</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  animationFinish:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"动画执行完毕---"</span>,e.detail);</span><br><span class="line">  &#125;,</span><br><span class="line">  currentIndexChange:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"当前的滑块切换了"</span>, e.detail);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>这里给出上面的代码编译后在小程序中呈现的效果图。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx25.gif?raw=true"></p><h4 id="2-0-scroll-view组件"><a href="#2-0-scroll-view组件" class="headerlink" title="2.0 scroll-view组件"></a>2.0 scroll-view组件</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html" target="_blank" rel="noopener">scroll-view</a>是小程序中的可滚动视图组件，支持竖向滚动和横向滚动，这里给出该组件在商业小程序中的应用示意图。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx24.gif?raw=true"></p><p><strong>列出scroll-view组件的主要属性</strong></p><p><span class="propWX-green bg-red">scroll-x</span>    允许横向滚动，布尔类型，默认值为false。<br><span class="propWX-green">scroll-y</span>    允许纵向滚动，布尔类型，默认值为false。<br><span class="propWX-green">scroll-top</span>    设置竖向滚动条的位置，数值类型。<br><span class="propWX-green">scroll-left</span>    设置横向滚动条的位置，数值类型。</p><p><span class="propWX-green ">scroll-with-animation</span>    在设置滚动条位置时使用动画过渡，布尔类型，默认值为false。<br><span class="propWX-green ">upper-threshold</span>    距顶部/左边多远时（单位px），触发<code>scrolltoupper事件</code>，默认值为50。<br><span class="propWX-green ">lower-threshold</span>    距底部/右边多远时（单位px），触发<code>scrolltolower事件</code>，默认值为50。<br><span class="propWX-green ">scroll-into-view</span>    其值应为某子元素id，表示在特定的方向上滚动到该元素。<br><span class="propWX-green ">enable-back-to-top</span>    iOS点击顶部状态栏、安卓双击标题栏时，滚动条返回顶部，只支持竖向。</p><p><span class="propWX-green bg-red">bindscroll</span>    当组件滚动的时候会触发该事件，相关的数据保存在event.detail对象中。<br><span class="propWX-green bg-red">bindscrolltoupper</span>    当组件滚动到顶部/左边的时候会触发<code>scrolltoupper事件</code>。<br><span class="propWX-green bg-red">bindscrolltolower</span>    当组件滚动到底部/右边的时候会触发<code>scrolltolower事件</code>。</p><p><strong>这里我们给出实现上面滚动效果的代码示例</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//001 wxml文件中的内容</span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">'scroll-view-class'</span>  <span class="attr">scroll-x</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'scroll-cell'</span> <span class="attr">wx:for</span>=<span class="string">'&#123;&#123;productData&#125;&#125;'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'scroll-cell-view'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">'&#123;&#123;item.head_pic_url&#125;&#125;'</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'scroll-cell-description'</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'scroll-cell-description-name'</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'scroll-cell-description-top'</span>&gt;</span>top &#123;&#123;index + 1&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'scroll-cell-price'</span>&gt;</span>￥&#123;&#123;item.price&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">//002 wxss文件中的内容</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">page</span>&#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.scroll-view-class</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">750</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">500</span>rpx;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.scroll-cell</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">250</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">480</span>rpx;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.scroll-cell-view</span> <span class="selector-tag">image</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">250</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.scroll-cell-description</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">250</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">25</span>rpx;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.scroll-cell-description-name</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">130</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">50</span>rpx;</span><br><span class="line">  <span class="attribute">white-space</span>: normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.scroll-cell-description-top</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">80</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40</span>rpx;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1</span>rpx solid <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">150</span>rpx;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//003 js文件中的内容</span></span><br><span class="line">Page(&#123;</span><br><span class="line"> data:&#123;</span><br><span class="line">   productData: [</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="string">"id"</span>: <span class="string">"700005"</span>,</span><br><span class="line">       <span class="string">"head_pic_url"</span>: <span class="string">"https://qnoutbucket.immatchu.com/2018_9_18_058df245-8323-4afa-be14-918344e8db5e.jpg"</span>,</span><br><span class="line">       <span class="string">"name"</span>: <span class="string">"白色厚款竹纤维衬衫"</span>,</span><br><span class="line">       <span class="string">"price"</span>: <span class="string">"199.00"</span>,</span><br><span class="line">       <span class="string">"sales_volume"</span>: <span class="number">10188</span></span><br><span class="line">     &#125;,</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="string">"id"</span>: <span class="string">"700004"</span>,</span><br><span class="line">       <span class="string">"head_pic_url"</span>: <span class="string">"https://qnoutbucket.immatchu.com/2018_9_18_2d04651f-178a-47a0-8a1b-d76610e61f5d.jpg"</span>,</span><br><span class="line">       <span class="string">"name"</span>: <span class="string">"藏青色厚款竹纤维衬衫"</span>,</span><br><span class="line">       <span class="string">"price"</span>: <span class="string">"199.00"</span>,</span><br><span class="line">       <span class="string">"sales_volume"</span>: <span class="number">6120</span></span><br><span class="line">     &#125;,</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="string">"id"</span>: <span class="string">"700006"</span>,</span><br><span class="line">       <span class="string">"head_pic_url"</span>: <span class="string">"https://qnoutbucket.immatchu.com/2018_9_18_f2c106ac-3a25-4ec4-b93e-89deb4879152.jpg"</span>,</span><br><span class="line">       <span class="string">"name"</span>: <span class="string">"黑色厚款竹纤维衬衫"</span>,</span><br><span class="line">       <span class="string">"price"</span>: <span class="string">"199.00"</span>,</span><br><span class="line">       <span class="string">"sales_volume"</span>: <span class="number">5742</span></span><br><span class="line">     &#125;,</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="string">"id"</span>: <span class="string">"700007"</span>,</span><br><span class="line">       <span class="string">"head_pic_url"</span>: <span class="string">"https://qnoutbucket.immatchu.com/2018_9_18_0bade22f-0a02-4ded-b57c-3eba62be59cb.jpg"</span>,</span><br><span class="line">       <span class="string">"name"</span>: <span class="string">"浅蓝色厚款竹纤维衬衫"</span>,</span><br><span class="line">       <span class="string">"price"</span>: <span class="string">"199.00"</span>,</span><br><span class="line">       <span class="string">"sales_volume"</span>: <span class="number">3843</span></span><br><span class="line">     &#125;,</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="string">"id"</span>: <span class="string">"700077"</span>,</span><br><span class="line">       <span class="string">"head_pic_url"</span>: <span class="string">"https://qiniucdn.immatchu.com/mumall/image/new_head_pic/700077_head.jpg"</span>,</span><br><span class="line">       <span class="string">"name"</span>: <span class="string">"浅蓝灰经典平绒牛津纺衬衫"</span>,</span><br><span class="line">       <span class="string">"price"</span>: <span class="string">"199.00"</span>,</span><br><span class="line">       <span class="string">"sales_volume"</span>: <span class="number">3375</span></span><br><span class="line">     &#125;,</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="string">"id"</span>: <span class="string">"700112"</span>,</span><br><span class="line">       <span class="string">"head_pic_url"</span>: <span class="string">"https://qiniucdn.immatchu.com/mumall/image/new_head_pic/700112_head.jpg"</span>,</span><br><span class="line">       <span class="string">"name"</span>: <span class="string">"水磨黑混纺休闲西裤"</span>,</span><br><span class="line">       <span class="string">"price"</span>: <span class="string">"299.00"</span>,</span><br><span class="line">       <span class="string">"sales_volume"</span>: <span class="number">2889</span></span><br><span class="line">     &#125;,</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="string">"id"</span>: <span class="string">"700105"</span>,</span><br><span class="line">       <span class="string">"head_pic_url"</span>: <span class="string">"https://qnoutbucket.immatchu.com/2018_9_20_98795e44-4f2f-4fa6-aaad-ef09e6f1e435.jpg"</span>,</span><br><span class="line">       <span class="string">"name"</span>: <span class="string">"水墨黑条纹弹力休闲西裤"</span>,</span><br><span class="line">       <span class="string">"price"</span>: <span class="string">"299.00"</span>,</span><br><span class="line">       <span class="string">"sales_volume"</span>: <span class="number">2538</span></span><br><span class="line">     &#125;,</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="string">"id"</span>: <span class="string">"75"</span>,</span><br><span class="line">       <span class="string">"head_pic_url"</span>: <span class="string">"https://qnoutbucket.immatchu.com/2018_9_18_a64e80b0-60b2-4a8a-9b32-6918937ee642.jpg"</span>,</span><br><span class="line">       <span class="string">"name"</span>: <span class="string">"天蓝竹纤维衬衫"</span>,</span><br><span class="line">       <span class="string">"price"</span>: <span class="string">"199.00"</span>,</span><br><span class="line">       <span class="string">"sales_volume"</span>: <span class="number">2412</span></span><br><span class="line">     &#125;,</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="string">"id"</span>: <span class="string">"700100"</span>,</span><br><span class="line">       <span class="string">"head_pic_url"</span>: <span class="string">"https://qiniucdn.immatchu.com/mumall/image/new_head_pic/700100_2018_9_13_514efbe4-c18b-440e-8e0c-27b44daa7113.jpg"</span>,</span><br><span class="line">       <span class="string">"name"</span>: <span class="string">"藏青色平纹棉休闲西裤"</span>,</span><br><span class="line">       <span class="string">"price"</span>: <span class="string">"399.00"</span>,</span><br><span class="line">       <span class="string">"sales_volume"</span>: <span class="number">2232</span></span><br><span class="line">     &#125;</span><br><span class="line">   ]</span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>这里贴出最终实现的效果图。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx26.gif?raw=true"></p><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本文介绍小程序中的基础组件，主要包括swiper、scroll-view等组件的基本使用和综合示例。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;1-0-swiper组件&quot;&gt;&lt;a href=&quot;#1-0-swiper组件&quot; class=&quot;he
      
    
    </summary>
    
    
      <category term="微信小程序序列" scheme="https://weibo.com/u/3800117445/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%8F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>网络编程系列 Hexo + Github搭建个人博客</title>
    <link href="https://weibo.com/u/3800117445/2018/10/06/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%B3%BB%E5%88%97%20Hexo%20+%20gitub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/"/>
    <id>https://weibo.com/u/3800117445/2018/10/06/网络编程系列 Hexo + gitub搭建个人博客教程/</id>
    <published>2018-10-06T05:12:13.000Z</published>
    <updated>2018-11-11T13:30:01.226Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-0-说明"><a href="#1-0-说明" class="headerlink" title="1.0 说明"></a>1.0 说明</h3><p>其实，搭建个人博客的技术方案有很多。</p><p>其实，你能找到的使用<code>Hexo + Github</code>搭建个人博客的教程也有很多。</p><p>所以，其实这是一篇没必要的文章，但因为种种原因我还是写了这篇简单的教程。</p><p>说明，这篇教程以<a href="http://www.wendingding.com" target="_blank" rel="noopener">我个人的技术博客为例</a>来演示使用<code>Hexo + Github</code>搭建个人博客的基本操作。</p><h3 id="2-0-步骤"><a href="#2-0-步骤" class="headerlink" title="2.0 步骤"></a>2.0 步骤</h3><p><span style="border:1px solid #000;padding:5px 20px;"> <strong>环境准备</strong><span></span></span></p><blockquote><p>❏ 系统中准备好<code>Git</code>的命令行工具。<br>❏ 系统中准备好<code>Node.js</code>和<code>npm</code>环境。<br>❏ 拥有<a href="https://github.com/" target="_blank" rel="noopener">Github网站</a>的账号，如果没有请登录官网按照提示注册。<br>❏ 若需给博客配置域名那么您可能还需要<a href="https://wanwang.aliyun.com/?spm=5176.8142029.digitalization.2.3dbd6d3eALueFf" target="_blank" rel="noopener">花一点点钱买个域名</a>，如果没这需求则可以忽略。</p></blockquote><p><strong>Git工具</strong> Windows操作系统可以使用cmd打开自带的命令行工具使用，但个人还是强烈建议您下载并安装<a href="https://git-scm.com/downloads" target="_blank" rel="noopener">Git for Windows工具</a>使用，下载并安装后在系统中任何文件夹中鼠标右键就可以看到<code>Git Bash Here</code>条目，点击即可打开命令行界面。Mac OSX操作系统中默认已经自带了git命令工具，可以打开终端直接使用。(<strong>备注 </strong> Mac打开终端的快捷方式：<code>control + 空格 + 搜索框输入Terminal + 回车键</code>)。Git工具准备好之后，可以通过<code>git --version</code>命令来查看系统当前安装的Git版本。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wendingding:~ wendingding$ git --version</span><br><span class="line">git version 2.11.0</span><br></pre></td></tr></table></figure></p><p><strong>Node和Npm</strong> 安装Node之后Npm会附带一起安装，所以我们只需要到<a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener">NodeJS的官网</a>下载对应版本安装到电脑系统中即可。安装完成后，可以使用命令行工具来查看当前版本。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wendingding:~ wendingding$ node --version &amp;&amp; npm -v</span><br><span class="line">v8.9.3</span><br><span class="line">5.5.1</span><br></pre></td></tr></table></figure></p><p><span style="border:1px solid #000;padding:5px 20px;"> <strong>Hexo的安装</strong><span></span></span></p><p>在自己电脑中合适的地方新建文件夹，比如我的路径是：<code>/Users/文顶顶/Blog</code>。然后在命令行工具中通过cd命令进入到该文件目录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wendingding:~ wendingding$ <span class="built_in">pwd</span></span><br><span class="line">/Users/文顶顶</span><br><span class="line">wendingding:~ wendingding$ <span class="built_in">cd</span> Desktop/</span><br><span class="line">wendingding:Desktop wendingding$ mkdir Blog</span><br><span class="line">wendingding:Desktop wendingding$ <span class="built_in">cd</span> Blog/</span><br><span class="line">wendingding:Blog wendingding$ <span class="built_in">pwd</span></span><br><span class="line">/Users/文顶顶/Desktop/Blog</span><br></pre></td></tr></table></figure><p>创建好文件目录后，接下里我们就可以使用npm来全局安装Hexo到当前的文件目录(Blog目录)了,命令行中的<code>-g</code>表示全局安装，安装完成后可以通过<code>hexo --version</code>命令来查看版本信息，主要关注<code>hexo-cli</code>即可，到这里表示hexo已经安装好了。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Blog wendingding$ npm install hexo -g</span><br><span class="line">wendingding:Blog wendingding$ hexo --version</span><br><span class="line">hexo-cli: 1.1.0</span><br><span class="line">os: Darwin 17.4.0 darwin x64</span><br><span class="line">http_parser: 2.7.0</span><br><span class="line">node: 8.9.3</span><br><span class="line">v8: 6.1.534.48</span><br><span class="line">uv: 1.15.0</span><br><span class="line">zlib: 1.2.11</span><br><span class="line">ares: 1.10.1-DEV</span><br><span class="line">modules: 57</span><br><span class="line">nghttp2: 1.25.0</span><br><span class="line">openssl: 1.0.2n</span><br><span class="line">icu: 59.1</span><br><span class="line">unicode: 9.0</span><br><span class="line">cldr: 31.0.1</span><br><span class="line">tz: 2017b</span><br></pre></td></tr></table></figure></p><p><span style="border:1px solid #000;padding:5px 20px;"> <strong>搭建博客</strong><span></span></span></p><p>到目前为止，使用Hexo和Github搭建博客的环境已经准备好了，接下来介绍搭建博客的具体操作。</p><p><strong>搭建博客的主要流程</strong></p><blockquote><p>❏ 在本地目录中使用hexo来初始化博客仓库。<br>❏ 在Github网站使用自己的账号来创建对应的托管仓库。<br>❏ 对本地的hexo博客项目进行配置和Github官网的托管仓库对接。<br>❏ 在命令行中通过hexo命令来生成博客、预览博客和发布博客到远程仓库。</p></blockquote><p><strong>初始化操作</strong> 在当前目录中(<code>/Users/文顶顶/Blog</code>)通过命令行工具执行<code>hexo init</code>来进行初始化。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Blog wendingding$ <span class="built_in">pwd</span></span><br><span class="line">/Users/文顶顶/Desktop/Blog</span><br><span class="line"></span><br><span class="line">wendingding:Blog wendingding$ hexo init</span><br><span class="line"></span><br><span class="line">INFO  Cloning hexo-starter to ~/Desktop/Blog</span><br><span class="line">Cloning into <span class="string">'/Users/文顶顶/Desktop/Blog'</span>...</span><br><span class="line">remote: Enumerating objects: 68, <span class="keyword">done</span>.</span><br><span class="line">remote: Total 68 (delta 0), reused 0 (delta 0), pack-reused 68</span><br><span class="line">Unpacking objects: 100% (68/68), <span class="keyword">done</span>.</span><br><span class="line">Submodule <span class="string">'themes/landscape'</span> (https://github.com/hexojs/hexo-theme-landscape.git) registered <span class="keyword">for</span> path <span class="string">'themes/landscape'</span></span><br><span class="line">Cloning into <span class="string">'/Users/文顶顶/Desktop/Blog/themes/landscape'</span>...</span><br><span class="line">remote: Enumerating objects: 2, <span class="keyword">done</span>.</span><br><span class="line">remote: Counting objects: 100% (2/2), <span class="keyword">done</span>.</span><br><span class="line">remote: Compressing objects: 100% (2/2), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 843 (delta 0), reused 0 (delta 0), pack-reused 841</span><br><span class="line">Receiving objects: 100% (843/843), 2.55 MiB | 20.00 KiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (445/445), <span class="keyword">done</span>.</span><br><span class="line">.....省略</span><br><span class="line">added 488 packages <span class="keyword">in</span> 19.861s</span><br><span class="line">INFO  Start blogging with Hexo!</span><br></pre></td></tr></table></figure></p><p><strong>安装组件操作</strong> 当hexo初始化完成后，我们可以通过<code>npm install</code>命令来安装博客需要的所有组件。<br><strong>hexo的基础命令</strong> 当前面的工作完成后，就可以通过hexo的常用的命令来生成和预览我们的个人博客了。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Blog wendingding$ npm install</span><br><span class="line">up to date <span class="keyword">in</span> 2.091s</span><br><span class="line"></span><br><span class="line">wendingding:Blog wendingding$ hexo g</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Files loaded <span class="keyword">in</span> 234 ms</span><br><span class="line">INFO  Generated: index.html</span><br><span class="line">INFO  Generated: archives/index.html</span><br><span class="line">INFO  Generated: fancybox/fancybox_sprite.png</span><br><span class="line">......省略</span><br><span class="line">INFO  Generated: css/fonts/fontawesome-webfont.svg</span><br><span class="line">INFO  Generated: css/fonts/fontawesome-webfont.ttf</span><br><span class="line">INFO  Generated: 2018/10/09/hello-world/index.html</span><br><span class="line">INFO  28 files generated <span class="keyword">in</span> 592 ms</span><br><span class="line"></span><br><span class="line">wendingding:Blog wendingding$ hexo s</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure></p><p><strong>说明</strong><code>hexo g</code>命令用来生成博客文件，<code>hexo s</code>命令会在本地开启一个服务，我们可以通过在浏览器的地址栏中输入<code>http://localhost:4000</code>预览当前的博客页面，如果一切顺利那么您将能看到下面的页面展示。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/hexo.png?raw=true"></p><div class="tip"><br><p><br><strong>注意点[01]</strong> 当本地服务开启后，博客中内容的更改会实时的体现到预览的页面中，这一点非常的方便，如果需要继续执行其他的命令需要通过输入<code>Ctrl+C</code>来关闭服务。<br></p><br><p><br><strong>注意点[02]</strong> 如果上面的地址无法预览，则可能是端口被占用，可以通过<code>Ctrl+C</code>停止服务器后，输入<code>hexo server -p  端口号</code>来配置端口号，例如设置为4001。<br></p><br></div><p>现在<span style="color:#f05">我们看到的是默认生成的hexo博客，里面没有任何我们自己的文章暂时也和Github没啥关系</span>。当前面的命令都执行完后再当前目录下会生成一大堆的文件，这里我简单列出这些文件的目录结构并说明它们的用途。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Blog wendingding$ tree -L 2</span><br><span class="line">.</span><br><span class="line">├── _config.yml                 //整个博客的配置文件：非常重要</span><br><span class="line">├── db.json</span><br><span class="line">├── node_modules                //npm模块，可以不用关心</span><br><span class="line">....省略</span><br><span class="line">│   ├── yallist</span><br><span class="line">│   └── yargs</span><br><span class="line">├── package-lock.json</span><br><span class="line">├── package.json                //配置文件，暂时可以不用关心</span><br><span class="line">├── public                      //使用hexo命令生成后的博客内容，自动生成，不要修改</span><br><span class="line">│   ├── 2018</span><br><span class="line">│   ├── archives</span><br><span class="line">│   ├── css</span><br><span class="line">│   ├── fancybox</span><br><span class="line">│   ├── index.html</span><br><span class="line">│   └── js</span><br><span class="line">├── scaffolds                   //模板，新建文章时，会根据模板中对应的文件来创建文章</span><br><span class="line">│   ├── draft.md</span><br><span class="line">│   ├── page.md</span><br><span class="line">│   └── post.md</span><br><span class="line">├── <span class="built_in">source</span>                      //该目录控制博客的内容，非常重要</span><br><span class="line">│   └── _posts</span><br><span class="line">└── themes                      //该目录保存博客的主题(皮肤)，可以下载并使用自己喜欢的皮肤</span><br><span class="line">    └── landscape</span><br><span class="line"></span><br><span class="line">297 directories, 8 files</span><br></pre></td></tr></table></figure></p><p>默认生成的博客中显示的第一篇文章为<code>Blog/source/_posts/hello-world.md</code>文件发布处理后的结果，我们可以通过代码编辑器(比如<a href="https://www.jetbrains.com/webstorm/" target="_blank" rel="noopener">webStorm</a>)打开整个项目然后修改hello-world.md文件的内容，重新发布来观察和理解Hexo博客的运作方式。这里，我修改了文件的内容后，并在终端中执行hexo指令重新生成和发布，这里给出具体的命令行和运行结果。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">wendingding:~ wendingding$ <span class="built_in">cd</span> /Users/文顶顶/Desktop/Blog</span><br><span class="line">wendingding:Blog wendingding$ hexo g</span><br><span class="line"></span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Files loaded <span class="keyword">in</span> 232 ms</span><br><span class="line">INFO  Generated: archives/2018/index.html</span><br><span class="line">INFO  Generated: 2018/10/09/hello-world/index.html</span><br><span class="line">INFO  Generated: archives/index.html</span><br><span class="line">INFO  Generated: index.html</span><br><span class="line">INFO  Generated: archives/2018/10/index.html</span><br><span class="line">INFO  5 files generated <span class="keyword">in</span> 87 ms</span><br><span class="line">wendingding:Blog wendingding$ hexo s</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure><p><img src="https://github.com/flowerField/Source/blob/master/Blog/hexo01.png?raw=true"></p><p>简单来说要操作博客中的文章其实只需要操作<code>Blog/source/_posts</code>路径下面md后缀的文件即可,文件的内容决定了博客文章的标题、内容等信息，一个md文件就代表着一篇博客，如果需要发布多篇博客文章那么只需要提供多个md格式的文件，编写这些文件的内容就是在编辑每一篇博客文章的内容。总结一下就是<strong><code>博客的内容均由_posts目录下面的md文件决定</code></strong>，博客的样式和风格等主要由配置和主题来决定，我们稍后细讲。</p><div class="tip"><strong>备注 </strong> md其实是<code>Markdown</code>的简写，<code>Markdown</code>是一种可以使用普通文本编辑器编写的标记语言，通过简单的标记语法，它可以使普通文本内容具有一定的格式。我们可以经过简单的学习后就使用<code>Markdown</code>来编写出漂亮的文档，现在像<a href="https://www.jianshu.com/" target="_blank" rel="noopener">简书</a>、<a href="https://www.cnblogs.com/" target="_blank" rel="noopener">博客园</a>等网站都支持这种特殊的语法标记方式。Windows系统推荐使用<a href="https://typora.io/" target="_blank" rel="noopener">Typora</a>或<a href="https://www.zybuluo.com/cmd/" target="_blank" rel="noopener">Cmd Markdown 作业部落</a>来编写Markdown语法的文档，Mac OSX系统推荐使用<a href="https://maxiang.io/" target="_blank" rel="noopener">马克飞象</a>、<a href="http://25.io/mou/" target="_blank" rel="noopener">Mou</a>等工具。</div><p><span style="border:1px solid #000;padding:5px 20px;"> <strong>创建博客文章</strong><span></span></span></p><p>新建博客文章有两种方式可以创建博客文章，<code>通过hexo命令来创建</code>和<code>自己把写好的md文件存放到source/_posts目录下面</code>，选择使用什么方式可以看个人的喜好决定。</p><p><strong><code>001 通过hexo命令来创建文章</code></strong></p><p>我们可以通过执行<code>$ hexo new [layout] &lt;title&gt;</code>语法的命令来新建文章，[layout]用于指定文章的布局，默认为post,关于布局相关的更多信息可以参考<a href="https://hexo.io/zh-cn/docs/writing.html" target="_blank" rel="noopener">Hexo官网文档</a>的说明，在这里我们来新建一篇名为<strong><code>Base64编码基础</code></strong>的文章。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Blog wendingding$ hexo new Base64编码基础</span><br><span class="line">INFO  Created: ~/Desktop/Blog/<span class="built_in">source</span>/_posts/Base64编码基础.md</span><br><span class="line"></span><br><span class="line">wendingding:Blog wendingding$ cat ~/Desktop/Blog/<span class="built_in">source</span>/_posts/Base64编码基础.md</span><br><span class="line">---</span><br><span class="line">title: Base64编码基础</span><br><span class="line">date: 2018-10-10 12:01:00</span><br><span class="line">tags:</span><br><span class="line">---</span><br></pre></td></tr></table></figure><p>上面的命令行，<code>hexo new Base64编码基础</code>用于在<code>Blog/source/_posts/</code>路径下面根据系统模板来生成一篇名<strong>Base64编码基础</strong>的博客文章，<code>cat ~/Desktop/Blog/source/_posts/Base64编码基础.md</code>命令用于在命令行窗口输出文件的具体内容，里面包含了博客文章的标题(title)、创建日期(date)和标签(tags)等默认生成的内容。当前这个文件并没有其它额外的内容，现在我们尝试使用MarkDown语法来编辑该文件来提供一些内容，然后重新生成博客并发布。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Blog wendingding$ hexo g</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Files loaded <span class="keyword">in</span> 264 ms</span><br><span class="line">INFO  Generated: index.html</span><br><span class="line">......省略</span><br><span class="line">INFO  Generated: css/fonts/fontawesome-webfont.svg</span><br><span class="line">INFO  29 files generated <span class="keyword">in</span> 681 ms</span><br><span class="line">wendingding:Blog wendingding$ hexo s</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop</span><br></pre></td></tr></table></figure><p><img src="https://github.com/flowerField/Source/blob/master/Blog/hexo02.png?raw=true"></p><p><strong><code>002 通过在文件目录的操作直接创建文章</code></strong></p><p>这种方式更直接，我们完全可以直接在<code>Blog/source/_posts/</code>路径下面来手动创建新的md文件，按照模板规定的格式来编写标题、时间和内容，然后执行<code>hexo g</code>和<code>hexo s</code>命令来生成和发布预览。或者，更方便的做法是直接把已有的博客文章复制粘贴到当前目录，然后修改文件名称和内容后执行命令来生成。</p><p><span style="border:1px solid #000;padding:5px 20px;"> <strong>博客主题</strong><span></span></span></p><p>现在我们已经初步把博客系统搭建出来了，并且掌握了hexo生成和预览基本命令的使用，也清楚了如何来创建博客文章、编辑博客文章，接下来简单说明Hexo博客的主题。你应该已经发现了Hexo默认的主题(皮肤)很丑，我想喜欢这个默认主题的人应该真的不多。</p><p>其实Hexo搭建博客非常的灵活，您可以自己给博客来定制主题，我们可以选择从头开始自己来写一套主题(工作量稍微有点大)，也可以把别人写好的你比较喜欢的主题直接拿来使用。您可以<a href="https://hexo.io/themes/" target="_blank" rel="noopener">点击这里</a>找一款自己喜欢的主题，这里我以自己的博客为例来说明如何给博客设置主题，我使用的是gitHub用户<a href="https://github.com/pinggod" target="_blank" rel="noopener">pinggod</a>先生开源的<a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank" rel="noopener">apollo主题</a>。</p><p><strong><code>001 命令行下载主题</code></strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Blog wendingding$ <span class="built_in">pwd</span></span><br><span class="line">/Users/文顶顶/Desktop/Blog</span><br><span class="line"></span><br><span class="line">wendingding:Blog wendingding$ npm install --save hexo-renderer-jade hexo-generator-feed hexo-generator-sitemap hexo-browsersync hexo-generator-archive</span><br><span class="line">....省略</span><br><span class="line">+ hexo-generator-archive@0.1.5</span><br><span class="line">+ hexo-generator-feed@1.2.2</span><br><span class="line">+ hexo-renderer-jade@0.4.1</span><br><span class="line">+ hexo-generator-sitemap@1.2.0</span><br><span class="line">+ hexo-browsersync@0.3.0</span><br><span class="line">added 225 packages and updated 1 package <span class="keyword">in</span> 55.931s</span><br><span class="line"></span><br><span class="line">wendingding:Blog wendingding$ git <span class="built_in">clone</span> https://github.com/pinggod/hexo-theme-apollo.git themes/apollo</span><br><span class="line">Cloning into <span class="string">'themes/apollo'</span>...</span><br><span class="line">remote: Enumerating objects: 894, <span class="keyword">done</span>.</span><br><span class="line">remote: Total 894 (delta 0), reused 0 (delta 0), pack-reused 894</span><br><span class="line">Receiving objects: 100% (894/894), 324.80 KiB | 47.00 KiB/s, <span class="keyword">done</span>.</span><br><span class="line">Resolving deltas: 100% (420/420), <span class="keyword">done</span>.</span><br></pre></td></tr></table></figure></p><p><strong>命令行说明</strong></p><p><span style="color:#195">pwd</span> 表示查看当前路径，主要需要在博客的<code>根目录(Blog)</code>下执行后面的操作。</p><p><span style="color:#195">npm install –save xxx</span> 表示使用包管理工具npm来下载和安装当前主题需要使用到的插件，具体要安装哪些插件需要参考该主题的使用文档(<code>通常是Github仓库中的ReadMe文档</code>)。</p><p><span style="color:#195">git clone xxx</span> 表示使用git命令来把Github上面的远程仓库下载到当前目录中，上面代码执行完毕后apollo主题相关的文件会保存在<code>Blog/themes目录</code>下面。</p><p><strong><code>002 切换博客的主题</code></strong></p><p>选择自己的主题下载完成之后，还需要对博客使用的主题进行配置，配置方式非常简单。我们只需要找到<code>Blog/_config.yml文件</code>并修改第76行的theme 配置项，把<code>theme: landscape</code>修改为<code>theme:apollo</code>，然后重新执行<code>hexo g &amp;&amp; hexo s</code>命令即可。</p><p><strong><code>003 对主题进行配置</code></strong></p><p>使用了新主题之后，您可能还需要对主题进行配置，比如配置导航菜单(menu)、显示的log图片等信息。<br>在<code>Blog/themes/_config.yml文件</code>中可以对整个主题都进行配置。</p><p>这里先列出原本的配置信息。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">    Blog: /</span><br><span class="line">    Archive: /archives/</span><br><span class="line">    Weibo: http://weibo.com/sunchongsheng</span><br><span class="line">    GitHub: https://github.com/pinggod</span><br><span class="line">    Rss: /atom.xml</span><br><span class="line"></span><br><span class="line">favicon: /favicon.png</span><br><span class="line">logo: /favicon.png</span><br><span class="line"></span><br><span class="line"># Comment</span><br><span class="line"># e.g disqus: seansun</span><br><span class="line">disqus:</span><br><span class="line">duoshuo:</span><br><span class="line"></span><br><span class="line"># Analytics</span><br><span class="line"># google-analytics:</span><br><span class="line"># ga: UA-xxxxxxxx-x</span><br><span class="line"></span><br><span class="line"># Copyright Infomation</span><br><span class="line">startyear: 2015</span><br></pre></td></tr></table></figure></p><p>然后在给出我自己博客中该主题的配置信息(图片素材需要先保存到<code>Blog/themes/source目录下</code>)。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">    文顶顶的Blog: /</span><br><span class="line">    标签: /tags/</span><br><span class="line">    博客园: https://www.cnblogs.com/wendingding/</span><br><span class="line">    微博: http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place</span><br><span class="line">    花田半亩: http://blog.sina.com.cn/u/1910914290</span><br><span class="line"></span><br><span class="line">favicon: /logo.jpeg</span><br><span class="line">logo: /鲸鱼.png</span><br></pre></td></tr></table></figure></p><p>这里给出主题配置完之后的重新预览页面效果图。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/hexo03.png?raw=true"></p><p><span style="border:1px solid #000;padding:5px 20px;"> <strong>把博客发布到Github  page</strong><span></span></span></p><p>现在我们使用Hexo搭建的个人博客还只能在您自己的电脑中访问，接下来我们尝试把博客发布到Github page上，这样任何的客户端就可以通过博客地址来访问了。这里假设您已经注册了Github的账号并且已经对Github的使用有了基本的了解，下面先列出操作的主要流程。</p><blockquote><p>❏  在gitHub上面创建项目托管仓库并进行配置。<br>❏  配置自己电脑上面的git账户并使用SSH生成密钥对设置gitHub。<br>❏  配置本地Hexo博客项目_config.yml文件中的deploy项，设置其路径为gitHub上面对应仓库的路径并发布。</p></blockquote><p><strong><code>001 创建项目托管仓库并进行配置</code></strong></p><p>打开<a href="https://github.com" target="_blank" rel="noopener">gitHub官网</a>用自己注册的账号登录，成功之后<code>点击 + 选择new repository</code>创建新的代码仓库。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/hexo04.png?raw=true"></p><p><strong>设置仓库</strong> 这里需要特别注意在设置仓库名称的时候一定要是<code>用户名.github.io</code>形式的，这里因为我github账户名为<code>HanGangAndHanMeimei</code>，所以我设置的仓库名称为<code>HanGangAndHanMeimei.github.io</code>。设置然仓库勾选public表明这是一个开源的项目，勾选初始化readeMe文件，然后点击create repository即可。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/hexo05.png?raw=true"></p><p><strong><code>002 配置git账户并生成SSH密钥对</code></strong></p><p>因为我们需要通过git和命令行来操作gitHub上面的仓库，所以还需要在命令行工具中对git的账户进行配置并和gitHub账户进行关联才能拥有代码上传和发布等权限。</p><p>先设置git的用户名和邮箱，<code>--global</code>表示全局设置。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yangy@LAPTOP-A18S3A9G MINGW64 ~/Desktop/Blog</span><br><span class="line">$ git config --global user.name <span class="string">"wendingding"</span></span><br><span class="line"></span><br><span class="line">yangy@LAPTOP-A18S3A9G MINGW64 ~/Desktop/Blog</span><br><span class="line">$ git config --global user.email <span class="string">"1915158156@qq.com"</span></span><br><span class="line"></span><br><span class="line">//注意：我这里为了演示方便切换了Windows操作系统的电脑。</span><br></pre></td></tr></table></figure></p><p>再通过命令行工具来生成SSH公钥和私钥密钥对。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">yangy@LAPTOP-A18S3A9G MINGW64 ~/Desktop/Blog</span><br><span class="line">$ ssh-keygen -t rsa -b 4096 -C <span class="string">"1915158156@qq.com"</span></span><br><span class="line"></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/c/Users/yangy/.ssh/id_rsa):</span><br><span class="line">Created directory <span class="string">'/c/Users/yangy/.ssh'</span>.</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /c/Users/yangy/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /c/Users/yangy/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:0nz73Hu7ZLF7+J/maWKCC6j/ekaSB6zPwJXFASzZZls 1915158156@qq.com</span><br><span class="line">The key<span class="string">'s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 4096]----+</span></span><br><span class="line"><span class="string">|    +.o..        |</span></span><br><span class="line"><span class="string">|   o = E         |</span></span><br><span class="line"><span class="string">|    = =          |</span></span><br><span class="line"><span class="string">|     * o         |</span></span><br><span class="line"><span class="string">|  . o + S .    . |</span></span><br><span class="line"><span class="string">|   + o.+ . .    o|</span></span><br><span class="line"><span class="string">|    +.+.  o    = |</span></span><br><span class="line"><span class="string">|    .o o.. + ++o*|</span></span><br><span class="line"><span class="string">|   ..o=. .. = B@B|</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">yangy@LAPTOP-A18S3A9G MINGW64 ~/Desktop/Blog</span></span><br><span class="line"><span class="string">$ cat /c/Users/yangy/.ssh/id_rsa.pub</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCxX3PA2nBsHkoAKhaBNqfcajomYnc1HMUP9Gqfebtaf2fjV+PcJTJvCJ8mV6xBiB69Fi0V0VrdX2vmkfv4sUI++6htLPLRHqUE2+9J3pYBD2NQpe5+GBfL34YxMWD8y95jCXJadcPWGyl7s2EESqMUYe8QPB5qbrhI4U2/nonoxwYRFIxbAkIN1Fy6t9A+4tRFdPinQBom2/1lBdyl+1qxPlV2kZcmNH/ZHiwIn+tT1WsIBMcaXNGBQEUKnDr0GtZCPq5tfoYNrNOmUpAuEB3CUeShsXH7lU5sedMnkEpenniPJmLS344aj8X2pbjsSd5mLcoidzqbZ2+i5j+Ds5Le3iLCSbBMkEUA8UWcp5IF0bKjsXge3lD0IRUQPJqNphQ6dOvyT4NGq61zeaDCRFUIYFbQkE07PDtL5emexJMofIDJI56tC+q2/jZmHb0rZRpur7Y73SB86iaGc5VA8s8/lisjhKgqCgjuwVBtgtb9YQjtHYB7U6jS55IQzaAE74uP3Nx7rMi88jGqRdTgc5fWDVX19h9TqnKqx6V30U6zb98g+17rza2e8zWH+pKLQkzWPg/m+rYawvUa6A9hJN1qmhmX/FtxS2yAPHJuXFWwtYeu2zhx0n5ulg7Pi6iuJOogw7YN616IIIe6BusBgqNCbwmnGTH06l+Q+zdUXjvVhw== 1915158156@qq.com</span></span><br></pre></td></tr></table></figure></p><p>上面的命令行中<code>$ ssh-keygen -t rsa -b 4096 -C &quot;1915158156@qq.com&quot;</code>命令行用于生成密钥对，自己在操作的时候请把最后的邮箱换成您自己的，另外$本身不是命令行的一部分。当这行命令执行完毕之后，连续键入三个回车(表示默认)，将会生成一个使用RSA技术加密的密钥对，分别为<code>id_rsa文件</code>和<code>id_rsa.pub文件</code>，前者是私钥后者是公钥。我们需要打开公钥文件(<span style="color:#195">可以找到文件直接打开，也可以使用cat命令打开</span>)并拷贝其内容保存到Github中，即私钥留给自己公钥提供给Github网站，这样我们操作博客的时候才能完成身份的验证。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/hexo06.png?raw=true"></p><p><span style="border:1px solid #000;padding:0 5px;">点击自己的头像</span> →  <span style="border:1px solid #000;padding:0 5px;">Setting</span> → <span style="border:1px solid #000;padding:0 5px;">SSH and GPG Keys </span> → new SSH key → 设置标题(名称随意)然后把公钥文件中的内容粘贴到key这个输入框中 → add SSH key即可。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/hexo07.png?raw=true"></p><p>密钥信息配置完成之后，您可以通过<code>ssh -T git@github.com</code>命令来测试配置是否成功，当提示<code>Are you sure you want to continue connecting</code>的时候输入yes,如果能够看到<code>Hi HanGangAndHanMeimei! You&#39;ve successfully authenticated</code>这样一条消息就表示已经配置成功。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">yangy@LAPTOP-A18S3A9G MINGW64 ~/Desktop</span><br><span class="line">$ ssh -T git@github.com</span><br><span class="line"></span><br><span class="line">The authenticity of host <span class="string">'github.com (192.30.253.113)'</span> can<span class="string">'t be established.</span></span><br><span class="line"><span class="string">RSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.</span></span><br><span class="line"><span class="string">Are you sure you want to continue connecting (yes/no)? yes</span></span><br><span class="line"><span class="string">Warning: Permanently added '</span>github.com,192.30.253.113<span class="string">' (RSA) to the list of known hosts.</span></span><br><span class="line"><span class="string">Hi HanGangAndHanMeimei! You'</span>ve successfully authenticated, but GitHub does not provide shell access.</span><br></pre></td></tr></table></figure><p><strong><code>003 配置_config.yml文件的deploy项</code></strong></p><p>在根目录(这里为<code>Blog</code>)中找到全局配置文件_config.yml，配置其中的deploy项。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  repository: git@github.com:HanGangAndHanMeimei/HanGangAndHanMeimei.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure></p><p>在上面的配置项中，repository对应的值，可以直接在github上面找到对应托管仓库，点击<strong>Clone or Download</strong>弹出框中复制获取。另外需要注意冒号之后应该留有一个空格的距离，否则无法识别。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/hexo09.png?raw=true"></p><p><strong><code>004 把自己的博客发布到Github</code></strong></p><p>当前面的操作执行完毕之后，您可以通过<code>hexo d</code>命令来把自己的博客发布到Github。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">yangy@LAPTOP-A18S3A9G MINGW64 ~/Desktop</span><br><span class="line">$ <span class="built_in">cd</span> Blog/</span><br><span class="line"></span><br><span class="line">yangy@LAPTOP-A18S3A9G MINGW64 ~/Desktop/Blog</span><br><span class="line">$ hexo g</span><br><span class="line"></span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Files loaded <span class="keyword">in</span> 582 ms</span><br><span class="line">INFO  Generated: 2018/10/10/Base64编码基础/index.html</span><br><span class="line">INFO  Generated: 2018/10/09/hello-world/index.html</span><br><span class="line">INFO  Generated: index.html</span><br><span class="line">INFO  3 files generated <span class="keyword">in</span> 43 ms</span><br><span class="line"></span><br><span class="line">yangy@LAPTOP-A18S3A9G MINGW64 ~/Desktop/Blog</span><br><span class="line">$ hexo d</span><br><span class="line">ERROR Deployer not found: git</span><br><span class="line"></span><br><span class="line">yangy@LAPTOP-A18S3A9G MINGW64 ~/Desktop/Blog</span><br><span class="line">$ npm install --save hexo-deployer-git</span><br><span class="line"></span><br><span class="line">+ hexo-deployer-git@0.3.1</span><br><span class="line">added 31 packages <span class="keyword">in</span> 20.396s</span><br><span class="line"></span><br><span class="line">yangy@LAPTOP-A18S3A9G MINGW64 ~/Desktop/Blog</span><br><span class="line">$ hexo d</span><br><span class="line"></span><br><span class="line">INFO  Deploying: git</span><br><span class="line">INFO  Setting up Git deployment...</span><br><span class="line"> ....省略</span><br><span class="line">[master dc63854] Site updated: 2018-10-10 17:45:37</span><br><span class="line"> 38 files changed, 5012 insertions(+)</span><br><span class="line"> create mode 100644 2018/10/09/hello-world/index.html</span><br><span class="line"> ....省略</span><br><span class="line"> create mode 100644 sitemap.xml</span><br><span class="line"> create mode 100644 <span class="string">"\351\262\270\351\261\274.png"</span></span><br><span class="line">Branch <span class="string">'master'</span> <span class="built_in">set</span> up to track remote branch <span class="string">'master'</span> from <span class="string">'git@github.com:HanGangAndHanMeimei/HanGangAndHanMeimei.github.io.git'</span>.</span><br><span class="line">To github.com:HanGangAndHanMeimei/HanGangAndHanMeimei.github.io.git</span><br><span class="line"> + 7eb4c77...dc63854 HEAD -&gt; master (forced update)</span><br><span class="line">INFO  Deploy <span class="keyword">done</span>: git</span><br></pre></td></tr></table></figure><div class="tip"><strong>注意</strong>  如果在执行<code>hexo d</code>命令的时候发现报<code>ERROR Deployer not found: git</code>错误，那是因为<code>hexo-deployer-git</code>没有安装的原因，需要执行<code>npm install --save hexo-deployer-git</code>先安装，完成之后再执行<code>hexo d</code>部署。</div><p>发布完成后就可以在任何客户端的浏览器上通过用户名.github.io来访问您的博客了(我这里的访问地址为<a href="http://HanGangAndHanMeimei.github.io" target="_blank" rel="noopener">http://HanGangAndHanMeimei.github.io</a>，可以点击查看效果)。</p><pre><code>hexo常用命令备注hexo generate 该命令用于生成博客，简写为hexo ghexo server   该命令用于启动服务预览，简写为hexo shexo deploy   该命令用于把博客部署到线上，简写为hexo dhexo clean    该命令用于清除缓存 网页正常情况下可以忽略此条命令</code></pre><p>其实到现在为止，您的个人博客就可以正常使用了。如果要发布新的博客文章那么就只需要在source/_posts目录下面创建md文件编写内容然后执行<code>hexo g</code>生成然后执行<code>hexo d</code>部署即可。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/hexo08.png?raw=true"></p><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;1-0-说明&quot;&gt;&lt;a href=&quot;#1-0-说明&quot; class=&quot;headerlink&quot; title=&quot;1.0 说明&quot;&gt;&lt;/a&gt;1.0 说明&lt;/h3&gt;&lt;p&gt;其实，搭建个人博客的技术方案有很多。&lt;/p&gt;
&lt;p&gt;其实，你能找到的使用&lt;code&gt;Hexo + Githu
      
    
    </summary>
    
    
      <category term="网络编程系列" scheme="https://weibo.com/u/3800117445/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%B3%BB%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序基础[10]-UI组件库的使用和封装</title>
    <link href="https://weibo.com/u/3800117445/2018/10/02/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%8F%E5%88%97%5B10%5D-UI%E7%BB%84%E4%BB%B6%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8%E5%92%8C%E5%B0%81%E8%A3%85/"/>
    <id>https://weibo.com/u/3800117445/2018/10/02/微信小程序序列[10]-UI组件库的使用和封装/</id>
    <published>2018-10-01T16:00:01.000Z</published>
    <updated>2018-11-11T13:30:01.371Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本文介绍微信小程序开发中常用的第三方UI组件库的基本使用流程和如何自定义组件。</p></blockquote><h3 id="1-0-第三方UI组件库的基本使用流程"><a href="#1-0-第三方UI组件库的基本使用流程" class="headerlink" title="1.0 第三方UI组件库的基本使用流程"></a>1.0 第三方UI组件库的基本使用流程</h3><p>在<a href="http://wendingding.com/2018/09/24/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%B3%BB%E5%88%97[05]-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B601" target="_blank" rel="noopener">小程序框架基础组件</a>这篇文章的末尾简单列出了小程序开发中常用的一些第三方UI组件库，包括iview和Weui等,这里讲简单说明这些第三方UI组件库的基本使用流程。</p><p>通常，在使用第三方组件库之前首先需要通过<code>代码的托管仓库</code>和<code>组件库文档</code>来了解该组件库都提供哪些自定义的组件这是组件和当前项目是否匹配等信息(<code>很多的第三方组件库都提供了专门的演示小程序可以安装和体验</code>)，确定之后就只需在项目中应用了。</p><p><strong>第三方组件库的基本使用流程</strong></p><blockquote><p>❏ 在github下载完整的仓库代码。<br>❏ 把仓库代码中存放自定义组件的文件夹拷贝到项目中(<code>dist目录</code>)。<br>❏ 在项目中需要使用到的页面的json文件中对第三方组件进行配置。<br>❏ 在项目中需要使用到的页面的wxml文件中直接使用，同原生组件一致。<br>❏ 参考组件库文档来对自定义的组件传递参数(通常是以属性赋值的方式进行)。</p></blockquote><p><strong><code>ex:使用iview-weapp组件库中的i-cell组件</code></strong></p><p><strong><code>001</code></strong> 在github中找到组件库的<a href="https://github.com/TalkingData/iview-weapp" target="_blank" rel="noopener">仓库托管地址</a>并点击clone OR Download下载。</p><p><strong><code>002</code></strong> 下载后将仓库中的dist目录拷贝到自己的项目中，这里可以在根目录下新建components文件夹专门用来存放需要用到的所有组件，因为项目中可能用到多个UI组件库，所以把dist改名为iview目录。</p><p><strong><code>003</code></strong> 因为在项目中的<strong>mine/index.wxml</strong>文件中需要使用到iview组件库中的<span style="color:#f05">i-cell</span>、<span style="color:#f05">i-panel</span>以及<span style="color:#f05">i-cell-group</span>组件所以需要先在<strong>mine/index.json</strong>文件中进行配置，配置项如下。<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"usingComponents"</span>: &#123;</span><br><span class="line">    <span class="attr">"i-cell"</span>: <span class="string">"../../components/ivew/cell/index"</span>,</span><br><span class="line">    <span class="attr">"i-panel"</span>:<span class="string">"../../components/ivew/panel/index"</span>,</span><br><span class="line">    <span class="attr">"i-cell-group"</span>:<span class="string">"../../components/ivew/cell-group/index"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong><code>004</code></strong> 在项目中的<strong>mine/index.wxml</strong>文件中直接使用这些组件来实现特定效果。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">i-panel</span> <span class="attr">title</span>=<span class="string">" "</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">i-cell-group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i-cell</span>  <span class="attr">title</span>=<span class="string">"心意卡"</span> <span class="attr">is-link</span> &gt;</span><span class="tag">&lt;/<span class="name">i-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i-cell</span>  <span class="attr">title</span>=<span class="string">"优惠券"</span> <span class="attr">is-link</span> &gt;</span><span class="tag">&lt;/<span class="name">i-cell</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">i-cell-group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">i-panel</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">i-panel</span> <span class="attr">title</span>=<span class="string">" "</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">i-cell-group</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">i-cell</span>  <span class="attr">title</span>=<span class="string">"我的地址"</span> <span class="attr">is-link</span> <span class="attr">url</span>=<span class="string">"/pages/address/index"</span>&gt;</span><span class="tag">&lt;/<span class="name">i-cell</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">i-cell</span>  <span class="attr">title</span>=<span class="string">"我的尺寸"</span> <span class="attr">is-link</span> &gt;</span><span class="tag">&lt;/<span class="name">i-cell</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">i-cell-group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">i-panel</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>如果需要对UI组件的样式进行调整那么可以选择直接到components/iview中对既定的样式进行修改，更好的方法是<span style="color:#195">给用到的组件添加新的class,并在对应的wxss文件中进行设置</span>。</p><h3 id="2-0-自定义组件的封装"><a href="#2-0-自定义组件的封装" class="headerlink" title="2.0 自定义组件的封装"></a>2.0 自定义组件的封装</h3><p>在小程序的开发中如果某些代码需要到多个地方用到(往往是视图结构相同而具体填充的数据不同)，那么可以考虑把这些代码抽取成模板或者是封装成自定义的组件，在<a href="http://wendingding.com/2018/09/27/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%B3%BB%E5%88%97[08]-%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E5%92%8C%E5%BC%95%E5%85%A5" target="_blank" rel="noopener">模板的基本使用和引入</a>这篇文章中已经介绍了模板的基本用法，这里重点说明把代码封装成自定义组件的基本流程。</p><p><strong>自定义组件和使用的基本流程</strong></p><blockquote><p>❏ 在微信提供的官方开发工具中代码目录中新建<code>Component文件</code>。<br>❏ 在自动生成的四个文件中编写组件内容、组件样式、组件逻辑控制相关的代码。<br>❏ 在项目中需要使用到自定义组件的页面的.json文件中进行配置，设置组件的名称和路径。<br>❏ 在项目中需要使用到自定义组件的页面的.wxml文件中直接像系统组件那样使用和传参即可。</p></blockquote><p><strong><code>ex:自定义组件i-address的封装和使用</code></strong></p><p>这里先给出自定义组件使用的效果图。</p><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx21.png?raw=true"></p><p><strong><code>001</code></strong> 在项目的根目录中创建components文件夹，该目录用于存放项目中用到的所有组件。<br><strong><code>002</code></strong> 在components目录下创建addressComponent文件夹，新建<code>Component文件</code>命名为addressview，这样会在该目录下面生成四个文件，后缀分别是.wxml(控制内容)、.wxss(控制样式)、.json(控制配置，表明自己是自定义组件)和.js(控制初始化数据、属性列表和添加在组件身上的方法)。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ tree</span><br><span class="line">.</span><br><span class="line">└── components</span><br><span class="line">    └── addressComponent</span><br><span class="line">        ├── addressview.js</span><br><span class="line">        ├── addressview.json</span><br><span class="line">        ├── addressview.wxml</span><br><span class="line">        └── addressview.wxss</span><br></pre></td></tr></table></figure></p><p><strong><code>003</code></strong> 编写addressview.wxml文件，控制组件的结构。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'address'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'address-top'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'address-top-name'</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">'delClick'</span> <span class="attr">class</span>=<span class="string">'address-top-del'</span> <span class="attr">plain</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">'address-top-edit'</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'address-bottom'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'address-bottom-phone'</span>&gt;</span>电话号码：&#123;&#123; phoneText &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'address-bottom-detail'</span>&gt;</span>联系地址：&#123;&#123; detailText &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><strong><code>004</code></strong> 编写addressview.wxss文件，控制组件的样式。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.address</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">240</span>rpx;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.address-top</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">100</span>rpx;</span><br><span class="line">  <span class="attribute">border-bottom</span>: <span class="number">1</span>rpx solid <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.address-bottom</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">140</span>rpx;</span><br><span class="line">  <span class="comment">/* background: yellowgreen */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.address-top-name</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">30</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.address-top-del</span>,<span class="selector-class">.address-top-edit</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">130</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">60</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">60</span>rpx;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20</span>rpx;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.address-top-edit</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.address-top-del</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">180</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.address-bottom-phone</span>,<span class="selector-class">.address-bottom-detail</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#666</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">30</span>rpx;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">70</span>rpx;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">70</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong><code>005</code></strong> 编写addressview.js文件的代码，控制组件的属性、初始化数据以及方法。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的属性列表</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  properties: &#123;</span><br><span class="line">    name:&#123;</span><br><span class="line">      type:<span class="built_in">String</span>,</span><br><span class="line">      value:<span class="string">"默认的收件人"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    phoneText: &#123;</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      value: <span class="string">"88888888888888"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    detailText: &#123;</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      value: <span class="string">"北京市天安门城楼"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  data: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 组件的方法列表</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    delClick:<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">      <span class="comment">//....</span></span><br><span class="line">      <span class="comment">//删除按钮的事件处理函数</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><strong><code>006</code></strong> 在项目的address页面中需要用到这个自定义组件，那么就先在对应的json文件中进行配置，主要是设置自定义组件的名称和对应的路径，这里给出address/index.json文件内容示例。<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"usingComponents"</span>: &#123;</span><br><span class="line">    <span class="attr">"i-address"</span>: <span class="string">"../../components/addressComponents/addressview"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong><code>007</code></strong> 在页面对应的wxml文件中直接使用自定义组件，这里给出address/index.wxml文件内容示例。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">i-address</span> <span class="attr">wx:key</span>=<span class="string">'index'</span> <span class="attr">wx:for</span>=<span class="string">'&#123;&#123; arrayData &#125;&#125;'</span><span class="attr">name</span>=<span class="string">'&#123;&#123; item.name &#125;&#125;'</span> <span class="attr">phoneText</span>=<span class="string">'&#123;&#123; item.phoneText &#125;&#125;'</span> <span class="attr">detailText</span>=<span class="string">'&#123;&#123; item.detailText &#125;&#125;'</span>&gt;</span><span class="tag">&lt;/<span class="name">i-address</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><strong><code>008</code></strong> 自定义组件需要接收数据，通过编写对应的js文件设置，这里给出address/index.js文件内容示例。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/address/index.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    arrayData:[</span><br><span class="line">                    &#123;</span><br><span class="line">                      name: <span class="string">"小猪猪猪"</span>,</span><br><span class="line">                      phoneText: <span class="string">"123445455846"</span>,</span><br><span class="line">                      detailText: <span class="string">"广州市天河区体育中心南路水电费"</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                      name: <span class="string">"熊大和赵琳"</span>,</span><br><span class="line">                      phoneText: <span class="string">"154546556465466"</span>,</span><br><span class="line">                      detailText: <span class="string">"广州市天河区体育中心南路水电费"</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                      name: <span class="string">"花仙子"</span>,</span><br><span class="line">                      phoneText: <span class="string">"154546556465466"</span>,</span><br><span class="line">                      detailText: <span class="string">"广州市天河区体育中心西路"</span>,</span><br><span class="line">                    &#125;</span><br><span class="line">             ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本文介绍微信小程序开发中常用的第三方UI组件库的基本使用流程和如何自定义组件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;1-0-第三方UI组件库的基本使用流程&quot;&gt;&lt;a href=&quot;#1-0-第三方UI组件库的基本使用流程&quot; class=
      
    
    </summary>
    
    
      <category term="微信小程序序列" scheme="https://weibo.com/u/3800117445/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%8F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序基础[09]-小程序中的基础组件(二)</title>
    <link href="https://weibo.com/u/3800117445/2018/09/27/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%8F%E5%88%97%5B09%5D-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%9A%84%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6(%E4%BA%8C)/"/>
    <id>https://weibo.com/u/3800117445/2018/09/27/微信小程序序列[09]-小程序中的基础组件(二)/</id>
    <published>2018-09-26T16:00:09.000Z</published>
    <updated>2018-11-11T13:30:01.359Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本文介绍小程序中的基础组件，主要包括button、input等组件的基本使用和代码示例。</p></blockquote><h4 id="1-0-button组件"><a href="#1-0-button组件" class="headerlink" title="1.0 button组件"></a>1.0 button组件</h4><p>小程序中的<a href="https://developers.weixin.qq.com/miniprogram/dev/component/button.html" target="_blank" rel="noopener">button组件</a>就是按钮。</p><p><strong>这里列出button组件的主要属性</strong><br><span class="propWX-green bg-red">open-type</span>    微信开放能力。<br><span class="propWX-green bg-red">size</span>    按钮的大小，默认值为default，还能取值mini。<br><span class="propWX-green ">plain</span>     设置按钮是否镂空，布尔类型的值，默认为false。<br><span class="propWX-green bg-red">disabled</span>    是否禁用按钮，布尔类型的值，默认为false。<br><span class="propWX-green">loading</span>    名称的前面是否设置加载icon,默认为false。<br><span class="propWX-green bg-red">form-type</span>    用来触发form表单中的submit和reset事件。<br><span class="propWX-green">hover-class</span>    按钮被按下的样式类，none表示没有任何效果。<br><span class="propWX-green">hover-start-time</span>    按钮被按下多久出现点击态，默认为20毫秒。<br><span class="propWX-green">hover-stay-time</span>    手指松开按钮点击态的保留时间，默认为70毫秒。<br><span class="propWX-green bg-red">type</span>  按钮的样式类型，默认值为default，还能取值primary和warn。<br><span class="propWX-green">session-from</span>    会话来源，open-type=<code>&quot;contact&quot;</code>时生效。<br><span class="propWX-green">bindcontact</span>    客服消息回调，open-type=<code>&quot;contact&quot;</code>时生效。<br><span class="propWX-green">binderror</span>    使用开放能力时失败的回调，open-type=<code>&quot;launchApp&quot;</code>时生效。<br><span class="propWX-green">bindopensetting</span>    打开授权设置页面的回调，open-type=<code>&quot;openSetting&quot;</code>时生效。<br><span class="propWX-green">bindgetphonenumber</span>    获取用户手机号码回调，open-type=<code>&quot;getPhoneNumber&quot;</code>时生效。<br><span class="propWX-green">bindgetuserinfo</span>    点击时用户信息在detail中返回，open-type=<code>&quot;getUserInfo&quot;</code>时生效。<br><span class="propWX-green">app-parameter</span>    打开app时向app传递的参数，open-type=<code>&quot;launchApp&quot;</code>时生效。<br><span class="propWX-green">lang</span>    指定返回的用户信息的语言，open-type=<code>&quot;getUserInfo&quot;</code>时生效。<br><span class="propWX-green">send-message-title</span>    会话内消息卡片标题，open-type=<code>&quot;contact&quot;</code>时生效。<br><span class="propWX-green">send-message-img</span>    会话内消息卡片图片，open-type=<code>&quot;contact&quot;</code>时生效。<br><span class="propWX-green">show-message-card</span>    显示会话内消息卡片默认为false，open-type=<code>&quot;contact&quot;</code>时生效。<br><span class="propWX-green">send-message-path</span>    会话内消息卡片点击跳转小程序路径，open-type=<code>&quot;contact&quot;</code>时生效。</p><p><strong>open-type微信开放能力属性取值说明</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cotact        打开客服会话。</span><br><span class="line">openSetting打开授权设置页。</span><br><span class="line">share        触发用户转发，使用前建议先阅读使用指引。</span><br><span class="line">feedback打开“意见反馈”页面，用户可提交反馈内容并上传日志。</span><br><span class="line">getUserInfo获取用户信息，可以从bindgetuserinfo回调中获取到用户信息。</span><br><span class="line">launchApp打开APP，可以通过app-parameter属性设定向APP传的参数具体说明。</span><br><span class="line">getPhoneNumber获取用户手机号，可以从bindgetphonenumber回调中获取到用户信息，具体说明。</span><br></pre></td></tr></table></figure></p><p>我们重点关注button组件非开放能力相关的属性，关于开放能力的相关知识点可以查询官方文档，这里给出button组件使用的代码示例。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">//wxml文件中的内容</span><br><span class="line"><span class="comment">&lt;!-- 1.0 演示按钮的基本使用 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 001 type属性对比  取值为：defalut(默认白色) warn(红色) primary(绿色) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">'defalut'</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">'warn'</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">'primary'</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 002 size属性：设置按钮的大小 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">size</span>=<span class="string">'mini'</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 003 plain属性：设置按钮是否镂空显示 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">plain</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 004 disabled属性：设置禁用按钮 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">disabled</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 005 loading属性：文字前面是否显示icon，布尔类型的值，默认不显示 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">loading</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 006 form-type属性：设置表单中的submit和reset --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">bindsubmit</span>=<span class="string">'submitClick'</span> <span class="attr">bindreset</span>=<span class="string">'resetClick'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'text'</span> <span class="attr">placeholder</span>=<span class="string">'请输入用户名'</span> <span class="attr">name</span>=<span class="string">'usrname'</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'text'</span><span class="attr">placeholder</span>=<span class="string">'请输入密码'</span> <span class="attr">name</span>=<span class="string">'password'</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">form-type</span>=<span class="string">'submit'</span>&gt;</span>提交表单的数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">form-type</span>=<span class="string">'reset'</span>&gt;</span>重置表单的数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 007 hover-class属性：设置按钮按下去的样式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">hover-class</span>=<span class="string">'btn-hover'</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 008 部分开放能力属性测试 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">open-type</span>=<span class="string">'contact'</span> <span class="attr">bindcontact</span>=<span class="string">'testClick'</span>&gt;</span>开放能力打开客服会话<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">open-type</span>=<span class="string">'getPhoneNumber'</span></span></span><br><span class="line"><span class="tag"><span class="attr">bindgetphonenumber</span>=<span class="string">"getPhoneNumberClick"</span>&gt;</span></span><br><span class="line">开放能力获取用户的手机号码</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//js文件中的内容</span><br><span class="line">Page(&#123;</span><br><span class="line">  submitClick:function(e)&#123;</span><br><span class="line">    console.log("点击了表单的提交按钮",e);</span><br><span class="line">  &#125;,</span><br><span class="line">  resetClick: function (e) &#123;</span><br><span class="line">    console.log("点击了表单的重置按钮",e);</span><br><span class="line">  &#125;,</span><br><span class="line">  testClick:function(e)&#123;</span><br><span class="line">      console.log("打开客服会话",e);</span><br><span class="line">    &#125;,</span><br><span class="line">    getPhoneNumberClick:function()&#123;</span><br><span class="line">      console.log("获取用户的电话号码",e);</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;);</span><br><span class="line"></span><br><span class="line">//wxss文件中的内容</span><br><span class="line">.btn-hover</span><br><span class="line">&#123;</span><br><span class="line">  background: #110e1e;</span><br><span class="line">  color: #fff;</span><br><span class="line">  font-size: 20rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="2-0-input组件"><a href="#2-0-input组件" class="headerlink" title="2.0 input组件"></a>2.0 input组件</h4><p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/input.html" target="_blank" rel="noopener">input组件</a>就是输入框，主要用来处理用户的输入和数据修改等操作。</p><p><strong>这里列出input组件的主要属性</strong></p><p><span class="propWX-green bg-red">type</span> 输入框的类型。<br><span class="propWX-green ">disabled</span>      输入框是否禁用。<br><span class="propWX-green bg-red">value</span>    输入框的初始内容。<br><span class="propWX-green ">password</span>     输入框是密码类型的。<br><span class="propWX-green ">placeholder-style    </span>     指定placeholder的样式。<br><span class="propWX-green ">placeholder-class</span>     指定placeholder的样式类。<br><span class="propWX-green bg-red">placeholder</span>     输入框为空的时候显示的占位字符。<br><span class="propWX-green ">maxlength</span>     输入框的最大输入长度，设置为-1表示没有限制默认为140。<br><span class="propWX-green bg-red">confirm-type</span>     弹出键盘的右下角的文字，默认为done，type为text时生效。<br><span class="propWX-green ">confirm-hold</span>     点击键盘右下角按钮时是否保持键盘不收起。<br><span class="propWX-green ">adjust-position</span>     键盘弹起时，是否自动上推页面,默认值为true。<br><span class="propWX-green ">focus</span>     获取焦点。<br><span class="propWX-green ">cursor</span>     指定focus时的光标位置。<br><span class="propWX-green ">selection-start</span>     光标起始位置，自动聚集时有效，需与selection-end搭配使用。<br><span class="propWX-green ">selection-end</span>     光标结束位置，自动聚集时有效，需与selection-start搭配使用。<br><span class="propWX-green bg-red">bindfocus</span>     输入框聚焦时触发。<br><span class="propWX-green ">bindblur</span>     输入框失去焦点时触发。<br><span class="propWX-green bg-red">bindconfirm</span>     点击完成按钮时触发。<br><span class="propWX-green ">bindinput</span>     键盘输入时触发，处理函数能直接return替换输入框的内容。</p><p><strong>特定属性的取值情况说明</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">type属性的取值可以是下面的四种情况，分别对应弹出不同类型的键盘。</span><br><span class="line">text文本输入键盘</span><br><span class="line">number数字输入键盘</span><br><span class="line">idcard身份证输入键盘</span><br><span class="line">digit带小数点的数字键盘</span><br><span class="line"></span><br><span class="line">confirm-type属性的有效值有下面五种，其最终表现与手机输入法本身的实现有关。</span><br><span class="line">send右下角按钮为“发送”</span><br><span class="line">search右下角按钮为“搜索”</span><br><span class="line">next右下角按钮为“下一个”</span><br><span class="line">go右下角按钮为“前往”</span><br><span class="line">done右下角按钮为“完成”</span><br></pre></td></tr></table></figure></p><p><strong>这里给出input标签使用的示例代码</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">//wxml文件内容</span><br><span class="line">&lt;!-- 1.0 测试type属性，有效值为text  number idcard digit --&gt;</span><br><span class="line">&lt;input type=&apos;text&apos; placeholder=&apos;我是文本输入框&apos;&gt;&lt;/input&gt;</span><br><span class="line">&lt;input type=&apos;number&apos; placeholder=&apos;我是弹出数字键盘&apos;&gt;&lt;/input&gt;</span><br><span class="line">&lt;input type=&apos;idcard&apos; placeholder=&apos;我弹出身份证键盘&apos;&gt;&lt;/input&gt;</span><br><span class="line">&lt;input type=&apos;digit&apos; placeholder=&apos;我弹出小数键盘&apos;&gt;&lt;/input&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 2.0 测试confirm-type属性：有效值为send search next go done --&gt;</span><br><span class="line">&lt;input confirm-type=&apos;send&apos; placeholder=&apos;键盘右下角的文字为send-发送&apos;&gt;&lt;/input&gt;</span><br><span class="line">&lt;input confirm-type=&apos;search&apos; placeholder=&apos;键盘右下角的文字为search-搜索&apos;&gt;&lt;/input&gt;</span><br><span class="line">&lt;input confirm-type=&apos;next&apos; placeholder=&apos;键盘右下角的文字为next-下一项&apos;&gt;&lt;/input&gt;</span><br><span class="line">&lt;input confirm-type=&apos;go&apos; placeholder=&apos;键盘右下角的文字为go-前往&apos;&gt;&lt;/input&gt;</span><br><span class="line">&lt;input confirm-type=&apos;done&apos; placeholder=&apos;键盘右下角的文字为done-完成&apos;&gt;&lt;/input&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 3.0 测试value属性：控制输入框的初始值 --&gt;</span><br><span class="line">&lt;input value=&apos;我是该输入框的初始值&apos;&gt;&lt;/input&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 4.0 测试disabled属性：控制输入框是否禁用 --&gt;</span><br><span class="line">&lt;input disabled placeholder=&apos;禁用输入框&apos;&gt;&lt;/input&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 5.0 测试placeholder-style：给占位的文本设置样式 --&gt;</span><br><span class="line">&lt;input placeholder-style=&apos;color:red;&apos; placeholder=&apos;我是占位的文本&apos;&gt;&lt;/input&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 6.0 测试maxlength：限制输入框的最大长度 --&gt;</span><br><span class="line">&lt;input maxlength=&quot;10&quot; placeholder=&apos;最多只能输入10个字符&apos;&gt;&lt;/input&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 7.0 测试事件 --&gt;</span><br><span class="line">&lt;input</span><br><span class="line">bindfocus=&apos;onbindfocus&apos;</span><br><span class="line">bindblur=&apos;onbindblur&apos;</span><br><span class="line">bindinput=&apos;onbindinput&apos;</span><br><span class="line">bindconfirm=&apos;onbindconfirm&apos;</span><br><span class="line">placeholder=&apos;输入框获取焦点的时候出发&apos;&gt;</span><br><span class="line">&lt;/input&gt;</span><br><span class="line"></span><br><span class="line">//js文件的内容</span><br><span class="line">Page(&#123;</span><br><span class="line">  onbindfocus:function(e)&#123;</span><br><span class="line">    console.log(&quot;onbindfocus-获得焦点&quot;,e);</span><br><span class="line">  &#125;,</span><br><span class="line">  onbindblur: function (e) &#123;</span><br><span class="line">    console.log(&quot;onbindblur-失去焦点&quot;, e);</span><br><span class="line">  &#125;,</span><br><span class="line">  onbindconfirm: function (e) &#123;</span><br><span class="line">    console.log(&quot;onbindconfirm-点击完成(键盘右下角)&quot;, e);</span><br><span class="line">  &#125;,</span><br><span class="line">  onbindinput: function (e) &#123;</span><br><span class="line">    console.log(&quot;onbindinput-监听到键盘输入&quot;, e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本文介绍小程序中的基础组件，主要包括button、input等组件的基本使用和代码示例。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;1-0-button组件&quot;&gt;&lt;a href=&quot;#1-0-button组件&quot; class=&quot;headerli
      
    
    </summary>
    
    
      <category term="微信小程序序列" scheme="https://weibo.com/u/3800117445/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%8F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>微信小程序基础[08]-模板的基本使用和引入</title>
    <link href="https://weibo.com/u/3800117445/2018/09/27/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%B3%BB%E5%88%97%5B08%5D-%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E5%92%8C%E5%BC%95%E5%85%A5/"/>
    <id>https://weibo.com/u/3800117445/2018/09/27/微信小程序系列[08]-模板的基本使用和引入/</id>
    <published>2018-09-26T16:00:08.000Z</published>
    <updated>2018-11-11T13:30:01.247Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本文介绍小程序框架中模板的基本使用，并通过一个综合案例来演绎。</p></blockquote><h4 id="1-0-模板基本说明"><a href="#1-0-模板基本说明" class="headerlink" title="1.0 模板基本说明"></a>1.0 模板基本说明</h4><p>在小程序开发过程中经常会发现有些相同的结构需要在不同的地方使用，我们没必要每次都创建代码做重复性的工作，这种情况可以考虑使用模板。我们可以把相同结构的代码放到一个模板中，需要使用的时候只需要通过模板语法来调用即可创建，而且模板语法还支持传参，灵活性很高且有利于提高效率和代码的可读性。</p><p>模板的基本用法可以简单分成两个部分：<span style="color:#e08">模板的定义</span>和<span style="color:#e08">模板的使用</span>。</p><p>定义模板非常简单，只需要把代码片段<code>使用template来包裹并设置name属性</code>即可。<br>在使用模板的时候，通过<code>设置is属性的值为指定模板的name</code>即可使用对应的模板，模板还支持传参。</p><p>这里给出模板定义和使用的基本示例代码：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">//wxml文件的内容</span><br><span class="line"><span class="comment">&lt;!-- 1.0 模板的定义 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">name</span>=<span class="string">'template_one'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">'http://wendingding.com/%E9%B2%B8%E9%B1%BC.png'</span> <span class="attr">class</span>=<span class="string">'imgClass'</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>我是文本标签:鲸鱼\n<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">name</span>=<span class="string">'template_two'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>\n哈哈\n<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>嘻嘻\n<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>呵呵\n<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 2.0 模板的使用 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">'template_one'</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">'template_two'</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">'template_two'</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//xmss文件的内容</span><br><span class="line">style sheets</span><br><span class="line">.imgClass</span><br><span class="line">&#123;</span><br><span class="line">  width: 200rpx;</span><br><span class="line">  height: 200rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">text&#123;</span><br><span class="line">  background: #593</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong>模板传参</strong></p><p>小程序框架中的模板支持传参，在向模板传参的时候只需要设置template中的<code>data属性</code>即可，需要注意的是<span style="color:#195">小程序中的模板拥有独立的作用域</span>，因此不能直接使用js文件中Page函数内部的data属性。页面在进行渲染的时候，template的内容会被模板中的代码完全替换。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1.0 模板的定义 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">name</span>=<span class="string">'template_one'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">'&#123;&#123;srcImg&#125;&#125;'</span> <span class="attr">class</span>=<span class="string">'imgClass'</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>我是文本标签:&#123;&#123;name&#125;&#125;\n<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">name</span>=<span class="string">'template_two'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>\n哈哈\n<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;text1&#125;&#125;\n<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;text2&#125;&#125;\n<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 2.0 模板的使用 --&gt;</span></span><br><span class="line">//wxml文件的内容</span><br><span class="line"><span class="comment">&lt;!-- 模板传参的第一种方式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">'template_one'</span></span></span><br><span class="line"><span class="tag"><span class="attr">data</span>=<span class="string">'&#123;&#123;srcImg:"http://wendingding.com/%E9%B2%B8%E9%B1%BC.png",name:"鲸鱼"&#125;&#125;'</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">'template_one'</span></span></span><br><span class="line"><span class="tag"><span class="attr">data</span>=<span class="string">'&#123;&#123;srcImg:"http://wendingding.com/老虎.jpeg",name:"老虎"&#125;&#125;'</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 模板传参的第二种方式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">'template_one'</span> <span class="attr">data</span>=<span class="string">'&#123;&#123;srcImg,name&#125;&#125;'</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 模板传参的第三种方式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">'template_one'</span> <span class="attr">data</span>=<span class="string">'&#123;&#123;...obj&#125;&#125;'</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">'template_two'</span> <span class="attr">data</span>=<span class="string">'&#123;&#123;text1:"巴拉巴拉",text2:"溜溜"&#125;&#125;'</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>其他的内容<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//wxss文件的内容</span><br><span class="line">.imgClass</span><br><span class="line">&#123;</span><br><span class="line">  width: 200rpx;</span><br><span class="line">  height: 200rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">text&#123;</span><br><span class="line">  background: #593</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//js文件的内容</span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    srcImg:"http://wendingding.com/%E8%80%81%E8%99%8E.jpeg",</span><br><span class="line">    name:"老虎",</span><br><span class="line">    obj:&#123;</span><br><span class="line">      srcImg: "http://wendingding.com/%E8%80%81%E8%99%8E.jpeg",</span><br><span class="line">      name: "假老虎"</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="2-0-综合案例"><a href="#2-0-综合案例" class="headerlink" title="2.0 综合案例"></a>2.0 综合案例</h4><p>这里给出一个模板使用的基本案例代码和对应的图示。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">//模板的定义</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">name</span>=<span class="string">'addressCardTemplate'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'address-info-view'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'address-info-view-top'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'address-name'</span>&gt;</span>杨勇老师<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'address-status'</span> <span class="attr">hidden</span>=<span class="string">'true'</span>&gt;</span>默认<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'address-del'</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'address-edit'</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'address-info-view-bottom'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'address-tel'</span>&gt;</span>联系电话：18689429999<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">'address-detail'</span>&gt;</span>详细地址：广州市天河区棠下大地XXXX<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//模板对应的样式文件</span><br><span class="line">.address-info-view</span><br><span class="line">&#123;</span><br><span class="line">  height: 220rpx;</span><br><span class="line">  margin-top: 20rpx;</span><br><span class="line">  background: #fff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.address-info-view-top</span><br><span class="line">&#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  height: 100rpx;</span><br><span class="line">  border-bottom: 1px solid #ccc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.address-name</span><br><span class="line">&#123;</span><br><span class="line">  display: block;</span><br><span class="line">  width: 200rpx;</span><br><span class="line">  height: 100rpx;</span><br><span class="line">  line-height: 100rpx;</span><br><span class="line">  padding-left: 30rpx;</span><br><span class="line">  font-size: 35rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.address-status</span><br><span class="line">&#123;</span><br><span class="line">  top: 30rpx;</span><br><span class="line">  left: 220rpx;</span><br><span class="line">  position: absolute;</span><br><span class="line">  width: 60rpx;</span><br><span class="line">  height: 40rpx;</span><br><span class="line">  line-height: 40rpx;</span><br><span class="line">  text-align: center;</span><br><span class="line">  font-size: 25rpx;</span><br><span class="line">  border-radius: 20rpx;</span><br><span class="line">  border: 1px solid #089;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.address-del,.address-edit</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  top: 20rpx;</span><br><span class="line">  position: absolute;</span><br><span class="line">  width: 140rpx;</span><br><span class="line">  height: 60rpx;</span><br><span class="line">  line-height: 60rpx;</span><br><span class="line">  text-align: center;</span><br><span class="line">  font-size: 25rpx;</span><br><span class="line">  border-radius: 30rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.address-edit</span><br><span class="line">&#123;</span><br><span class="line">  right: 30rpx;</span><br><span class="line">  background: #666;</span><br><span class="line">  color: #fff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.address-del</span><br><span class="line">&#123;</span><br><span class="line">  right: 190rpx;</span><br><span class="line">  border: 1px solid #222;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.address-info-view-bottom</span><br><span class="line">&#123;</span><br><span class="line">  height: 120rpx;</span><br><span class="line">  line-height: 120rpx;</span><br><span class="line">  font-size: 25rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.address-tel,.address-detail</span><br><span class="line">&#123;</span><br><span class="line">  display: block;</span><br><span class="line">  height: 40rpx;</span><br><span class="line">  line-height: 40rpx;</span><br><span class="line">  margin-left: 30rpx;</span><br><span class="line">  padding-top: 10rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//模板的使用</span><br><span class="line">//引入外部定义的模板</span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">src</span>=<span class="string">'../../templates/addressCard.wxml'</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">'addressCardTemplate'</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">'addressCardTemplate'</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//引入项目中的wxss样式文件</span><br><span class="line">@import "../../templates/addressCard.wxss";</span><br><span class="line"></span><br><span class="line">page&#123;</span><br><span class="line">  min-height: 100%;</span><br><span class="line">  display: block;</span><br><span class="line">  background: #eee;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://github.com/flowerField/Source/blob/master/Blog/wx20.png?raw=true" height="250px"></p><div class="tip">在wxss样式文件中如果需要引入其它的样式文件那么可以使用@import特性</div><p><strong>import 和 include</strong></p><p>在wxml文件中支持引入其他的wxml文件，可以使用<code>import</code>或者<code>include</code>标签。</p><blockquote><p>❏ import标签   仅仅引入wxml文件中模板定义部分。<br>❏ include标签  仅仅引入wxml文件中非模板定义部分。</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//模板的使用</span><br><span class="line">//引入外部定义的模板</span><br><span class="line">&lt;import src=&apos;../../templates/addressCard.wxml&apos;/&gt;</span><br><span class="line">&lt;template is=&apos;addressCardTemplate&apos;&gt;&lt;/template&gt;</span><br><span class="line">&lt;template is=&apos;addressCardTemplate&apos;&gt;&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">//引入项目中的wxss样式文件</span><br><span class="line">@import &quot;../../templates/addressCard.wxss&quot;;</span><br><span class="line"></span><br><span class="line">page&#123;</span><br><span class="line">  min-height: 100%;</span><br><span class="line">  display: block;</span><br><span class="line">  background: #eee;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="tip">在wxss样式文件中如果需要引入其它的样式文件那么可以使用@import特性</div><hr><ul><li>Posted by 博客园·<a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a> | <a href="http://wendingding.com" target="_blank" rel="noopener">花田半亩</a></li><li>联系作者 简书·<a href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles" target="_blank" rel="noopener">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&amp;mod=TAB#place">Coder_文顶顶</a></li><li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://www.cnblogs.com/wendingding/" target="_blank" rel="noopener">文顶顶</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本文介绍小程序框架中模板的基本使用，并通过一个综合案例来演绎。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;1-0-模板基本说明&quot;&gt;&lt;a href=&quot;#1-0-模板基本说明&quot; class=&quot;headerlink&quot; title=&quot;1.0 模板
      
    
    </summary>
    
    
      <category term="微信小程序序列" scheme="https://weibo.com/u/3800117445/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%8F%E5%88%97/"/>
    
  </entry>
  
</feed>
